"use strict";(self.webpackChunkpersonal_page=self.webpackChunkpersonal_page||[]).push([[505],{4718:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});const o='<div class="auth-guest-dialog"> <div class="header"> <h3> Autenticação necessária <button class="btn only-icon float-right opacity-70 opacity-hover-100" (click)="dialogRef.close(false)" title="Fechar"> <img class="d-block" src="assets/img/icons/close.svg#dark" width="20" alt="close"> </button> </h3> <p class="mt-2">Para continuar, você precisar fazer login por uma destas formas:</p> </div> <p @if="errorMsg" class="text-error mt-6"> {{errorMsg}} </p> <div class="social-buttons"> <button class="social-btn fb w-100" (click)="doAuth(\'fb\')"> <img src="assets/img/social/facebook.svg" alt="Facebook"/> <span>Continiuar com <strong>Facebook</strong></span> </button> <button class="social-btn gog w-100" (click)="doAuth(\'goo\')"> <img src="assets/img/social/google.svg" alt="Google"/> <span>Continiuar com <strong>Google</strong></span> </button> <button class="social-btn gh w-100" (click)="doAuth(\'gh\')"> <img src="assets/img/social/github.svg" alt="Gihub" class="mr-4"/> <span>Continiuar com <strong>Github</strong></span> </button> </div> </div>'},6151:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});const o='<div class="confirm-dialog"> <h3 class="color-title">Confirmação</h3> <p class="mt-2 mb-6">{{text}}</p> <div class="footer pt-3"> <button class="btn" (click)="dialogRef.close(false)"> {{cancelText}} </button> <button class="btn primary" (click)="dialogRef.close(true)"> {{confirmText}} </button> </div> </div>'},4064:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});const o='<div class="article-page"> <div @if="loading" class="loading"> Carregando artigo... </div> <article @if="!loading" class="animated fadeIn"> <h1> {{article.title}} </h1> <div class="author"> <div class="img"> <img [src]="article.authorPhotoUrl"/> </div> <div class="info"> <p class="mb-0 f-w-600"> {{article.authorName}} </p> <p class="date mb-0"> <span class="f-w-500">Publicado em</span>: {{article.createDate.toLocaleString()}} </p> <p @if="article.updatedDate" class="date mb-0"> <span class="f-w-500">Última atualização</span>: {{article.updatedDate.toLocaleString()}} </p> </div> </div> <p [html]="article.content"> </p> </article> <div @if="!loading" class="comments animated fadeIn"> <h3>Comentários</h3> <div @if="commentsLoading" class="loading"> Carregando... </div> <ul @if="!commentsLoading && comments.length > 0" class="animated fadeIn"> <li @for="comment of comments" [style]="comment.anyLoading ? \'opacity: .6\' : null"> <div class="d-table-cell va-top"> <img [src]="comment.authorPhotoUrl"/> </div> <div class="d-table-cell va-top pl-4"> <div class="comment-header"> <p class="mt-3 mb-0"> <strong>{{comment.authorName}}</strong> - {{comment.createDate.toLocaleString()}} </p> </div> <p class="mt-5 mb-1" [html]="comment.content"></p> <ul class="comments-footer"> <li> <a href="#" (click)="toggleLike(comment)" [class]="{ \'disabled\': comment.anyLoading }"> <span @if="comment.likes.length > 0">({{comment.likes.length}})</span> {{getUserLikeOfComment(comment) != null ? \'Descurtir\' : \'Curtir\'}} </a> </li> <li> <a href="#" (click)="toggleSubComments(comment)" [class]="{ \'disabled\': comment.anyLoading }"> <span @if="comment.quantityComments === 0">Responder</span> <span @if="comment.quantityComments > 0">({{comment.quantityComments}}) Respostas</span> </a> </li> <li @if="canRemoveComment(comment)"> <a href="#" (click)="removeComment(comment)" [class]="{ \'disabled\': comment.anyLoading }">Excluir</a> </li> </ul> <div @if="comment.showSubcomments" class="comments animated fadeIn"> <div @if="comment.loadingSubcomments" class="loading"> Carregando... </div> <ul @if="!comment.loadingSubcomments && comment.subComments.length > 0" class="animated fadeIn"> <li @for="subComment of comment.subComments" [style]="subComment.anyLoading ? \'opacity: .6\' : null"> <div class="d-table-cell va-top"> <img [src]="subComment.authorPhotoUrl"/> </div> <div class="d-table-cell va-top pl-4"> <div class="comment-header"> <p class="mt-3 mb-0"> <strong>{{subComment.authorName}}</strong> - {{subComment.createDate.toLocaleString()}} </p> </div> <p class="mt-5 mb-1" [html]="subComment.content"></p> <ul class="comments-footer"> <li> <a href="#" (click)="toggleLike(subComment)" [class]="{ \'disabled\': subComment.anyLoading }"> <span @if="subComment.likes.length > 0">({{subComment.likes.length}})</span> {{getUserLikeOfComment(subComment) != null ? \'Descurtir\' : \'Curtir\'}} </a> </li> <li @if="canRemoveComment(subComment)"> <a href="#" (click)="removeComment(subComment)" [class]="{ \'disabled\': subComment.anyLoading }">Excluir</a> </li> </ul> </div> </li> </ul> <form @if="!comment.loadingSubcomments" [form]="comment.form" (submit)="onCommentSubmit(comment.id)" class="mt-2"> <div class="form-group"> <textarea class="form-control" form-field-name="content" placeholder="Deixar um comentário" maxlength="124" [disabled]="comment.addingSubComment"></textarea> <span @if="comment.form.get(\'content\').hasError(\'required\')" class="text-error mt-2"> Escreva algum cometário para enviar. </span> <span @if="!comment.form.get(\'content\').hasError(\'required\') && comment.form.get(\'content\').hasError(\'minLength\')" class="text-error mt-2"> Escreva ao menos {{comment.form.get(\'content\').errors.minLength}} caracteres </span> <button class="btn float-right" [disabled]="!comment.form.isValid || comment.addingSubComment"> {{comment.addingSubComment ? \'Enviando...\' : \'Enviar\'}} </button> </div> </form> </div> </div> </li> </ul> <form @if="!commentsLoading" [form]="commentForm" (submit)="onCommentSubmit()"> <div class="form-group"> <textarea class="form-control" form-field-name="content" placeholder="Deixar um comentário" maxlength="124" [disabled]="addingCommment"></textarea> <span @if="commentForm.get(\'content\').hasError(\'required\')" class="text-error mt-2"> Escreva algum cometário para enviar. </span> <span @if="!commentForm.get(\'content\').hasError(\'required\') && commentForm.get(\'content\').hasError(\'minLength\')" class="text-error mt-2"> Escreva ao menos {{commentForm.get(\'content\').errors.minLength}} caracteres </span> <button class="btn float-right" [disabled]="!commentForm.isValid || addingCommment"> {{addingCommment ? \'Enviando...\' : \'Enviar\'}} </button> </div> </form> </div> </div>'},5505:(e,t,i)=>{i.r(t),i.d(t,{ArticlePage:()=>v});var o=i(2285),n=i(221),s=i(8249),a=i(223),r=i(3621),c=i(4901),m=i(4290),l=i(8713);let d=class extends m.Vq{constructor(e,t){super(),this.dialogRef=e,this.authService=t,this.loading=!1,this.errorMsg=""}doAuth(e){return t=this,i=void 0,n=function*(){if(!this.loading){this.render((()=>this.loading=!0));try{switch(e){case"goo":yield this.authService.doGoogleAuth(),this.dialogRef.close(!0);break;case"fb":yield this.authService.doFacebookAuth(),this.dialogRef.close(!0);break;case"gh":yield this.authService.doGithubAuth(),this.dialogRef.close(!0)}}catch(e){this.render((()=>{this.loading=!1,this.errorMsg=e.message,console.error(e)}))}}},new((o=void 0)||(o=Promise))((function(e,s){function a(e){try{c(n.next(e))}catch(e){s(e)}}function r(e){try{c(n.throw(e))}catch(e){s(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o((function(e){e(i)}))).then(a,r)}c((n=n.apply(t,i||[])).next())}));var t,i,o,n}};var u,h;d=function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a}([(0,m.nA)({template:i(4718),style:i(1386)}),(u=0,h=(0,l.t)(m.Tb),function(e,t){h(e,t,u)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[m.zj,c.X])],d);let g=class extends m.Vq{constructor(e){var t,i,o;super(),this.dialogRef=e,this.text="Deseja realmente fazer isso?",this.confirmText="Sim",this.cancelText="Não",(null===(t=e.data)||void 0===t?void 0:t.text)&&(this.text=e.data.text),(null===(i=e.data)||void 0===i?void 0:i.confirmText)&&(this.confirmText=e.data.confirmText),(null===(o=e.data)||void 0===o?void 0:o.cancelText)&&(this.cancelText=e.data.cancelText)}onOpen(){}onClose(){}};g=function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a}([(0,m.nA)({template:i(6151),style:i(209)}),function(e,t){return function(i,o){t(i,o,e)}}(0,(0,l.t)(m.Tb)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[m.zj])],g);var f=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function r(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}c((o=o.apply(e,t||[])).next())}))};let v=class extends o.T{get id(){return this.routeParams.params.id}constructor(e,t,i,o){super(),this.articleService=e,this.authService=t,this.routeParams=i,this.dialogBuilder=o,this.loading=!0,this.commentsLoading=!0,this.addingCommment=!1,this.article=null,this.comments=[],this.commentForm=new s.l0({content:{value:"",validators:[s.kI.required,s.kI.minLength(10),s.kI.maxLength(124)]}})}onInit(){return f(this,void 0,void 0,(function*(){this.article=yield this.articleService.getById(this.id),this.loading=!1}))}onAfterInit(){this.getComments()}getComments(){return f(this,void 0,void 0,(function*(){this.comments=yield this.articleService.getComments(this.id),this.commentsLoading=!1,this.render()}))}toggleSubComments(e){return f(this,void 0,void 0,(function*(){if(e.showSubcomments||e.loadingSubcomments)e.loadingSubcomments||e.form.get("content").elements[0].focus();else{this.render((()=>{e.showSubcomments=!0,e.loadingSubcomments=!0}));try{e.subComments=yield this.articleService.getComments(this.id,e.id),this.render((()=>e.loadingSubcomments=!1)).then((t=>{e.form.get("content").elements[0].focus()}))}catch(t){this.render((()=>{e.showSubcomments=!1,e.loadingSubcomments=!1}))}}}))}onCommentSubmit(e){return f(this,void 0,void 0,(function*(){const t=e?this.comments.find((t=>t.id===e)):null,i=t?null==t?void 0:t.form:this.commentForm;if(null==i?void 0:i.isValid)if(this.authService.isLogged){try{this.render((()=>{t?t.addingSubComment=!0:this.addingCommment=!0}));const o=this.authService.user,n=new r.s({id:null,parentId:null!=e?e:null,articleId:this.id,authorName:o.displayName,authorPhotoUrl:o.photoURL,authorEmail:o.email,content:null==i?void 0:i.get("content").value});n.id=yield this.articleService.addComment(n),i.reset(),t?null==t||t.subComments.push(n):this.comments.push(n)}catch(e){console.error(e)}this.render((()=>{t?t.addingSubComment=!1:this.addingCommment=!1}))}else this.dialogBuilder.open(d).onClose.then((()=>{this.authService.isLogged&&this.onCommentSubmit(e)}))}))}toggleLike(e){if(this.authService.isLogged){const t=this.getUserLikeOfComment(e);null!=t?this.unlikeComment(e,t):this.likeComment(e)}else this.dialogBuilder.open(d).onClose.then((()=>{this.authService.isLogged&&null==this.getUserLikeOfComment(e)&&this.likeComment(e)}))}likeComment(e){return f(this,void 0,void 0,(function*(){if(!e.liking){this.render((()=>e.liking=!0));try{const t=yield this.articleService.likeComment(e);e.likes.push(t)}catch(e){}this.render((()=>e.liking=!1))}}))}unlikeComment(e,t){return f(this,void 0,void 0,(function*(){if(!e.liking){this.render((()=>e.liking=!0));try{yield this.articleService.unlikeComment(t.id),e.likes=e.likes.filter((e=>e!==t))}catch(e){}this.render((()=>e.liking=!1))}}))}removeComment(e){e.deleting||this.dialogBuilder.open(g,{data:{text:"Deseja realmente excluir este comentário?"}}).onClose.then((t=>f(this,void 0,void 0,(function*(){if(t){this.render((()=>e.deleting=!0));try{if(yield this.articleService.removeComment(e.id),e.parentId){const t=this.comments.find((t=>t.id===e.parentId));t.subComments=t.subComments.filter((t=>t.id!==e.id))}else this.comments=this.comments.filter((t=>t.id!==e.id))}catch(e){}this.render((()=>e.deleting=!1))}}))))}getUserLikeOfComment(e){return this.authService.isLogged?e.likes.find((e=>e.authorEmail===this.authService.user.email)):null}canRemoveComment(e){if(this.authService.isLogged){const t=this.authService.user;return t.isAdmin||e.authorEmail===t.email}return!1}};v=function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a}([(0,o.h)({template:i(4064),style:i(7695),title:"Eric Ferreira - Article"}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.n,c.X,n.W,m.iQ])],v)},1386:(e,t,i)=>{i.r(t)},209:(e,t,i)=>{i.r(t)},7695:(e,t,i)=>{i.r(t)}}]);