/*! For license information please see main.bundle.32edff6de8925e723243.js.LICENSE.txt */
(()=>{var __webpack_modules__={5752:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n(655),s=n(1313),a=n(9730),u=n(4594),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.ErrorFactory("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Logger("@firebase/app"),v=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=s.deepCopy(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(s.contains(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}c(new a.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});u.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!s.contains(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&s.deepExtend(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var p=o.__values(Object.keys(e)),v=p.next();!v.done;v=p.next()){var y=v.value;e[y]._addComponent(a)}}catch(t){u={error:t}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){s.deepExtend(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(s.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),b.apply(void 0,t)};var w=y;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion(h,"0.6.11",void 0),t.registerVersion("fire-js","")}(w),e.default=w,e.firebase=w},8818:(t,e,n)=>{(function(){var t,e=n(5752).default,r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function s(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,e){if(e){var n=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in n||(n[s]={}),n=n[s]}(e=e(o=n[t=t[t.length-1]]))!=o&&null!=e&&r(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.h(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Pa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=s(t),o=i.next();!o.done;o=i.next())r(o.value).Pa(e,n)}))},e.all=function(t){var n=s(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Pa(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var a=a||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(){}function f(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function y(t){return Object.prototype.hasOwnProperty.call(t,g)&&t[g]||(t[g]=++m)}var g="closure_uid_"+(1e9*Math.random()>>>0),m=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now||function(){return+new Date};function T(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(t,e,n){this.code=R+t,this.message=e||O[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new A(e.substring(R.length),t.message,t.serverResponse):null}T(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var N,R="auth/",O={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},k={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in k)if(k[e].id===t)return{firebaseEndpoint:(t=k[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function D(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function C(t){if(Error.captureStackTrace)Error.captureStackTrace(this,C);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function x(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");C.call(this,n+t[r])}function L(t,e){throw new x("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function j(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}N=P("__EID__")?"__EID__":void 0,T(C,Error),C.prototype.name="CustomError",T(x,C),x.prototype.name="AssertionError",j.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new j((function(){return new q}),(function(t){t.reset()}));function V(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function q(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},G=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},z=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=B(t,e)}function $(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function X(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function J(t){return Array.prototype.concat.apply([],arguments)}function Y(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Q,Z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,st=/[\x00&<>"']/;function at(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var ct=u.navigator;if(ct){var lt=ct.userAgent;if(lt){Q=lt;break t}}Q=""}function ht(t){return at(Q,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function dt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function gt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;L("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function mt(t,e){this.a=t===_t&&e||"",this.b=wt}function bt(t){return t instanceof mt&&t.constructor===mt&&t.b===wt?t.a:(L("expected object of type Const, got '"+t+"'"),"type_error:Const")}mt.prototype.sa=!0,mt.prototype.ra=function(){return this.a},mt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt={},_t={},It=new mt(_t,"");function Et(t,e){this.a=t===Ot&&e||"",this.b=Rt}function Tt(t){return t instanceof Et&&t.constructor===Et&&t.b===Rt?t.a:(L("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function At(t,e){var n=bt(t);if(!Nt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(St,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof mt?bt(t):encodeURIComponent(String(t))})),new Et(Ot,t)}Et.prototype.sa=!0,Et.prototype.ra=function(){return this.a.toString()},Et.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,Nt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Rt={},Ot={};function kt(t,e){this.a=t===Lt&&e||"",this.b=xt}function Pt(t){return t instanceof kt&&t.constructor===kt&&t.b===xt?t.a:(L("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}kt.prototype.sa=!0,kt.prototype.ra=function(){return this.a.toString()},kt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ct(t){return t instanceof kt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new kt(Lt,t))}var xt={},Lt={};function jt(){this.a="",this.b=Mt}function Ft(t){return t instanceof jt&&t.constructor===jt&&t.b===Mt?t.a:(L("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}jt.prototype.sa=!0,jt.prototype.ra=function(){return this.a.toString()},jt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Ut(t){var e=new jt;return e.a=t,e}Ut("<!DOCTYPE html>");var Vt=Ut("");function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Bt(t){return st.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function Gt(t){return Gt[" "](t),t}Ut("<br>"),Gt[" "]=h;var Ht,Wt,zt=ht("Opera"),Kt=ht("Trident")||ht("MSIE"),$t=ht("Edge"),Xt=$t||Kt,Jt=ht("Gecko")&&!(at(Q.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Yt=at(Q.toLowerCase(),"webkit")&&!ht("Edge");function Qt(){var t=u.document;return t?t.documentMode:void 0}t:{var Zt="",te=(Wt=Q,Jt?/rv:([^\);]+)(\)|;)/.exec(Wt):$t?/Edge\/([\d\.]+)/.exec(Wt):Kt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):Yt?/WebKit\/(\S+)/.exec(Wt):zt?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(te&&(Zt=te?te[1]:""),Kt){var ee=Qt();if(null!=ee&&ee>parseFloat(Zt)){Ht=String(ee);break t}}Ht=Zt}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Z(String(Ht)).split("."),r=Z(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ut(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ut(0==s[2].length,0==a[2].length)||ut(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}ne=u.document&&Kt?Qt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var oe=!Kt||9<=Number(ne);function se(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ae(t,e){ft(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:le.hasOwnProperty(n)?t.setAttribute(le[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ue,ce,le={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function he(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function fe(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}function pe(t){u.setTimeout((function(){throw t}),0)}function de(t,e){ce||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);ce=function(){t.then(ge)}}else ce=function(){var t=ge;!d(u.setImmediate)||u.Window&&u.Window.prototype&&!ht("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(ue||(ue=function(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=he(document,"IFRAME");t.style.display="none",function(t){var e=new Et(Ot,bt(It));gt(t,"HTMLIFrameElement"),t.src=Tt(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Ft(Vt)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),ue(t)):u.setImmediate(t)}}(),ve||(ce(),ve=!0),ye.add(t,e)}var ve=!1,ye=new M;function ge(){for(var t;t=V();){try{t.a.call(t.b)}catch(t){pe(t)}F(U,t)}ve=!1}function me(t,e){if(this.a=be,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){De(n,we,t)}),(function(t){if(!(t instanceof Ue))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}De(n,_e,t)}))}catch(t){De(this,_e,t)}}var be=0,we=2,_e=3;function Ie(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ie.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new j((function(){return new Ie}),(function(t){t.reset()}));function Te(t,e,n){var r=Ee.get();return r.g=t,r.b=e,r.f=n,r}function Ae(t){if(t instanceof me)return t;var e=new me(h);return De(e,we,t),e}function Se(t){return new me((function(e,n){n(t)}))}function Ne(t,e,n){Ce(t,e,n,null)||de(I(e,t))}function Re(t){return new me((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ne(t[o],I(i,o,!0),I(i,o,!1));else e(r)}))}function Oe(t,e){if(t.a==be)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==be&&1==r?Oe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Le(n),je(n,i,_e,e)))}t.c=null}else De(t,_e,e)}function ke(t,e){t.b||t.a!=we&&t.a!=_e||xe(t),t.f?t.f.next=e:t.b=e,t.f=e}function Pe(t,e,n,r){var i=Te(null,null,null);return i.a=new me((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ue?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,ke(t,i),i.a}function De(t,e,n){t.a==be&&(t===n&&(e=_e,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ce(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,xe(t),e!=_e||n instanceof Ue||function(t,e){t.g=!0,de((function(){t.g&&Me.call(null,e)}))}(t,n)))}function Ce(t,e,n,r){if(t instanceof me)return ke(t,Te(e||h,n||null,r)),!0;if(D(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function xe(t){t.h||(t.h=!0,de(t.fc,t))}function Le(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function je(t,e,n,r){if(n==_e&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Fe(e,n,r);else try{e.c?e.g.call(e.f):Fe(e,n,r)}catch(t){Me.call(null,t)}F(Ee,e)}function Fe(t,e,n){e==we?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}me.prototype.then=function(t,e,n){return Pe(this,d(t)?t:null,d(e)?e:null,n)},me.prototype.$goog_Thenable=!0,(t=me.prototype).na=function(t,e){return(t=Te(t,t,e)).c=!0,ke(this,t),this},t.s=function(t,e){return Pe(this,null,t,e)},t.cancel=function(t){if(this.a==be){var e=new Ue(t);de((function(){Oe(this,e)}),this)}},t.Zc=function(t){this.a=be,De(this,we,t)},t.$c=function(t){this.a=be,De(this,_e,t)},t.fc=function(){for(var t;t=Le(this);)je(this,t,this.a,this.i);this.h=!1};var Me=pe;function Ue(t){C.call(this,t)}function Ve(){0!=qe&&(Be[y(this)]=this),this.xa=this.xa,this.oa=this.oa}T(Ue,C),Ue.prototype.name="cancel";var qe=0,Be={};function Ge(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=qe)){var e=y(t);if(0!=qe&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Be[e]}}Ve.prototype.xa=!1,Ve.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var He=Object.freeze||function(t){return t},We=!Kt||9<=Number(ne),ze=Kt&&!ie("9"),Ke=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",h,e),u.removeEventListener("test",h,e)}catch(t){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Jt){t:{try{Gt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Je[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},T(Xe,$e);var Je=He({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ze)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Xe.prototype.g=function(){return this.a};var Ye="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function Ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++Qe,this.va=this.Oa=!1}function tn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function en(t){this.src=t,this.a={},this.b=0}function nn(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(tn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function rn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}en.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=rn(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new Ze(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var on="closure_lm_"+(1e6*Math.random()|0),sn={};function an(t,e,n,r,i){if(r&&r.once)cn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)an(t,e[o],n,r,i);else n=mn(n),t&&t[Ye]?wn(t,e,n,v(r)?!!r.capture:!!r,i):un(t,e,n,!1,r,i)}function un(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=v(i)?!!i.capture:!!i,a=yn(t);if(a||(t[on]=a=new en(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=We?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ke||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=mn(n),t&&t[Ye]?_n(t,e,n,v(r)?!!r.capture:!!r,i):un(t,e,n,!0,r,i)}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=mn(n),t&&t[Ye]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=rn(o=t.a[e],n,r,i))&&(tn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=rn(e,n,r,i)),(n=-1<t?e[t]:null)&&hn(n))}function hn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Ye])nn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yn(e))?(nn(n,t),0==n.b&&(n.src=null,e[on]=null)):tn(t)}}}function fn(t){return t in sn?sn[t]:sn[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=dn(o,r),i=i&&!1!==o)}return i}function dn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&hn(t),n.call(r,e)}function vn(t,e){if(t.va)return!0;if(!We){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return dn(t,new Xe(e,this))}function yn(t){return(t=t[on])instanceof en?t:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function mn(t){return d(t)?t:(t[gn]||(t[gn]=function(e){return t.handleEvent(e)}),t[gn])}function bn(){Ve.call(this),this.v=new en(this),this.$b=this,this.fb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function _n(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function In(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Ua||s.src;s.Oa&&nn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function En(t,e,n){if(d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Tn(t){var e=null;return new me((function(n,r){-1==(e=En((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).s((function(t){throw u.clearTimeout(e),t}))}function An(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Sn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Nn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Nn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];On(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)On(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function On(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T(bn,Ve),bn.prototype[Ye]=!0,bn.prototype.addEventListener=function(t,e,n,r){an(this,t,e,n,r)},bn.prototype.removeEventListener=function(t,e,n,r){ln(this,t,e,n,r)},bn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;yt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=In(s,r,!0,t)&&i}if(i=In(s=t.b=n,r,!0,t)&&i,i=In(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=In(s=t.b=e[o],r,!1,t)&&i;return i},bn.prototype.Da=function(){if(bn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)tn(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=Nn.prototype).V=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Rn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return On(this.b,t)?this.b[t]:e},t.set=function(t,e){On(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var kn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof Pn?(this.i=void 0!==e?e:t.i,Dn(this,t.f),this.l=t.l,this.a=t.a,Cn(this,t.g),this.c=t.c,xn(this,Zn(t.b)),this.h=t.h):t&&(n=String(t).match(kn))?(this.i=!!e,Dn(this,n[1]||"",!0),this.l=Un(n[2]||""),this.a=Un(n[3]||"",!0),Cn(this,n[4]),this.c=Un(n[5]||"",!0),xn(this,n[6]||"",!0),this.h=Un(n[7]||"")):(this.i=!!e,this.b=new Kn(null,this.i))}function Dn(t,e,n){t.f=n?Un(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Cn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function xn(t,e,n){e instanceof Kn?(t.b=e,function(t,e){e&&!t.f&&($n(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Jn(this,e),Qn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Vn(e,Wn)),t.b=new Kn(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function jn(t,e){return t.b.get(e)}function Fn(t){return t instanceof Pn?new Pn(t):new Pn(t,void 0)}function Mn(t,e,n,r){var i=new Pn(null,void 0);return t&&Dn(i,t),e&&(i.a=e),n&&Cn(i,n),r&&(i.c=r),i}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Vn(e,Bn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Vn(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Vn(n,"/"==n.charAt(0)?Hn:Gn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Vn(n,zn)),t.join("")},Pn.prototype.resolve=function(t){var e=new Pn(this),n=!!t.f;n?Dn(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)Cn(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(at(i,"./")||at(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?xn(e,Zn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Bn=/[#\/\?@]/g,Gn=/[#\?:]/g,Hn=/[#\?]/g,Wn=/[#\?@]/g,zn=/#/g;function Kn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $n(t){t.a||(t.a=new Nn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xn(t){var e=Sn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Kn(null,void 0);t=An(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Qn(n,i,o):n.add(i,o)}return n}function Jn(t,e){$n(t),e=tr(t,e),On(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,On((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function Yn(t,e){return $n(t),e=tr(t,e),On(t.a.b,e)}function Qn(t,e,n){Jn(t,e),0<n.length&&(t.c=null,t.a.set(tr(t,e),Y(n)),t.b+=n.length)}function Zn(t){var e=new Kn;return e.c=t.c,t.a&&(e.a=new Nn(t.a),e.b=t.b),e}function tr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function er(t){var e=[];return rr(new nr,t,e),e.join("")}function nr(){}function rr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),rr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),rr(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Kn.prototype).add=function(t,e){$n(this),this.c=null,t=tr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){$n(this),this.a.forEach((function(n,r){G(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){$n(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){$n(this);var e=[];if("string"==typeof t)Yn(this,t)&&(e=J(e,this.a.get(tr(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return $n(this),this.c=null,Yn(this,t=tr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(or,(function(t){var e=ir[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ir[t]=e),e})),'"')}function ar(){var t=Nr();return Kt&&!!ne&&11==ne||/Edge\/\d+/.test(t)}function ur(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function cr(t,e){e=e||u.window;var n="about:blank";t&&(n=Pt(Ct(t))),e.location.href=n}function lr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<lr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function hr(t){return!!((t=(t||Nr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function fr(t){t=t||u.window;try{t.close()}catch(t){}}function pr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Nr().toLowerCase(),r&&(e.target=r,at(n,"crios/")&&(e.target="_blank")),Tr(Nr())==Ir&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof kt?n:Ct(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(gt(s=he(document,"A"),"HTMLAnchorElement"),e instanceof kt||e instanceof kt||(e="object"==typeof e&&e.sa?e.ra():String(e),Dt.test(e)||(e="about:invalid#zClosurez"),e=new kt(Lt,e)),s.href=Pt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Pt(e),s&&(Xt&&at(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Ut('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Bt(t)+'">'),r=s.document)&&(r.write(Ft(t)),r.close())):(s=r.open(Pt(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var dr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vr=/^[^@]+@[^@]+$/;function yr(){var t=null;return new me((function(e){"complete"==u.document.readyState?e():(t=function(){e()},cn(window,"load",t))})).s((function(e){throw ln(window,"load",t),e}))}function gr(t){return t=t||Nr(),!("file:"!==Dr()&&"ionic:"!==Dr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function mr(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function br(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function wr(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":br()?"Worker":"Browser"}function _r(){var t=wr();return"ReactNative"===t||"Node"===t}var Ir="Firefox",Er="Chrome";function Tr(t){var e=t.toLowerCase();return at(e,"opera/")||at(e,"opr/")||at(e,"opios/")?"Opera":at(e,"iemobile")?"IEMobile":at(e,"msie")||at(e,"trident/")?"IE":at(e,"edge/")?"Edge":at(e,"firefox/")?Ir:at(e,"silk/")?"Silk":at(e,"blackberry")?"Blackberry":at(e,"webos")?"Webos":!at(e,"safari/")||at(e,"chrome/")||at(e,"crios/")||at(e,"android")?!at(e,"chrome/")&&!at(e,"crios/")||at(e,"edge/")?at(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var Ar={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Sr(t,e){e=e||[];var n,r=[],i={};for(n in Ar)i[Ar[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=Tr(i=Nr()):"Worker"===r&&(r=Tr(i=Nr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Nr(){return u.navigator&&u.navigator.userAgent||""}function Rr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Or(){try{var t=u.localStorage,e=Fr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ar()||!!u.indexedDB}catch(t){return br()&&!!u.indexedDB}return!1}function kr(){return(Pr()||"chrome-extension:"===Dr()||gr())&&!_r()&&Or()&&!br()}function Pr(){return"http:"===Dr()||"https:"===Dr()}function Dr(){return u.location&&u.location.protocol||null}function Cr(t){return!hr(t=t||Nr())&&Tr(t)!=Ir}function xr(t){return void 0===t?null:er(t)}function Lr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function jr(t){if(null!==t)return JSON.parse(t)}function Fr(t){return t||Math.floor(1e9*Math.random()).toString()}function Mr(t){return"Safari"!=Tr(t=t||Nr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ur(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Vr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Nr(),e=wr(),this.b=hr(t)||"ReactNative"===e}function qr(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Br(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function Gr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Hr(){return!(!Rr("fireauth.oauthhelper",u)&&!Rr("fireauth.iframe",u))}Vr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!=typeof t.onLine||!Pr()&&"chrome-extension:"!==Dr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,zr={};function Kr(t){zr[t]||(zr[t]=!0,Br(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==$r.abcd}catch(Wt){Wr=!1}function Xr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Jr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Xr(t,n,e[n])}function Yr(t){var e={};return Jr(e,t),e}function Qr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Xr(e,n,Qr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");Xr(this,"uid",t[ri]),Xr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Xr(this,"enrollmentTime",n),Xr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(t){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Xr(this,"phoneNumber",t[ii])}function si(t){var e={},n=t[li],r=t[fi],i=t[pi];if(t=ti(t[hi]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==ai&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[gi]=n||null,e[di]=r):(e[vi]=r||null,e[gi]=r||null,e[di]=n||null),e[yi]=t||null,Xr(this,bi,i),Xr(this,mi,Qr(e))}T(oi,Zr),oi.prototype.w=function(){var t=oi.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ai="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",li="email",hi="mfaInfo",fi="newEmail",pi="requestType",di="email",vi="fromEmail",yi="multiFactorInfo",gi="previousEmail",mi="data",bi="operation";function wi(t){var e=jn(t=Fn(t),_i)||null,n=jn(t,Ii)||null,r=jn(t,Ai)||null;if(r=r&&Ni[r]||null,!e||!n||!r)throw new A("argument-error",_i+", "+Ii+"and "+Ai+" are required in a valid action code URL.");Jr(this,{apiKey:e,operation:r,code:n,continueUrl:jn(t,Ei)||null,languageCode:jn(t,Ti)||null,tenantId:jn(t,Si)||null})}var _i="apiKey",Ii="oobCode",Ei="continueUrl",Ti="languageCode",Ai="mode",Si="tenantId",Ni={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ai,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function Ri(t){try{return new wi(t)}catch(t){return null}}function Oi(t){var e=t[xi];if(void 0===e)throw new A("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[ki];if(n&&"object"==typeof n){e=n[Fi];var r=n[Li];if(n=n[ji],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new A("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new A("argument-error",ji+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new A("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new A("missing-android-pkg-name")}}else if(void 0!==n)throw new A("argument-error",ki+" property must be a non null object when specified.");if(this.f=null,(e=t[Ci])&&"object"==typeof e){if("string"==typeof(e=e[Mi])&&e.length)this.f=e;else if(void 0!==e)throw new A("argument-error",Mi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new A("argument-error",Ci+" property must be a non null object when specified.");if(void 0!==(e=t[Di])&&"boolean"!=typeof e)throw new A("argument-error",Di+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Pi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new A("argument-error",Pi+" property must be a non empty string when specified.");this.i=t||null}var ki="android",Pi="dynamicLinkDomain",Di="handleCodeInApp",Ci="iOS",xi="url",Li="installApp",ji="minimumVersion",Fi="packageName",Mi="bundleId";function Ui(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Vi=null;function qi(t){var e=Gi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,E(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Bi(t){try{return new qi(t)}catch(t){return null}}function Gi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Vi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Vi){Vi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Vi[o]&&(Vi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(t){}return null}qi.prototype.S=function(){return this.f},qi.prototype.i=function(){return this.b},qi.prototype.toString=function(){return this.g};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Wi=["client_id","response_type","scope","redirect_uri","state"],zi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Wi},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Wi},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Wi},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Hi},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Ki(t){for(var e in zi)if(zi[e].fa==t)return zi[e];return null}function $i(t){var e={};e["facebook.com"]=Zi,e["google.com"]=eo,e["github.com"]=to,e["twitter.com"]=no;var n=t&&t[Ji];try{if(n)return e[n]?new e[n](t):new Qi(t);if(void 0!==t[Xi])return new Yi(t)}catch(t){}return null}var Xi="idToken",Ji="providerId";function Yi(t){var e=t[Ji];if(!e&&t[Xi]){var n=Bi(t[Xi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Xr(this,"providerId",e),Xr(this,"isNewUser",n)}function Qi(t){Yi.call(this,t),Xr(this,"profile",Qr((t=jr(t.rawUserInfo||"{}"))||{}))}function Zi(t){if(Qi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Qi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Xr(this,"username",this.profile&&this.profile.login||null)}function eo(t){if(Qi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(Qi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Xr(this,"username",t.screenName||null)}function ro(t){var e=Fn(t),n=jn(e,"link"),r=jn(Fn(n),"link");return e=jn(e,"deep_link_id"),jn(Fn(e),"link")||e||r||n||t}function io(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?oo:so}T(Qi,Yi),T(Zi,Qi),T(to,Qi),T(eo,Qi),T(no,Qi);var oo="enroll",so="signin";function ao(){}function uo(t,e){return t.then((function(t){if(t[Js]){var n=Bi(t[Js]);if(!n||e!=n.h)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==R+"user-not-found"?new A("user-mismatch"):t}))}function co(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,Xr(this,"providerId",t),Xr(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ho(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(t){}return null}function fo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Xr(this,"idToken",e.idToken),e.accessToken&&Xr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Xr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");Xr(this,"accessToken",e.oauthToken),Xr(this,"secret",e.oauthTokenSecret)}Xr(this,"providerId",t),Xr(this,"signInMethod",n)}function po(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function vo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new fo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function yo(t,e){this.Pc=e||[],Jr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Ki(t)||{}).Ja||null,this.nb=null}function go(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');yo.call(this,t,[])}function mo(t){yo.call(this,t,Wi),this.a=[]}function bo(){mo.call(this,"facebook.com")}function wo(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function _o(){mo.call(this,"github.com")}function Io(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Eo(){mo.call(this,"google.com"),this.Ca("profile")}function To(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Eo).credential({idToken:n,accessToken:e})}function Ao(){yo.call(this,"twitter.com",Hi)}function So(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new fo("twitter.com",n,"twitter.com")}function No(t,e,n){this.a=t,this.f=e,Xr(this,"providerId","password"),Xr(this,"signInMethod",n===Oo.EMAIL_LINK_SIGN_IN_METHOD?Oo.EMAIL_LINK_SIGN_IN_METHOD:Oo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ro(t){return t&&t.email&&t.password?new No(t.email,t.password,t.signInMethod):null}function Oo(){Jr(this,{providerId:"password",isOAuthProvider:!1})}function ko(t,e){if(!(e=Po(e)))throw new A("argument-error","Invalid email link!");return new No(t,e.code,Oo.EMAIL_LINK_SIGN_IN_METHOD)}function Po(t){return(t=Ri(t=ro(t)))&&t.operation===ui?t:null}function Do(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new A("internal-error");this.a=t,Xr(this,"providerId","phone"),this.fa="phone",Xr(this,"signInMethod","phone")}function Co(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Do(e)}return null}function xo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function Lo(t){try{this.a=t||e.auth()}catch(t){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Jr(this,{providerId:"phone",isOAuthProvider:!1})}function jo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Do({cb:t,bb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new Do({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return To(o,n);case"facebook.com":return wo(n);case"github.com":return Io(n);case"twitter.com":return So(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new co(e,s):new fo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new mo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Mo(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function Uo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new Uo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function qo(){this.b=null,this.a=[]}io.prototype.Ha=function(){return this.a?Ae(this.a):Ae(this.b)},io.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ao.prototype.ja=function(){},ao.prototype.b=function(){},ao.prototype.c=function(){},ao.prototype.w=function(){},co.prototype.ja=function(t){return ga(t,lo(this))},co.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,ma(t,n)},co.prototype.c=function(t,e){return uo(ba(t,lo(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},fo.prototype.ja=function(t){return ga(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,ma(t,n)},fo.prototype.c=function(t,e){return uo(ba(t,po(this)),e)},fo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},yo.prototype.Ka=function(t){return this.Hb=dt(t),this},T(go,yo),T(mo,yo),mo.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},mo.prototype.Pb=function(){return Y(this.a)},mo.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new fo(this.providerId,n,this.providerId)},T(bo,mo),Xr(bo,"PROVIDER_ID","facebook.com"),Xr(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(_o,mo),Xr(_o,"PROVIDER_ID","github.com"),Xr(_o,"GITHUB_SIGN_IN_METHOD","github.com"),T(Eo,mo),Xr(Eo,"PROVIDER_ID","google.com"),Xr(Eo,"GOOGLE_SIGN_IN_METHOD","google.com"),T(Ao,yo),Xr(Ao,"PROVIDER_ID","twitter.com"),Xr(Ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ja=function(t){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?tu(t,Na,{email:this.a,oobCode:this.f}):tu(t,Xa,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?tu(t,Ra,{idToken:e,email:this.a,oobCode:this.f}):tu(t,qa,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return uo(this.ja(t),e)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Jr(Oo,{PROVIDER_ID:"password"}),Jr(Oo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Jr(Oo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Do.prototype.ja=function(t){return t.eb(xo(this))},Do.prototype.b=function(t,e){var n=xo(this);return n.idToken=e,tu(t,Ya,n)},Do.prototype.c=function(t,e){var n=xo(this);return n.operation="REAUTH",uo(t=tu(t,Qa,n),e)},Do.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Lo.prototype.eb=function(t,e){var n=this.a.a;return Ae(e.verify()).then((function(r){if("string"!=typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===e.type){var i,o=v(t)?t.session:null,s=v(t)?t.phoneNumber:t;return i=o&&o.type==oo?o.Ha().then((function(t){return function(t,e){return tu(t,Ga,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r}})})):o&&o.type==so?o.Ha().then((function(e){return function(t,e){return tu(t,Ha,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return tu(t,Ua,e)}(n,{phoneNumber:s,recaptchaToken:r}),i.then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}))}throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},Jr(Lo,{PROVIDER_ID:"phone"}),Jr(Lo,{PHONE_SIGN_IN_METHOD:"phone"}),Uo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Uo.prototype.S=function(){return this.h},Uo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Bo,Go=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Fn(t);t=r.a,"chrome-extension"==(r=r.f)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Wo(t,e,n){A.call(this,t,n),(t=e||{}).Ib&&Xr(this,"email",t.Ib),t.ea&&Xr(this,"phoneNumber",t.ea),t.credential&&Xr(this,"credential",t.credential),t.Yb&&Xr(this,"tenantId",t.Yb)}function zo(t){if(t.code){var e=t.code||"";0==e.indexOf(R)&&(e=e.substring(R.length));var n={credential:Fo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Wo(e,n,t.message)}return null}function Ko(){}function $o(t){return t.c||(t.c=t.b())}function Xo(){}function Jo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Yo(){}function Qo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.pc,this),this.a.onerror=_(this.Rb,this),this.a.onprogress=_(this.qc,this),this.a.ontimeout=_(this.uc,this)}function Zo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ts(t,e,n){this.reset(t,e,n,void 0,void 0)}function es(t){this.f=t,this.b=this.c=this.a=null}function ns(t,e){this.name=t,this.value=e}T(Ho,A),T(Wo,A),Wo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Wo.prototype.toJSON=function(){return this.w()},Ko.prototype.c=null,T(Xo,Ko),Xo.prototype.a=function(){var t=Jo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xo.prototype.b=function(){var t={};return Jo(this)&&(t[0]=!0,t[1]=!0),t},Bo=new Xo,T(Yo,Ko),Yo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Qo;throw Error("Unsupported browser")},Yo.prototype.b=function(){return{}},(t=Qo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Zo(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",Zo(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,Zo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ts.prototype.a=null,ts.prototype.reset=function(t,e,n,r,i){r||E(),delete this.a},ns.prototype.toString=function(){return this.name};var rs=new ns("SEVERE",1e3),is=new ns("WARNING",900),os=new ns("CONFIG",700),ss=new ns("FINE",500);function as(t){return t.c?t.c:t.a?as(t.a):(L("Root logger has no level set."),null)}es.prototype.log=function(t,e,n){if(t.value>=as(this).value)for(d(e)&&(e=e()),t=new ts(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var us={},cs=null;function ls(t){var e;if(cs||(cs=new es(""),us[""]=cs,cs.c=os),!(e=us[t])){e=new es(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,us[t]=e}return e}function hs(t,e){t&&t.log(ss,e,void 0)}function fs(t){this.f=t}function ps(t){bn.call(this),this.o=t,this.readyState=ds,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ls("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}T(fs,Ko),fs.prototype.a=function(){return new ps(this.f)},fs.prototype.b=function(t){return function(){return t}}({}),T(ps,bn);var ds=0;function vs(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function ys(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,gs(t)}function gs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ms(t){bn.call(this),this.headers=new Nn,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=bs,this.u=this.R=!1}(t=ps.prototype).open=function(t,e){if(this.readyState!=ds)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,gs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ys(this,!1)),this.readyState=ds},t.tc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,gs(this)),this.a&&(this.readyState=3,gs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,vs(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ys(this,!0):gs(this),3==this.readyState&&vs(this)}},t.sc=function(t){this.a&&(this.response=this.responseText=t,ys(this,!0))},t.rc=function(t){this.a&&(this.response=t,ys(this,!0))},t.Ta=function(t){var e=this.h;e&&e.log(is,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ys(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(is,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(is,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},T(ms,bn);var bs="";ms.prototype.b=ls("goog.net.XhrIo");var ws=/^https?$/i,_s=["POST","PUT"];function Is(t){return"content-type"==t.toLowerCase()}function Es(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ts(t),Ss(t)}function Ts(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function As(t){if(t.c&&void 0!==a)if(t.A[1]&&4==Rs(t)&&2==Os(t))hs(t.b,ks(t,"Local request error detected and ignored"));else if(t.i&&4==Rs(t))En(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==Rs(t)){hs(t.b,ks(t,"Request complete")),t.c=!1;try{var e,n=Os(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(kn)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!ws.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Rs(t)?t.a.statusText:""}catch(e){hs(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Os(t)+"]",Ts(t)}}finally{Ss(t)}}}function Ss(t,e){if(t.a){Ns(t);var n=t.a,r=t.A[0]?h:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(rs,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ns(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(u.clearTimeout(t.o),t.o=null)}function Rs(t){return t.a?t.a.readyState:0}function Os(t){try{return 2<Rs(t)?t.a.status:-1}catch(t){return-1}}function ks(t,e){return e+" ["+t.P+" "+t.l+" "+Os(t)+"]"}function Ps(t){var e=Bs;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function Ds(t,e,n){t.a=!0,t.c=n,t.f=!e,js(t)}function Cs(t){if(t.a){if(!t.m)throw new Fs(t);t.m=!1}}function xs(t,e,n,r){t.g.push([e,n,r]),t.a&&js(t)}function Ls(t){return z(t.g,(function(t){return d(t[1])}))}function js(t){if(t.h&&t.a&&Ls(t)){var e=t.h,n=Vs[e];n&&(u.clearTimeout(n.a),delete Vs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.o,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(D(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ls(t)||(n=!0)}}t.c=e,r&&(a=_(t.v,t,!0),r=_(t.v,t,!1),e instanceof Ps?(xs(e,a,r),e.A=!0):e.then(a,r)),n&&(e=new Us(e),Vs[e.a]=e,t.h=e.a)}function Fs(){C.call(this)}function Ms(){C.call(this)}function Us(t){this.a=u.setTimeout(_(this.c,this),0),this.b=t}(t=ms.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",hs(this.b,ks(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(hs(this.b,ks(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ss(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ss(this,!0)),ms.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?As(this):this.Ic())},t.Ic=function(){As(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case bs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(rs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return hs(this.b,"Can not get response: "+t.message),null}},Ps.prototype.cancel=function(t){if(this.a)this.c instanceof Ps&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new Ms(this),Cs(this),Ds(this,!1,t))}},Ps.prototype.v=function(t,e){this.i=!1,Ds(this,t,e)},Ps.prototype.then=function(t,e,n){var r,i,o=new me((function(t,e){r=t,i=e}));return xs(this,r,(function(t){t instanceof Ms?o.cancel():i(t)})),o.then(t,e,n)},Ps.prototype.$goog_Thenable=!0,T(Fs,C),Fs.prototype.message="Deferred has already fired",Fs.prototype.name="AlreadyCalledError",T(Ms,C),Ms.prototype.message="Deferred was canceled",Ms.prototype.name="CanceledError",Us.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function qs(t){var e={},n=e.document||document,r=Tt(t).toString(),i=he(document,"SCRIPT"),o={Vb:i,Ma:void 0},s=new Ps(o),a=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(a=window.setTimeout((function(){Gs(i,!0);var t=new zs(Ws,"Timeout reached for loading script "+r);Cs(s),Ds(s,!1,t)}),h),o.Ma=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Gs(i,e.wd||!1,a),Cs(s),Ds(s,!0,null))},i.onerror=function(){Gs(i,!0,a);var t=new zs(Hs,"Error while loading script "+r);Cs(s),Ds(s,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ae(i,o),function(t,e){gt(t,"HTMLScriptElement"),t.src=Tt(e),null===l&&(l=(e=(e=u.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&c.test(e)?e:""),(e=l)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Bs(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&Gs(t,!0,this.Ma)}}function Gs(t,e,n){null!=n&&u.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Hs=0,Ws=1;function zs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),C.call(this,n),this.code=t}function Ks(t){this.f=t}function $s(t,n,r){if(this.c=t,t=n||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||Ys,this.g=dt(t.secureTokenHeaders||Qs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||Zs,this.a=dt(t.firebaseHeaders||ta),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==wr(),!(r=u.XMLHttpRequest||r&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest)&&!br())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,br()?this.f=new fs(self):_r()?this.f=new Ks(r):this.f=new Yo,this.b=null}T(zs,C),T(Ks,Ko),Ks.prototype.a=function(){return new this.f},Ks.prototype.b=function(){return{}};var Xs,Js="idToken",Ys=new Vr(3e4,6e4),Qs={"Content-Type":"application/x-www-form-urlencoded"},Zs=new Vr(3e4,6e4),ta={"Content-Type":"application/json"};function ea(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function na(t,e){e&&(t.l=ra("https://securetoken.googleapis.com/v1/token",e),t.h=ra("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ra("https://identitytoolkit.googleapis.com/v2/",e))}function ra(t,e){return t=Fn(t),e=Fn(e.url),t.c=t.a+t.c,Dn(t,e.f),t.a=e.a,Cn(t,e.g),t.toString()}function ia(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function oa(t,e,n,r,i,o,s){(function(){var t=Nr();return!((t=Tr(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Kt&&ne&&!(9<ne))})()||br()?t=_(t.u,t):(Xs||(Xs=new me((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(u[aa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){xs(t,null,e,void 0)}(qs(At(sa,{onload:aa})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=_(t.o,t)),t(e,n,r,i,o,s)}$s.prototype.S=function(){return this.b},$s.prototype.u=function(t,e,n,r,i,o){if(br()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ms(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}wn(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return hs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),_n(s,"ready",(function(){a&&clearTimeout(a),Ge(this)})),_n(s,"timeout",(function(){a&&clearTimeout(a),Ge(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():Bo.a(),t.A=t.O?$o(t.O):$o(Bo),t.a.onreadystatechange=_(t.Ub,t);try{hs(t.b,ks(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return hs(t.b,ks(t,"Error opening Xhr: "+e.message)),void Es(t,e)}e=r||"";var o=new Nn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)G(t,e,void 0);else for(var n=Sn(t),r=An(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Is,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!K(_s,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Ns(t),0<t.g&&(t.u=function(t){return Kt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),hs(t.b,ks(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.o=En(t.Ma,t.g,t)),hs(t.b,ks(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){hs(t.b,ks(t,"Send error: "+e.message)),Es(t,e)}}(s,t,n,r,i)};var sa=new mt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),aa="__fcb"+Math.floor(1e6*Math.random()).toString();function ua(t){if("string"!=typeof(t=t.email)||!vr.test(t))throw new A("invalid-email")}function ca(t){"email"in t&&ua(t)}function la(t){if(!t[Js]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,dt(t));throw new A("internal-error")}}function ha(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}$s.prototype.o=function(t,e,n,r,i){var o=this;Xs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},$s.prototype.yb=function(){return tu(this,Ba,{})},$s.prototype.Ab=function(t,e){return tu(this,Va,{idToken:t,email:e})},$s.prototype.Bb=function(t,e){return tu(this,qa,{idToken:t,password:e})};var fa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function pa(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function da(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function va(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Yn(t=new Kn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ya(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=zo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=zo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=zo(t)):t.errorMessage&&(e=eu(t.errorMessage)),e)throw e;la(t)}function ga(t,e){return e.returnIdpCredential=!0,tu(t,Wa,e)}function ma(t,e){return e.returnIdpCredential=!0,tu(t,Ka,e)}function ba(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,tu(t,za,e)}function wa(t){if(!t.oobCode)throw new A("invalid-action-code")}(t=$s.prototype).Cb=function(t,e){var n={idToken:t},r=[];return ft(fa,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),tu(this,Va,n)},t.ub=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),tu(this,La,t)},t.vb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),tu(this,Da,t)},t.tb=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),tu(this,Ca,t)},t.Db=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),tu(this,xa,t)},t.eb=function(t){return tu(this,Ja,t)},t.mb=function(t,e){return tu(this,Ma,{oobCode:t,newPassword:e})},t.Qa=function(t){return tu(this,Ia,{oobCode:t})},t.ib=function(t){return tu(this,_a,{oobCode:t})};var _a={endpoint:"setAccountInfo",B:wa,Z:"email",C:!0},Ia={endpoint:"resetPassword",B:wa,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},C:!0},Ea={endpoint:"signupNewUser",B:function(t){if(ua(t),!t.password)throw new A("weak-password")},F:la,U:!0,C:!0},Ta={endpoint:"createAuthUri",C:!0},Aa={endpoint:"deleteAccount",M:["idToken"]},Sa={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if("array"!=f(t.deleteProvider))throw new A("internal-error")}},Na={endpoint:"emailLinkSignin",M:["email","oobCode"],B:ua,F:la,U:!0,C:!0},Ra={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:ua,F:la,U:!0},Oa={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:pa,F:la,C:!0,Na:!0},ka={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:pa,F:la,C:!0,Na:!0},Pa={endpoint:"getAccountInfo"},Da={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");ua(t)},Z:"email",C:!0},Ca={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",C:!0},xa={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",C:!0},La={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");ua(t)},Z:"email",C:!0},ja={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Fa={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},Ma={endpoint:"resetPassword",B:wa,Z:"email",C:!0},Ua={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Va={endpoint:"setAccountInfo",M:["idToken"],B:ca,U:!0},qa={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(ca(t),!t.password)throw new A("weak-password")},F:la,U:!0},Ba={endpoint:"signupNewUser",F:la,U:!0,C:!0},Ga={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},C:!0,Na:!0},Ha={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},C:!0,Na:!0},Wa={endpoint:"verifyAssertion",B:da,Xa:va,F:ya,U:!0,C:!0},za={endpoint:"verifyAssertion",B:da,Xa:va,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw eu(t.errorMessage);la(t)},U:!0,C:!0},Ka={endpoint:"verifyAssertion",B:function(t){if(da(t),!t.idToken)throw new A("internal-error")},Xa:va,F:ya,U:!0},$a={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new A("invalid-custom-token")},F:la,U:!0,C:!0},Xa={endpoint:"verifyPassword",B:function(t){if(ua(t),!t.password)throw new A("wrong-password")},F:la,U:!0,C:!0},Ja={endpoint:"verifyPhoneNumber",B:ha,F:la,C:!0},Ya={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new A("internal-error");ha(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",zo(t);la(t)}},Qa={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:ha,F:la,C:!0},Za={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Js]^!!t.refreshToken)throw new A("internal-error")},C:!0,Na:!0};function tu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return Se(new A("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return Ae(n).then(e.B).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Fn(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",E().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new me((function(e,n){oa(t,a.toString(),(function(t){t?t.error?n(nu(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:er(Lr(i)),t.a,t.m.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)})).then((function(t){return r=t,e.Xa?e.Xa(n,r):r})).then(e.F).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function eu(t){return nu({error:{errors:[{message:t}],code:400,message:t}})}function nu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=xr(t)),new A("internal-error",e)}function ru(t){this.b=t,this.a=null,this.qb=function(t){return(au||(au=new me((function(t,e){function n(){Ur(),Rr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ur(),e(Error("Network Error"))},timeout:ou.get()})}if(Rr("gapi.iframes.Iframe"))t();else if(Rr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Rr("gapi.load")?n():e(Error("Network Error"))},Ae(qs(r=At(iu,{onload:r}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw au=null,t})))).then((function(){return new me((function(e,n){Rr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),su.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var iu=new mt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),ou=new Vr(3e4,6e4),su=new Vr(5e3,15e3),au=null;function uu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Mn((t=Fn(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):Mn("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function cu(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function lu(t){try{return e.app(t).auth().Ga()}catch(t){return[]}}function hu(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function fu(t){var e=ur();return function(t){return tu(t,ja,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Fn(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Fn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:dr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ho(ur())}))}function pu(t){return t.v||(t.v=yr().then((function(){if(!t.u){var e=t.c,n=t.i,r=lu(t.b),i=new uu(t.o,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Y(r||[]),t.u=i.toString()}t.m=new ru(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then((function(){t.a.register("authEvent",e,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.m,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ae(n)}return n.status="ERROR",Ae(n)}))}(t)}))),t.v}function du(t){return t.l||(t.A=t.c?Sr(t.c,lu(t.b)):null,t.l=new $s(t.g,P(t.i),t.A),t.f&&na(t.l,t.f)),t.l}function vu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new cu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=dt(u||null),t.f=c,t.xb(l).toString()}function yu(t){if(this.a=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function gu(t){this.b=t,this.a={},this.f=_(this.c,this)}uu.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Jn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Jn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Jn(this.a.b,"fw"),this.a.toString()},cu.prototype.xb=function(t){return this.h=t,this},cu.prototype.toString=function(){if(this.m){var t=Fn(this.m.url);t=Mn(t.f,t.a,t.g,"/emulator/auth/handler")}else t=Mn("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.o),Ln(t,"appName",this.c),Ln(t,"authType",this.v),this.a.isOAuthProvider){var n=this.a;try{var r=e.app(this.c).auth().ka()}catch(t){r=null}for(var i in n.nb=r,Ln(t,"providerId",this.a.providerId),n=Lr((r=this.a).Hb))n[i]=n[i].toString();i=r.Pc,n=dt(n);for(var o=0;o<i.length;o++){var s=i[o];s in n&&delete n[s]}r.ob&&r.nb&&!n[r.ob]&&(n[r.ob]=r.nb),pt(n)||Ln(t,"customParameters",xr(n))}if("function"==typeof this.a.Pb&&(r=this.a.Pb()).length&&Ln(t,"scopes",r.join(",")),this.l?Ln(t,"redirectUrl",this.l):Jn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Jn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Jn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!jn(t,a)&&Ln(t,a,this.b[a]);return this.h?Ln(t,"tid",this.h):Jn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Jn(t.b,"eid"),(a=lu(this.c)).length&&Ln(t,"fw",a.join(",")),t.toString()},(t=hu.prototype).Nb=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,s=!1;return this.la().then((function(){(function(t){var e={type:"webStorageSupport"};return pu(t).then((function(){return function(t,e){return t.qb.then((function(){return new me((function(n){t.a.send(e.type,e,n,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.m,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&fr(t),e(i),s=!0)}))})).s((function(){})).then((function(){if(!s)return function(t){return new me((function(e){return function n(){Tn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return Tn(n).then((function(){e(r)}))}))},t.Wb=function(){var t=Nr();return!Cr(t)&&!Mr(t)},t.Sb=function(){return!1},t.Lb=function(t,e,n,r,i,o,s,a){if(!t)return Se(new A("popup-blocked"));if(s&&!Cr())return this.la().s((function(e){fr(t),i(e)})),r(),Ae();this.a||(this.a=fu(du(this)));var u=this;return this.a.then((function(){var e=u.la().s((function(e){throw fr(t),i(e),e}));return r(),e})).then((function(){Mo(n),s||cr(vu(u.o,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Mb=function(t,e,n,r){this.a||(this.a=fu(du(this)));var i=this;return this.a.then((function(){Mo(e),cr(vu(i.o,i.g,i.b,t,e,ur(),n,i.c,void 0,i.i,r,i.f))})).s((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.la=function(){var t=this;return pu(this).then((function(){return t.m.qb})).s((function(){throw t.a=null,new A("network-request-failed")}))},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(t){X(this.h,(function(e){return e==t}))},(t=yu.prototype).get=function(t){return Ae(this.a.getItem(t)).then((function(t){return t&&jr(t)}))},t.set=function(t,e){return Ae(this.a.setItem(t,xr(e)))},t.T=function(t){return Ae(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var mu,bu=[];function wu(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function _u(t){this.a=t}function Iu(t){this.c=t,this.b=!1,this.a=[]}function Eu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Se(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new me((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Tu(t,c),e})).s((function(e){throw Tu(t,c),e}))}function Tu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),X(t.a,(function(t){return t==e}))}}function Au(){if(!Ru())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;br()&&self?(this.l=function(){var t=br()?self:null;if(G(bu,(function(n){n.b==t&&(e=n)})),!e){var e=new gu(t);bu.push(e)}return e}(),wu(this.l,"keyChanged",(function(e,n){return Cu(t).then((function(e){return 0<e.length&&G(t.a,(function(t){t(e)})),{keyProcessed:K(e,n.key)}}))})),wu(this.l,"ping",(function(){return Ae(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Ae().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):Ae(null)}().then((function(e){(t.h=e)&&(t.g=new Iu(new _u(e)),Eu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&K(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function Su(t){return new me((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new me((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Su(t)})).then((function(t){e(t)})).s((function(t){n(t)}))}}))}function Nu(t){return t.v||(t.v=Su(t)),t.v}function Ru(){try{return!!u.indexedDB}catch(t){return!1}}function Ou(t){return t.objectStore("firebaseLocalStorage")}function ku(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Pu(t){return new me((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Du(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Eu(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):Ae()}function Cu(t){return Nu(t).then((function(t){var e=Ou(ku(t,!1));return e.getAll?Pu(e.getAll()):new me((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=lr(t.c,n),t.c=n}return r}))}function xu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Lu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ae().then((function(){if(Ru()){var t=Fr(),r="__sak"+t;return mu||(mu=new Au),(n=mu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){G(e.a,(function(e){e(t)}))})),t}))}function ju(){this.a={},this.type="inMemory"}function Fu(){if(!function(){var t="Node"==wr();if(!(t=Mu()||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Mu()||e.INTERNAL.node.localStorage,this.type="localStorage"}function Mu(){try{var t=u.localStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Uu(){this.type="nullStorage"}function Vu(){if(!function(){var t="Node"==wr();if(!(t=qu()||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=qu()||e.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function qu(){try{var t=u.sessionStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Bu(){var t={};t.Browser=Wu,t.Node=zu,t.ReactNative=Ku,t.Worker=$u,this.a=t[wr()]}gu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];G(r,(function(e){i.push(Ae().then((function(){return e(t.origin,t.data.data)})))})),Re(i).then((function(r){var i=[];G(r,(function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),G(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},_u.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Iu.prototype.close=function(){for(;0<this.a.length;)Tu(this,this.a[0]);this.b=!0},(t=Au.prototype).set=function(t,e){var n,r=!1,i=this;return Nu(this).then((function(e){return Pu((e=Ou(ku(n=e,!0))).get(t))})).then((function(o){var s=Ou(ku(n,!0));return o?(o.value=e,Pu(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,Pu(s.add(o)))})).then((function(){return i.c[t]=e,Du(i,t)})).na((function(){r&&i.b--}))},t.get=function(t){return Nu(this).then((function(e){return Pu(Ou(ku(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=!1,n=this;return Nu(this).then((function(r){return e=!0,n.b++,Pu(Ou(ku(r,!0)).delete(t))})).then((function(){return delete n.c[t],Du(n,t)})).na((function(){e&&n.b--}))},t.ca=function(t){0==this.a.length&&function(t){xu(t),function e(){t.f=setTimeout((function(){t.i=Cu(t).then((function(e){0<e.length&&G(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){X(this.a,(function(e){return e==t})),0==this.a.length&&xu(this)},(t=Lu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){X(this.a,(function(e){return e==t}))},(t=ju.prototype).get=function(t){return Ae(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ae()},t.T=function(t){return delete this.a[t],Ae()},t.ca=function(){},t.ia=function(){},(t=Fu.prototype).get=function(t){var e=this;return Ae().then((function(){return jr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ae().then((function(){var r=xr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ae().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&an(u.window,"storage",t)},t.ia=function(t){u.window&&ln(u.window,"storage",t)},(t=Uu.prototype).get=function(){return Ae(null)},t.set=function(){return Ae()},t.T=function(){return Ae()},t.ca=function(){},t.ia=function(){},(t=Vu.prototype).get=function(t){var e=this;return Ae().then((function(){return jr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ae().then((function(){var r=xr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ae().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Gu,Hu,Wu={D:Fu,ab:Vu},zu={D:Fu,ab:Vu},Ku={D:yu,ab:Uu},$u={D:Fu,ab:Uu},Xu={qd:"local",NONE:"none",sd:"session"};function Ju(){var t=!(Mr(Nr())||!mr()),e=Cr(),n=Or();this.v=t,this.h=e,this.l=n,this.a={},Gu||(Gu=new Bu),t=Gu;try{this.g=!ar()&&Hr()||!u.indexedDB?new t.a.D:new Lu(br()?new ju:new t.a.D)}catch(t){this.g=new ju,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new ju}this.m=new ju,this.f=_(this.Xb,this),this.b={}}function Yu(){return Hu||(Hu=new Ju),Hu}function Qu(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function Zu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function tc(t,e,n){return n=Zu(e,n),"local"==e.D&&(t.b[n]=null),Qu(t,e.D).T(n)}function ec(t){t.c&&(clearInterval(t.c),t.c=null)}function nc(t){this.a=t,this.b=Yu()}(t=Ju.prototype).get=function(t,e){return Qu(this,t.D).get(Zu(t,e))},t.set=function(t,e,n){var r=Zu(t,n),i=this,o=Qu(this,t.D);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.D&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=Zu(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),pt(this.a)&&(Qu(this,"local").ca(this.f),this.h||(ar()||!Hr())&&u.indexedDB||!this.l||function(t){ec(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Zu(t,e),this.a[t]&&(X(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(Qu(this,"local").ia(this.f),ec(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Qu(this,"local").ia(this.f):ec(this),this.v)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.lb(e))},Kt&&ne&&10==ne&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else G(t,_(this.lb,this))},t.lb=function(t){this.a[t]&&G(this.a[t],(function(t){t()}))};var rc,ic={name:"authEvent",D:"local"};function oc(){this.a=Yu()}function sc(t,e){this.b=ac,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===rc&&(rc=u.Int32Array?new Int32Array(dc):dc),this.reset()}T(sc,(function(){this.b=-1}));for(var ac=64,uc=ac-1,cc=[],lc=0;lc<uc;lc++)cc[lc]=0;var hc=J(128,cc);function fc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|rc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function pc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(fc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(fc(t),i=0)}}t.c=i,t.g+=n}sc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Y(this.h)};var dc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function vc(){sc.call(this,8,yc)}T(vc,sc);var yc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function gc(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new oc,this.g=new nc(this.h),this.f=null,this.b=[],this.a=this.c=null}function mc(t){return new A("invalid-cordova-configuration",t)}function bc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function wc(t){return t.f||(t.f=t.la().then((function(){return new me((function(e){t.Ea((function n(r){return e(r),t.Ra(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),_c(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ro(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=jr(jn(o=Fn(i),"firebaseError")||null))?S(o):null)?new Uo(r.c,r.b,null,null,o,null,r.S()):new Uo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}bc(t,i)}))}var n=new Uo("unknown",null,null,null,new A("no-auth-event")),r=!1,i=Tn(500).then((function(){return _c(t).then((function(){r||bc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Rr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Go||(Go=new qo),function(t){var e=Go;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Rr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function _c(t){var e=null;return function(t){return t.b.get(ic,t.a).then((function(t){return Vo(t)}))}(t.g).then((function(n){return e=n,tc((n=t.g).b,ic,n.a)})).then((function(){return e}))}function Ic(t){this.a=t,this.b=Yu()}(t=gc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(gr(void 0)?yr().then((function(){return new me((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Se(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Rr("universalLinks.subscribe",u))throw mc("cordova-universal-links-plugin-fix is not installed");if(void 0===Rr("BuildInfo.packageName",u))throw mc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Rr("cordova.plugins.browsertab.openUrl",u))throw mc("cordova-plugin-browsertab is not installed");if("function"!=typeof Rr("cordova.InAppBrowser.open",u))throw mc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},t.Nb=function(t,e){return e(new A("operation-not-supported-in-this-environment")),Ae()},t.Lb=function(){return Se(new A("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return Se(new A("redirect-operation-pending"));var i=this,o=u.document,s=null,a=null,c=null,l=null;return this.c=Ae().then((function(){return Mo(e),wc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Uo(e,r,null,o,new A("no-auth-event"),null,i),a=Rr("BuildInfo.packageName",u);if("string"!=typeof a)throw new A("invalid-cordova-configuration");var c=Rr("BuildInfo.displayName",u),l={};if(Nr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=a;else{if(!Nr().toLowerCase().match(/android/))return Se(new A("operation-not-supported-in-this-environment"));l.apn=a}c&&(l.appDisplayName=c),o=function(t){var e=new vc;pc(e,t),t=[];var n=8*e.g;56>e.c?pc(e,hc,56-e.c):pc(e,hc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(fc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),l.sessionId=o;var h=vu(t.m,t.i,t.l,e,n,null,r,t.v,l,t.u,i,t.o);return t.la().then((function(){var e=t.h;return t.A.a.set(ic,s.w(),e)})).then((function(){var e=Rr("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Rr("cordova.plugins.browsertab.openUrl",u)))throw new A("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Rr("cordova.InAppBrowser.open",u)))throw new A("invalid-cordova-configuration");e=Nr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new me((function(t,e){a=function(){var e=Rr("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),c=function(){s||(s=Tn(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},l=function(){qr()&&c()},o.addEventListener("resume",c,!1),Nr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(t){return _c(i).then((function(){throw t}))}))})).na((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),a&&i.Ra(a),i.c=null}))},t.Ea=function(t){this.b.push(t),wc(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Uo("unknown",null,null,null,new A("no-auth-event")),t(e))}))},t.Ra=function(t){X(this.b,(function(e){return e==t}))};var Ec={name:"pendingRedirect",D:"session"};function Tc(t){return tc(t.b,Ec,t.a)}function Ac(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=_(this.o,this),this.b=new Vc,this.A=new Wc,this.g=new Ic(Mc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Sc(this.O,this.m,this.v,N,this.G)}function Sc(t,n,r,i,o){var s=e.SDK_VERSION||null;return gr()?new gc(t,n,r,s,i,o):new hu(t,n,r,s,i,o)}function Nc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().s((function(n){throw t.a==e&&t.reset(),n}))}function Rc(t){t.a.Wb()&&Nc(t).s((function(e){var n=new Uo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));xc(e)&&t.o(n)})),t.a.Sb()||qc(t.b)}function Oc(t,e){K(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ec,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Tc(t.g).then((function(){Nc(t).s((function(e){var n=new Uo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));xc(e)&&t.o(n)}))})):Rc(t)})).s((function(){Rc(t)}))}function kc(t,e){X(t.h,(function(t){return t==e}))}Ac.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Sc(this.O,this.m,this.v,null,this.G),this.i={}},Ac.prototype.o=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=E()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=E())),e=!0;break}}return qc(this.b),e};var Pc=new Vr(2e3,1e4),Dc=new Vr(3e4,6e4);function Cc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function xc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Lc(t,e,n,r,i){var o;return function(t){return t.b.set(Ec,"pending",t.a)}(t.g).then((function(){return t.a.Mb(e,n,r,i).s((function(e){if(xc(e))throw new A("operation-not-supported-in-this-environment");return o=e,Tc(t.g).then((function(){throw o}))})).then((function(){return t.a.Zb()?new me((function(){})):Tc(t.g).then((function(){return t.qa()})).then((function(){})).s((function(){}))}))}))}function jc(t,e,n,r,i){return t.a.Nb(r,(function(t){e.ma(n,null,t,i)}),Pc.get())}Ac.prototype.qa=function(){return this.b.qa()};var Fc={};function Mc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Uc(t,e,n,r){var i=Mc(e,n,r);return Fc[i]||(Fc[i]=new Ac(t,e,n,r)),Fc[i]}function Vc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function qc(t){t.g||(t.g=!0,Hc(t,!1,null,null))}function Bc(t){t.g&&!t.i&&Hc(t,!1,null,null)}function Gc(t,e){if(t.b=function(){return Ae(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Hc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Se(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Gc(t,n):Gc(t,{user:null}),t.f=[],t.c=[]}function Wc(){}function zc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Kc(t,e){this.a=e,Xr(this,"verificationId",t)}function $c(t,e,n,r){return new Lo(t).eb(e,n).then((function(t){return new Kc(t,r)}))}function Xc(t){var e=Gi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Jr(this,{token:t,expirationTime:Gr(1e3*e.exp),authTime:Gr(1e3*e.auth_time),issuedAtTime:Gr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Jc(t,e,n){var r=e&&e[Qc];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=dt(e),this.g=n,this.c=new io(null,r),this.b=[];var i=this;G(e[Yc]||[],(function(t){(t=ti(t))&&i.b.push(t)})),Xr(this,"auth",this.a),Xr(this,"session",this.c),Xr(this,"hints",this.b)}Vc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Vc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Hc(this,!0,null,t.a),Ae()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Hc(t,a,e,null)})).s((function(e){Hc(t,a,null,e)}))}(this,t,e):Se(new A("invalid-auth-event")):(Hc(this,!1,null,null),Ae())}else Se(new A("invalid-auth-event"))},Vc.prototype.qa=function(){var t=this;return new me((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=Tn(Dc.get()).then((function(){t.b||(t.g=!0,Hc(t,!0,null,e))}))}(t))}))},Wc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),Ae()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.ma(r,t,null,n)})).s((function(t){e.ma(r,null,t,n)}))}(t,e):Se(new A("invalid-auth-event"))}else Se(new A("invalid-auth-event"))},Kc.prototype.confirm=function(t){return t=jo(this.verificationId,t),this.a(t)};var Yc="mfaInfo",Qc="mfaPendingCredential";function Zc(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new Jc(t,e,n),Xr(this,"resolver",this.b)}function tl(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Zc(e,t.serverResponse,n,t.message)}catch(t){}return null}function el(){}function nl(t){Xr(this,"factorId",t.fa),this.a=t}function rl(t){if(nl.call(this,t),this.a.fa!=Lo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function il(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function ol(t,e){this.a=t,this.b=[],this.c=_(this.xc,this),an(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&G(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),sl(this,n)}function sl(t,e){t.b=e,Xr(t,"enrolledFactors",e)}function al(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ul(t,e){t.stop(),t.b=Tn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return qr()||!t?Ae():new me((function(n){e=function(){qr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){ul(t,!0)})).s((function(e){t.i(e)&&ul(t,!1)}))}function cl(t){this.c=t,this.b=this.a=null}function ll(t){return t.b&&1e3*t.b.c||0}function hl(t,e){var n=e.refreshToken;t.b=Bi(e[Js]||""),t.a=n}function fl(t,e){this.a=t||null,this.b=e||null,Jr(this,{lastSignInTime:Gr(e||null),creationTime:Gr(t||null)})}function pl(t,e,n,r,i,o){Jr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function dl(t,n,r){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var i=e.SDK_VERSION?Sr(e.SDK_VERSION):null;this.a=new $s(this.l,P(N),i),t.emulatorConfig&&na(this.a,t.emulatorConfig),this.b=new cl(this.a),Il(this,n[Js]),hl(this.b,n),Xr(this,"refreshToken",this.b.a),Al(this,r||{}),bn.call(this),this.P=!1,this.o&&kr()&&(this.i=Uc(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new al((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=ll(t.b)-E()-3e5;return 0<e?e:0}))}(this),this.$=_(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){na(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){gl(o,t.f)},this.aa=null,this.N=new ol(this,r),Xr(this,"multiFactor",this.N)}function vl(t,e){t.ba&&ln(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&an(e,"languageCodeChanged",t.Ba)}function yl(t,e){t.W&&ln(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&an(e,"emulatorConfigChanged",t.za)}function gl(t,n){t.X=n,ia(t.a,e.SDK_VERSION?Sr(e.SDK_VERSION,t.X):null)}function ml(t,e){t.aa&&ln(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&an(e,"frameworkChanged",t.Aa)}function bl(t){try{return e.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function wl(t){t.A||t.u.b||(t.u.start(),ln(t,"tokenChanged",t.$),an(t,"tokenChanged",t.$))}function _l(t){ln(t,"tokenChanged",t.$),t.u.stop()}function Il(t,e){t.ya=e,Xr(t,"_lat",e)}function El(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Re(e).then((function(){return t}))}function Tl(t){t.i&&!t.P&&(t.P=!0,Oc(t.i,t))}function Al(t,e){Jr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new fl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Sl(){}function Nl(t){return Ae().then((function(){if(t.A)throw new A("app-deleted")}))}function Rl(t){return W(t.providerData,(function(t){return t.providerId}))}function Ol(t,e){e&&(kl(t,e.providerId),t.providerData.push(e))}function kl(t,e){X(t.providerData,(function(t){return t.providerId==e}))}function Pl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Xr(t,e,n)}function Dl(t,e){t!=e&&(Jr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Xr(t,"metadata",function(t){return new fl(t.a,t.b)}(e.metadata)):Xr(t,"metadata",new fl),G(e.providerData,(function(e){Ol(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Xr(t,"refreshToken",t.b.a),sl(t.N,e.N.b))}function Cl(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return tu(t.a,Pa,{idToken:e}).then(_(t.Jc,t))}(t,e).then((function(){return n||Pl(t,"isAnonymous",!1),e}))}))}function xl(t,e){e[Js]&&t.ya!=e[Js]&&(hl(t.b,e),t.dispatchEvent(new il("tokenChanged")),Il(t,e[Js]),Pl(t,"refreshToken",t.b.a))}function Ll(t,e){return Cl(t).then((function(){if(K(Rl(t),e))return El(t).then((function(){throw new A("provider-already-linked")}))}))}function jl(t,e,n){return Yr({user:t,credential:Fo(e),additionalUserInfo:e=$i(e),operationType:n})}function Fl(t,e){return xl(t,e),t.reload().then((function(){return t}))}function Ml(t,n,r,i,o){if(!kr())return Se(new A("operation-not-supported-in-this-environment"));if(t.f&&!o)return Se(t.f);var s=Ki(r.providerId),a=Fr(t.uid+":::"),u=null;(!Cr()||mr())&&t.o&&r.isOAuthProvider&&(u=vu(t.o,t.l,t.m,n,r,null,a,e.SDK_VERSION||null,null,null,t.tenantId));var c=pr(u,s&&s.ua,s&&s.ta);return i=i().then((function(){if(Vl(t),!o)return t.I().then((function(){}))})).then((function(){return Cc(t.i,c,n,r,a,!!u,t.tenantId)})).then((function(){return new me((function(e,r){t.ma(n,null,new A("cancelled-popup-request"),t.h||null),t.g=e,t.O=r,t.h=a,t.c=jc(t.i,t,n,c,a)}))})).then((function(t){return c&&fr(c),t?Yr(t):null})).s((function(t){throw c&&fr(c),t})),ql(t,i,o)}function Ul(t,e,n,r,i){if(!kr())return Se(new A("operation-not-supported-in-this-environment"));if(t.f&&!i)return Se(t.f);var o=null,s=Fr(t.uid+":::");return r=r().then((function(){if(Vl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,El(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Hl,t.w(),e.a)),e})).then((function(){return Lc(t.i,e,n,s,t.tenantId)})).s((function(e){if(o=e,t.ha)return Wl(t.ha);throw o})).then((function(){if(o)throw o})),ql(t,r,i)}function Vl(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new A("internal-error");throw new A("auth-domain-config-required")}}function ql(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),Se(t.f)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new il("userInvalidated")),t.f=e),e}))}(t,e,n);return t.G.push(r),r.na((function(){$(t.G,r)})),r.s((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=tl(e.w(),bl(t),_(t.ic,t))),n||e}))}function Bl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Js]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new dl(e,n,t);return t.providerData&&G(t.providerData,(function(t){t&&Ol(r,Yr(t))})),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Gl(t){this.a=t,this.b=Yu()}Jc.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then((function(t){var n=dt(e.f);return delete n[Yc],delete n[Qc],yt(n,t),e.g(n)}))},T(Zc,A),el.prototype.rb=function(t,e,n){return e.type==oo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:xo(t.a)}),tu(e,Oa,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:xo(t.a)}),tu(e,ka,n)}))}(this,t,e)},T(nl,el),T(rl,nl),T(il,$e),(t=ol.prototype).xc=function(t){sl(this,function(t){var e=[];return G(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.gd))},t.Qb=function(){return this.a.I().then((function(t){return new io(t,null)}))},t.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then((function(n){return t.rb(r,n,e)})).then((function(t){return xl(n.a,t),n.a.reload()}))},t.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return tu(r,Za,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return sl(e,r),xl(e.a,t),e.a.reload().s((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(t){return t.w()}))}}},al.prototype.start=function(){this.a=this.c,ul(this,!0)},al.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},cl.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:ll(this)}},cl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Se(new A("user-token-expired")):t||!this.b||E()>ll(this)-3e4?this.a?function(t,e){return function(t,e){return new me((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?oa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(nu(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",Xn(e).toString(),t.g,t.v.get()):r(new A("internal-error"))}))}(t.c,e).then((function(e){return t.b=Bi(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ae(null):Ae({accessToken:this.b.toString(),refreshToken:this.a})},fl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(dl,bn),dl.prototype.wa=function(t){this.pa=t,ea(this.a,t)},dl.prototype.ka=function(){return this.pa},dl.prototype.Ga=function(){return Y(this.X)},dl.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Xr(dl.prototype,"providerId","firebase"),(t=dl.prototype).reload=function(){var t=this;return ql(this,Nl(this).then((function(){return Cl(t).then((function(){return El(t)})).then(Sl)})))},t.nc=function(t){return this.I(t).then((function(t){return new Xc(t)}))},t.I=function(t){var e=this;return ql(this,Nl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.ya&&(Il(e,t.accessToken),e.dispatchEvent(new il("tokenChanged"))),Pl(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Al(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,(function(t){return new pl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Ol(this,e[n]);Pl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new il("userReloaded",{gd:t}))},t.Kc=function(t){return Kr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return ql(this,t.c(this.a,this.uid).then((function(t){return xl(e,t),n=jl(e,t,"reauthenticate"),e.f=null,e.reload()})).then((function(){return n})),!0)},t.Bc=function(t){return Kr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return ql(this,Ll(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=jl(e,t,"link"),Fl(e,t)})).then((function(){return n})))},t.Cc=function(t,e){var n=this;return ql(this,Ll(this,"phone").then((function(){return $c(bl(n),t,e,_(n.pb,n))})))},t.Lc=function(t,e){var n=this;return ql(this,Ae().then((function(){return $c(bl(n),t,e,_(n.sb,n))})),!0)},t.Ab=function(t){var e=this;return ql(this,this.I().then((function(n){return e.a.Ab(n,t)})).then((function(t){return xl(e,t),e.reload()})))},t.dd=function(t){var e=this;return ql(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return xl(e,t),e.reload()})))},t.Bb=function(t){var e=this;return ql(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return xl(e,t),e.reload()})))},t.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Nl(this);var e=this;return ql(this,this.I().then((function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return xl(e,t),Pl(e,"displayName",t.displayName||null),Pl(e,"photoURL",t.photoUrl||null),G(e.providerData,(function(t){"password"===t.providerId&&(Xr(t,"displayName",e.displayName),Xr(t,"photoURL",e.photoURL))})),El(e)})).then(Sl))},t.bd=function(t){var e=this;return ql(this,Cl(this).then((function(n){return K(Rl(e),t)?function(t,e,n){return tu(t,Sa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return G(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),G(Rl(e),(function(t){n[t]||kl(e,t)})),n[Lo.PROVIDER_ID]||Xr(e,"phoneNumber",null),El(e)})):El(e).then((function(){throw new A("no-such-provider")}))})))},t.delete=function(){var t=this;return ql(this,this.I().then((function(e){return tu(t.a,Aa,{idToken:e})})).then((function(){t.dispatchEvent(new il("userDeleted"))}))).then((function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");vl(t,null),yl(t,null),ml(t,null),t.G=[],t.A=!0,_l(t),Xr(t,"refreshToken",null),t.i&&kc(t.i,t)}))},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?_(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?_(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Kb,this):null},t.Dc=function(t){var e=this;return Ml(this,"linkViaPopup",t,(function(){return Ll(e,t.providerId).then((function(){return El(e)}))}),!1)},t.Mc=function(t){return Ml(this,"reauthViaPopup",t,(function(){return Ae()}),!0)},t.Ec=function(t){var e=this;return Ul(this,"linkViaRedirect",t,(function(){return Ll(e,t.providerId)}),!1)},t.Nc=function(t){return Ul(this,"reauthViaRedirect",t,(function(){return Ae()}),!0)},t.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ql(this,this.I().then((function(n){return ma(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=jl(i,t,"link"),Fl(i,t)})).then((function(){return o})))},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ql(this,Ae().then((function(){return uo(ba(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=jl(i,t,"reauthenticate"),xl(i,t),i.f=null,i.reload()})).then((function(){return o})),!0)},t.tb=function(t){var e=this,n=null;return ql(this,this.I().then((function(e){return n=e,void 0===t||pt(t)?{}:Ui(new Oi(t))})).then((function(t){return e.a.tb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Db=function(t,e){var n=this,r=null;return ql(this,this.I().then((function(t){return r=t,void 0===e||pt(e)?{}:Ui(new Oi(e))})).then((function(e){return n.a.Db(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.ic=function(t){var e=null,n=this;return ql(this,t=uo(Ae(t),n.uid).then((function(t){return e=jl(n,t,"reauthenticate"),xl(n,t),n.f=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),G(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.N.w()),t};var Hl={name:"redirectUser",D:"session"};function Wl(t){return tc(t.b,Hl,t.a)}function zl(t){this.a=t,this.b=Yu(),this.c=null,this.f=function(t){var e=Xl("local"),n=Xl("session"),r=Xl("none");return function(t,e,n){var r=Zu(e,n),i=Qu(t,e.D);return t.get(e,n).then((function(o){var s=null;try{s=jr(u.localStorage.getItem(r))}catch(t){}if(s&&!o)return u.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get($l,t.a).then((function(t){return t?Xl(t):e}))}))}))})).then((function(e){return t.c=e,Kl(t,e.D)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Xl("local"),this.a,_(this.g,this))}function Kl(t,e){var n,r=[];for(n in Xu)Xu[n]!==e&&r.push(tc(t.b,Xl(Xu[n]),t.a));return r.push(tc(t.b,$l,t.a)),function(t){return new me((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ne(t[a],I(o,a),s);else e(i)}))}(r)}zl.prototype.g=function(){var t=this,e=Xl("local");Zl(this,(function(){return Ae().then((function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null})).then((function(n){if(n)return Kl(t,"local").then((function(){t.c=e}))}))}))};var $l={name:"persistence",D:"session"};function Xl(t){return{name:"authUser",D:t}}function Jl(t,e){return Zl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function Yl(t){return Zl(t,(function(){return tc(t.b,t.c,t.a)}))}function Ql(t,e,n){return Zl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Bl(t||{})}))}))}function Zl(t,e){return t.f=t.f.then(e,e),t.f}function th(t){if(this.m=!1,Xr(this,"settings",new zc),Xr(this,"app",t),!uh(this).options||!uh(this).options.apiKey)throw new A("invalid-api-key");t=e.SDK_VERSION?Sr(e.SDK_VERSION):null,this.a=new $s(uh(this).options&&uh(this).options.apiKey,P(N),t),this.R=[],this.u=[],this.P=[],this.ac=e.INTERNAL.createSubscribe(_(this.yc,this)),this.X=void 0,this.bc=e.INTERNAL.createSubscribe(_(this.zc,this)),sh(this,null),this.l=new zl(uh(this).options.apiKey+":"+uh(this).name),this.G=new Gl(uh(this).options.apiKey+":"+uh(this).name),this.$=fh(this,function(t){var e=uh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Hl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Bl(t||{})}))}(t.G,uh(t).options.authDomain).then((function(e){return(t.o=e)&&(e.ha=t.G),Wl(t.G)}));return fh(t,e)}(t).then((function(){return Ql(t.l,e,t.f)})).then((function(e){return e?(e.ha=t.G,t.o&&(t.o.ga||null)==(e.ga||null)?e:e.reload().then((function(){return Jl(t.l,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:Yl(t.l)}))):null})).then((function(e){sh(t,e||null)}));return fh(t,n)}(this)),this.i=fh(this,function(t){return t.$.then((function(){return oh(t)})).s((function(){})).then((function(){if(!t.m)return t.pa()})).s((function(){})).then((function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(Xl("local"),e.a,t.pa)}}))}(this)),this.ba=!1,this.pa=_(this.Yc,this),this.Ba=_(this.da,this),this.ya=_(this.kc,this),this.za=_(this.vc,this),this.Aa=_(this.wc,this),this.b=null,function(t){var e=uh(t).options.authDomain,n=uh(t).options.apiKey;e&&kr()&&(t.gb=t.$.then((function(){if(!t.m){if(t.b=Uc(e,n,uh(t).name,t.f),Oc(t.b,t),ch(t)&&Tl(ch(t)),t.o){Tl(t.o);var r=t.o;r.wa(t.ka()),vl(r,t),gl(r=t.o,t.N),ml(r,t),na((r=t.o).a,t.f),yl(r,t),t.o=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Fc,this),this.A=0,bn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function eh(t){$e.call(this,"languageCodeChanged"),this.h=t}function nh(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function rh(t){$e.call(this,"frameworkChanged"),this.f=t}function ih(t){return t.gb||Se(new A("auth-domain-config-required"))}function oh(t){if(!kr())return Se(new A("operation-not-supported-in-this-environment"));var e=ih(t).then((function(){return t.b.qa()})).then((function(t){return t?Yr(t):null}));return fh(t,e)}function sh(t,e){ch(t)&&(function(t,e){X(t.R,(function(t){return t==e}))}(ch(t),t.Ba),ln(ch(t),"tokenChanged",t.ya),ln(ch(t),"userDeleted",t.za),ln(ch(t),"userInvalidated",t.Aa),_l(ch(t))),e&&(e.R.push(t.Ba),an(e,"tokenChanged",t.ya),an(e,"userDeleted",t.za),an(e,"userInvalidated",t.Aa),0<t.A&&wl(e)),Xr(t,"currentUser",e),e&&(e.wa(t.ka()),vl(e,t),gl(e,t.N),ml(e,t),na(e.a,t.f),yl(e,t))}function ah(t,e){var n=null,r=null;return fh(t,e.then((function(e){return n=Fo(e),r=$i(e),function(t,e){var n={};return n.apiKey=uh(t).options.apiKey,n.authDomain=uh(t).options.authDomain,n.appName=uh(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then((function(){return function(t,e,n,r){var i=new dl(t,e);return n&&(i.ha=n),r&&gl(i,r),i.reload().then((function(){return i}))}(n,e,t.G,t.Ga())})).then((function(e){return ch(t)&&e.uid==ch(t).uid?(Dl(ch(t),e),t.da(e)):(sh(t,e),Tl(e),t.da(e))})).then((function(){hh(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=tl(e.w(),t,_(t.jc,t))),n||e})).then((function(){return Yr({user:ch(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function uh(t){return t.app}function ch(t){return t.currentUser}function lh(t){return ch(t)&&ch(t)._lat||null}function hh(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](lh(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](lh(t))}}function fh(t,e){return t.R.push(e),e.na((function(){$(t.R,e)})),e}function ph(){}function dh(){this.a={},this.b=1e12}zl.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in Xu)if(Xu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Or()&&"none"!==t)throw n}}(t),Zl(this,(function(){return t!=n.c.D?n.b.get(n.c,n.a).then((function(r){return e=r,Kl(n,t)})).then((function(){if(n.c=Xl(t),e)return n.b.set(n.c,e,n.a)})):Ae()}))},T(th,bn),T(eh,$e),T(nh,$e),T(rh,$e),(t=th.prototype).wb=function(t){return fh(this,t=this.l.wb(t))},t.wa=function(t){this.aa===t||this.m||(this.aa=t,ea(this.a,this.aa),this.dispatchEvent(new eh(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=u.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Br("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&yr().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)})),this.f={url:t},this.settings.hb=!0,na(this.a,this.f),this.dispatchEvent(new nh(this.f))}},t.Fc=function(t){this.N.push(t),ia(this.a,e.SDK_VERSION?Sr(e.SDK_VERSION,this.N):null),this.dispatchEvent(new rh(this.N))},t.Ga=function(){return Y(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:uh(this).options.apiKey,authDomain:uh(this).options.authDomain,appName:uh(this).name,currentUser:ch(this)&&ch(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?_(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return ah(i,ga(i.a,o))}))},t.Wc=function(t){if(!kr())return Se(new A("operation-not-supported-in-this-environment"));var n=this,r=Ki(t.providerId),i=Fr(),o=null;(!Cr()||mr())&&uh(this).options.authDomain&&t.isOAuthProvider&&(o=vu(uh(this).options.authDomain,uh(this).options.apiKey,uh(this).name,"signInViaPopup",t,null,i,e.SDK_VERSION||null,null,null,this.S(),this.f));var s=pr(o,r&&r.ua,r&&r.ta);return fh(this,r=ih(this).then((function(e){return Cc(e,s,"signInViaPopup",t,i,!!o,n.S())})).then((function(){return new me((function(t,e){n.ma("signInViaPopup",null,new A("cancelled-popup-request"),n.h),n.g=t,n.O=e,n.h=i,n.c=jc(n.b,n,"signInViaPopup",s,i)}))})).then((function(t){return s&&fr(s),t?Yr(t):null})).s((function(t){throw s&&fr(s),t})))},t.Xc=function(t){if(!kr())return Se(new A("operation-not-supported-in-this-environment"));var e=this,n=ih(this).then((function(){return function(t){return Zl(t,(function(){return t.b.set($l,t.c.D,t.a)}))}(e.l)})).then((function(){return Lc(e.b,"signInViaRedirect",t,void 0,e.S())}));return fh(this,n)},t.qa=function(){var t=this;return oh(this).then((function(e){return t.b&&Bc(t.b.b),e})).s((function(e){throw t.b&&Bc(t.b.b),e}))},t.cd=function(t){if(!t)return Se(new A("null-user"));if(this.W!=t.tenantId)return Se(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=uh(this).options.apiKey,n.authDomain=uh(this).options.authDomain,n.appName=uh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Js]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new dl(e||{apiKey:t.l,authDomain:t.o,appName:t.m},o),n&&(e.ha=n),r&&gl(e,r),Dl(e,t),e}(t,n,e.G,e.Ga());return fh(this,this.i.then((function(){if(uh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return ch(e)&&t.uid==ch(e).uid?(Dl(ch(e),t),e.da(t)):(sh(e,r),Tl(r),e.da(r))})).then((function(){hh(e)})))},t.zb=function(){var t=this;return fh(this,this.i.then((function(){return t.b&&Bc(t.b.b),ch(t)?(sh(t,null),Yl(t.l).then((function(){hh(t)}))):Ae()})))},t.Yc=function(){var t=this;return Ql(this.l,uh(this).options.authDomain).then((function(e){if(!t.m){var n;if(n=ch(t)&&e){n=ch(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Dl(ch(t),e),ch(t).I();(ch(t)||e)&&(sh(t,e),e&&(Tl(e),e.ha=t.G),t.b&&Oc(t.b,t),hh(t))}}))},t.da=function(t){return Jl(this.l,t)},t.kc=function(){hh(this),this.da(ch(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then((function(){return ah(e,Ae(t))}))},t.yc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ch(e))}))},t.zc=function(t){var e=this;!function(t,e){t.P.push(e),fh(t,t.i.then((function(){!t.m&&K(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(lh(t)))})))}(this,(function(){t.next(ch(e))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(ch(r)):"function"==typeof t.next&&t.next(ch(r))})),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(ch(r)):"function"==typeof t.next&&t.next(ch(r))})),this.bc(t,e,n)},t.mc=function(t){var e=this;return fh(this,this.i.then((function(){return ch(e)?ch(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Sc=function(t){var e=this;return this.i.then((function(){return ah(e,tu(e.a,$a,{token:t}))})).then((function(t){var n=t.user;return Pl(n,"isAnonymous",!1),e.da(n),t}))},t.Tc=function(t,e){var n=this;return this.i.then((function(){return ah(n,tu(n.a,Xa,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.i.then((function(){return ah(n,tu(n.a,Ea,{email:t,password:e}))}))},t.Za=function(t){var e=this;return this.i.then((function(){return ah(e,t.ja(e.a))}))},t.Rc=function(t){return Kr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var t=this;return this.i.then((function(){var e=ch(t);if(e&&e.isAnonymous){var n=Yr({providerId:null,isNewUser:!1});return Yr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ah(t,t.a.yb()).then((function(e){var n=e.user;return Pl(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return ch(this)&&ch(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&ch(this)&&wl(ch(this))},t.Oc=function(t){var e=this;G(this.u,(function(n){n==t&&e.A--})),0>this.A&&(this.A=0),0==this.A&&ch(this)&&_l(ch(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),fh(this,this.i.then((function(){e.m||K(e.u,t)&&t(lh(e))})))},t.removeAuthTokenListener=function(t){X(this.u,(function(e){return e==t}))},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Xl("local"),t.a,this.pa),this.b&&(kc(this.b,this),Bc(this.b.b)),Promise.resolve()},t.gc=function(t){return fh(this,function(t,e){return tu(t,Ta,{identifier:e,continueUri:Pr()?ur():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Ac=function(t){return!!Po(t)},t.vb=function(t,e){var n=this;return fh(this,Ae().then((function(){var t=new Oi(e);if(!t.c)throw new A("argument-error",Di+" must be true when sending sign in link to email");return Ui(t)})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.hd=function(t){return this.Qa(t).then((function(t){return t.data.email}))},t.mb=function(t,e){return fh(this,this.a.mb(t,e).then((function(){})))},t.Qa=function(t){return fh(this,this.a.Qa(t).then((function(t){return new si(t)})))},t.ib=function(t){return fh(this,this.a.ib(t).then((function(){})))},t.ub=function(t,e){var n=this;return fh(this,Ae().then((function(){return void 0===e||pt(e)?{}:Ui(new Oi(e))})).then((function(e){return n.a.ub(t,e)})).then((function(){})))},t.Vc=function(t,e){return fh(this,$c(this,t,e,_(this.Za,this)))},t.Uc=function(t,e){var n=this;return fh(this,Ae().then((function(){var r=e||ur(),i=ko(t,r);if(!(r=Po(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new A("tenant-id-mismatch");return n.Za(i)})))},ph.prototype.render=function(){},ph.prototype.reset=function(){},ph.prototype.getResponse=function(){},ph.prototype.execute=function(){};var vh=null;function yh(t,e){return(e=gh(e))&&t.a[e]||null}function gh(t){return(t=void 0===t?1e12:t)?t.toString():null}function mh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=se(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():an(this.f,"click",this.i)}function bh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function wh(){}function _h(){}dh.prototype.render=function(t,e){return this.a[this.b.toString()]=new mh(t,e),this.b++},dh.prototype.reset=function(t){var e=yh(this,t);t=gh(t),e&&t&&(e.delete(),delete this.a[t])},dh.prototype.getResponse=function(t){return(t=yh(this,t))?t.getResponse():null},dh.prototype.execute=function(t){(t=yh(this,t))&&t.execute()},mh.prototype.getResponse=function(){return bh(this),this.b},mh.prototype.execute=function(){bh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},mh.prototype.delete=function(){bh(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},Xr(wh,"FACTOR_ID","phone"),_h.prototype.g=function(){return vh||(vh=new dh),Ae(vh)},_h.prototype.c=function(){};var Ih=null;function Eh(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Th=new mt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ah=new Vr(3e4,6e4);Eh.prototype.g=function(t){var e=this;return new me((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),Ah.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete u[e.a]},Ae(qs(At(Th,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Eh.prototype.c=function(){this.b--};var Sh=null;function Nh(t,e,n,r,i,o,s){if(Xr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s?(Ih||(Ih=new _h),s=Ih):(Sh||(Sh=new Eh),s=Sh),this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[kh])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ph],!u.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!se(e)||!this.i&&se(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new $s(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var c=this.a[Rh];this.a[Rh]=function(t){if(Dh(a,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Rr(c,u);"function"==typeof e&&e(t)}};var l=this.a[Oh];this.a[Oh]=function(){if(Dh(a,null),"function"==typeof l)l();else if("string"==typeof l){var t=Rr(l,u);"function"==typeof t&&t()}}}var Rh="callback",Oh="expired-callback",kh="sitekey",Ph="size";function Dh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Ch(t,e){return t.h.push(e),e.na((function(){$(t.h,e)})),e}function xh(t){if(t.A)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Lh(t,n,r){var i=!1;try{this.b=r||e.app()}catch(t){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");r=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}s=e.SDK_VERSION?Sr(e.SDK_VERSION,s):null,Nh.call(this,r,t,n,(function(){try{var t=o.b.auth().ka()}catch(e){t=null}return t}),s,P(N),i)}function jh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Fh.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=Fh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(t=Nh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Ch(this,Ae().then((function(){if(Pr()&&!br())return yr();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.v.g(t.u())})).then((function(e){return t.g=e,tu(t.o,Fa,{})})).then((function(e){t.a[kh]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},t.render=function(){xh(this);var t=this;return Ch(this,this.Ia().then((function(){if(null===t.c){var e=t.m;if(!t.i){var n=se(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!oe&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Bt(s.name),'"'),s.type){o.push(' type="',Bt(s.type),'"');var a={};yt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=he(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ae(o,s)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!p(o)||v(o)&&0<o.nodeType?r(o):G(fe(o)?Y(o):o,r)}}(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){xh(this);var t=this;return Ch(this,this.render().then((function(e){return new me((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){X(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){xh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){xh(this),this.A=!0,this.v.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=se(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},T(Lh,Nh);var Fh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Mh(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Uh(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Vh(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function qh(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Bh(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Gh(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ja||!n)}}}function Hh(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Wh(t){return v(t)&&"string"==typeof t.uid}function zh(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Kh(t,e){for(var n in e){var r=e[n].name;t[r]=Jh(r,t[n],e[n].j)}}function $h(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:I((function(t){return this[t]}),n),set:I((function(t,e,n,r){jh(t,[n],[r],!0),this[e]=r}),r,n,e[n].jb),enumerable:!0})}}function Xh(t,e,n,r){t[e]=Jh(e,n,r)}function Jh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return jh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Kh(th.prototype,{ib:{name:"applyActionCode",j:[Mh("code")]},Qa:{name:"checkActionCode",j:[Mh("code")]},mb:{name:"confirmPasswordReset",j:[Mh("code"),Mh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Mh("email"),Mh("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Mh("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Mh("emailLink")]},Gc:{name:"onAuthStateChanged",j:[zh(Vh(),qh(),"nextOrObserver"),qh("opt_error",!0),qh("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[zh(Vh(),qh(),"nextOrObserver"),qh("opt_error",!0),qh("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Mh("email"),zh(Vh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Mh("email"),Vh("actionCodeSettings")]},wb:{name:"setPersistence",j:[Mh("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Gh()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Gh()]},Sc:{name:"signInWithCustomToken",j:[Mh("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Mh("email"),Mh("password")]},Uc:{name:"signInWithEmailLink",j:[Mh("email"),Mh("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Mh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[zh({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof dl)}},Bh(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Mh(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Mh("url")]},hd:{name:"verifyPasswordResetCode",j:[Mh("code")]}}),$h(th.prototype,{lc:{name:"languageCode",jb:zh(Mh(),Bh(),"languageCode")},ti:{name:"tenantId",jb:zh(Mh(),Bh(),"tenantId")}}),th.Persistence=Xu,th.Persistence.LOCAL="local",th.Persistence.SESSION="session",th.Persistence.NONE="none",Kh(dl.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Uh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Uh("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Gh()]},pb:{name:"linkWithCredential",j:[Gh()]},Cc:{name:"linkWithPhoneNumber",j:[Mh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Gh()]},sb:{name:"reauthenticateWithCredential",j:[Gh()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Mh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[zh(Vh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Mh(null,!0)]},bd:{name:"unlink",j:[Mh("provider")]},Ab:{name:"updateEmail",j:[Mh("email")]},Bb:{name:"updatePassword",j:[Mh("password")]},dd:{name:"updatePhoneNumber",j:[Gh("phone")]},Cb:{name:"updateProfile",j:[Vh("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Mh("email"),zh(Vh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]}}),Kh(dh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Kh(ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Kh(me.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),$h(zc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Uh("appVerificationDisabledForTesting")}}),Kh(Kc.prototype,{confirm:{name:"confirm",j:[Mh("verificationCode")]}}),Xh(ao,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[vo,Ro,Co,ho],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[zh(Mh(),Vh(),"json")]),Xh(Oo,"credential",(function(t,e){return new No(t,e)}),[Mh("email"),Mh("password")]),Kh(No.prototype,{w:{name:"toJSON",j:[Mh(null,!0)]}}),Kh(bo.prototype,{Ca:{name:"addScope",j:[Mh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Xh(bo,"credential",wo,[zh(Mh(),Vh(),"token")]),Xh(Oo,"credentialWithLink",ko,[Mh("email"),Mh("emailLink")]),Kh(_o.prototype,{Ca:{name:"addScope",j:[Mh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Xh(_o,"credential",Io,[zh(Mh(),Vh(),"token")]),Kh(Eo.prototype,{Ca:{name:"addScope",j:[Mh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Xh(Eo,"credential",To,[zh(Mh(),zh(Vh(),Bh()),"idToken"),zh(Mh(),Bh(),"accessToken",!0)]),Kh(Ao.prototype,{Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Xh(Ao,"credential",So,[zh(Mh(),Vh(),"token"),Mh("secret",!0)]),Kh(mo.prototype,{Ca:{name:"addScope",j:[Mh("scope")]},credential:{name:"credential",j:[zh(Mh(),zh(Vh(),Bh()),"optionsOrIdToken"),zh(Mh(),Bh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Kh(fo.prototype,{w:{name:"toJSON",j:[Mh(null,!0)]}}),Kh(co.prototype,{w:{name:"toJSON",j:[Mh(null,!0)]}}),Xh(Lo,"credential",jo,[Mh("verificationId"),Mh("verificationCode")]),Kh(Lo.prototype,{eb:{name:"verifyPhoneNumber",j:[zh(Mh(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Hh(t.session,oo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Hh(t.session,so)&&Wh(t.multiFactorHint):t.session&&t.multiFactorUid?Hh(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Kh(Do.prototype,{w:{name:"toJSON",j:[Mh(null,!0)]}}),Kh(A.prototype,{toJSON:{name:"toJSON",j:[Mh(null,!0)]}}),Kh(Wo.prototype,{toJSON:{name:"toJSON",j:[Mh(null,!0)]}}),Kh(Ho.prototype,{toJSON:{name:"toJSON",j:[Mh(null,!0)]}}),Kh(Zc.prototype,{toJSON:{name:"toJSON",j:[Mh(null,!0)]}}),Kh(Jc.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),Kh(ol.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Mh("displayName",!0)]},ad:{name:"unenroll",j:[zh({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Wh},Mh(),"multiFactorInfoIdentifier")]}}),Kh(Lh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Xh(wi,"parseLink",Ri,[Mh("link")]),Xh(wh,"assertion",(function(t){return new rl(t)}),[Gh("phone")]),function(){if(void 0===e||!e.INTERNAL||!e.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ai,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:th,AuthCredential:ao,Error:A};Xh(t,"EmailAuthProvider",Oo,[]),Xh(t,"FacebookAuthProvider",bo,[]),Xh(t,"GithubAuthProvider",_o,[]),Xh(t,"GoogleAuthProvider",Eo,[]),Xh(t,"TwitterAuthProvider",Ao,[]),Xh(t,"OAuthProvider",mo,[Mh("providerId")]),Xh(t,"SAMLAuthProvider",go,[Mh("providerId")]),Xh(t,"PhoneAuthProvider",Lo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof th)}}]),Xh(t,"RecaptchaVerifier",Lh,[zh(Mh(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Vh("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof e.app.App)}}]),Xh(t,"ActionCodeURL",wi,[]),Xh(t,"PhoneMultiFactorGenerator",wh,[]),e.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new th(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),e.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.mc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),e.registerVersion("@firebase/auth","0.15.0"),e.INTERNAL.extendNamespace({User:dl})}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},9730:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(655),i=n(1313),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:s,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var a=this.getOrInitializeService(o);if(!a){if(i)return null;throw Error("Service "+this.name+" is not available")}return a}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(t){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=r.__read(o.value,2),u=a[0],c=a[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService(l);c.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(r.__spread(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=u,e.Provider=a},3023:(t,e,n)=>{"use strict";var r=n(655),i=n(5752),o=n(4594),s=n(1313),a=n(3705),u=n(9730),c=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(i),l={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},h=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return r.__extends(e,t),e}(Error),f=new o.Logger("@firebase/firestore");function p(){return f.logLevel}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=o.LogLevel.DEBUG){var i=e.map(g);f.debug.apply(f,r.__spreadArrays(["Firestore (7.24.0): "+t],i))}}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=o.LogLevel.ERROR){var i=e.map(g);f.error.apply(f,r.__spreadArrays(["Firestore (7.24.0): "+t],i))}}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=o.LogLevel.WARN){var i=e.map(g);f.warn.apply(f,r.__spreadArrays(["Firestore (7.24.0): "+t],i))}}function g(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function m(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.24.0) INTERNAL ASSERTION FAILED: "+t;throw v(e),new Error(e)}function b(t,e){t||m()}function w(t,e){return t}function _(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function I(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function E(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var T=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&m(),void 0===n?n=t.length-e:n>t.length-e&&m(),this.segments=t,this.offset=e,this.t=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.i(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.o(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.u=function(t){return t=void 0===t?1:t,this.o(this.segments,this.offset+t,this.length-t)},t.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},t.prototype.l=function(){return this.segments[this.offset]},t.prototype._=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.m=function(){return 0===this.length},t.prototype.T=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.I=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},t.i=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.prototype.R=function(){return this.A().join("/")},e.prototype.toString=function(){return this.R()},e.g=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new h(l.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.P=function(){return new e([])},e}(T),S=/^[_a-zA-Z][_a-zA-Z0-9]*$/,N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.V=function(t){return S.test(t)},e.prototype.R=function(){return this.A().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.V(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.R()},e.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},e.v=function(){return new e(["__name__"])},e.S=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new h(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new h(l.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new h(l.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new h(l.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.P=function(){return new e([])},e}(T),R=function(){function t(t){this.path=t}return t.D=function(e){return new t(A.g(e))},t.C=function(e){return new t(A.g(e).u(5))},t.prototype.N=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===A.i(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.i=function(t,e){return A.i(t.path,e.path)},t.F=function(t){return t.length%2==0},t.$=function(e){return new t(new A(e.slice()))},t}();function O(t,e){if(0!==e.length)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+K(e.length,"argument")+".")}function k(t,e,n){if(e.length!==n)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires "+K(n,"argument")+", but was called with "+K(e.length,"argument")+".")}function P(t,e,n){if(e.length<n)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires at least "+K(n,"argument")+", but was called with "+K(e.length,"argument")+".")}function D(t,e,n,r){if(e.length<n||e.length>r)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+K(e.length,"argument")+".")}function C(t,e,n,r){U(t,e,z(n)+" argument",r)}function x(t,e,n,r){void 0!==r&&C(t,e,n,r)}function L(t,e,n,r){U(t,e,n+" option",r)}function j(t,e,n,r){void 0!==r&&L(t,e,n,r)}function F(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(q(u))}var c=q(r);throw new h(l.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function M(t,e,n,r){if(!e.some((function(t){return t===r})))throw new h(l.INVALID_ARGUMENT,"Invalid value "+q(r)+" provided to function "+t+"() for its "+z(n)+" argument. Acceptable values: "+e.join(", "));return r}function U(t,e,n,r){if(!("object"===e?V(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=q(r);throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function V(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function q(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":m()}function B(t,e,n){if(void 0===n)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+z(e)+" argument, but it was undefined.")}function G(t,e,n){I(e,(function(e,r){if(n.indexOf(e)<0)throw new h(l.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function H(t,e,n,r){var i=q(r);return new h(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+z(n)+" argument to be a "+e+", but it was: "+i)}function W(t,e,n){if(n<=0)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+z(e)+" argument to be a positive number, but it was: "+n+".")}function z(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function K(t,e){return t+" "+e+(1===t?"":"s")}function $(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var X=function(){function t(){}return t.k=function(){for(var t=62*Math.floor(256/62),e="";e.length<20;)for(var n=$(40),r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62));return e},t}();function J(t,e){return t<e?-1:t>e?1:0}function Y(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Q(t){return t+"\0"}var Z=function(){function t(t){this.M=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.M,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.M)},t.prototype.O=function(){return 2*this.M.length},t.prototype.L=function(t){return J(this.M,t.M)},t.prototype.isEqual=function(t){return this.M===t.M},t}();Z.B=new Z("");var tt=function(){function t(t){this.q=t}return t.fromBase64String=function(e){try{return new t(Z.fromBase64String(e))}catch(e){throw new h(l.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Z.fromUint8Array(e))},t.prototype.toBase64=function(){return this.q.toBase64()},t.prototype.toUint8Array=function(){return this.q.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.q.isEqual(t.q)},t}();function et(){if("undefined"==typeof Uint8Array)throw new h(l.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function nt(){if("undefined"==typeof atob)throw new h(l.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.fromBase64String=function(t){k("Blob.fromBase64String",arguments,1),C("Blob.fromBase64String","string",1,t),nt();try{return new e(Z.fromBase64String(t))}catch(t){throw new h(l.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(k("Blob.fromUint8Array",arguments,1),et(),!(t instanceof Uint8Array))throw H("Blob.fromUint8Array","Uint8Array",1,t);return new e(Z.fromUint8Array(t))},e.prototype.toBase64=function(){return k("Blob.toBase64",arguments,0),nt(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return k("Blob.toUint8Array",arguments,0),et(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(tt),it=function(t,e,n,r,i,o){this.U=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.W=o},ot=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"j",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.L=function(t){return J(this.projectId,t.projectId)||J(this.database,t.database)},t}(),st=function(){function t(t,e){this.K=t,this.G=e,this.H={}}return t.prototype.get=function(t){var e=this.K(t),n=this.H[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.G(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.K(t),r=this.H[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.G(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.H[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.K(t),n=this.H[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.G(n[r][0],t))return 1===n.length?delete this.H[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){I(this.H,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.m=function(){return E(this.H)},t}(),at=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new h(l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new h(l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new h(l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new h(l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.Y=function(t){return this.seconds===t.seconds?J(this.nanoseconds,t.nanoseconds):J(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ut=function(){function t(t){this.timestamp=t}return t.J=function(e){return new t(e)},t.min=function(){return new t(new at(0,0))},t.prototype.L=function(t){return this.timestamp.Y(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.X=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.Z=function(){return this.timestamp},t}();function ct(t){return null==t}function lt(t){return 0===t&&1/t==-1/0}function ht(t){return"number"==typeof t&&Number.isInteger(t)&&!lt(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ft=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.tt=null};function pt(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ft(t,e,n,r,i,o,s)}function dt(t){var e=w(t);if(null===e.tt){var n=e.path.R();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.R()+t.op.toString()+oe(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.R()+e.dir;var e})).join(","),ct(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=lr(e.startAt)),e.endAt&&(n+="|ub:",n+=lr(e.endAt)),e.tt=n}return e.tt}function vt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!vr(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ee(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fr(t.startAt,e.startAt)&&fr(t.endAt,e.endAt)}function yt(t){return R.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}var gt,mt,bt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ut.min()),void 0===o&&(o=ut.min()),void 0===s&&(s=Z.B),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),wt=function(t){this.count=t};function _t(t){switch(t){case l.OK:return m();case l.CANCELLED:case l.UNKNOWN:case l.DEADLINE_EXCEEDED:case l.RESOURCE_EXHAUSTED:case l.INTERNAL:case l.UNAVAILABLE:case l.UNAUTHENTICATED:return!1;case l.INVALID_ARGUMENT:case l.NOT_FOUND:case l.ALREADY_EXISTS:case l.PERMISSION_DENIED:case l.FAILED_PRECONDITION:case l.ABORTED:case l.OUT_OF_RANGE:case l.UNIMPLEMENTED:case l.DATA_LOSS:return!0;default:return m()}}function It(t){if(void 0===t)return v("GRPC error has no .code"),l.UNKNOWN;switch(t){case gt.OK:return l.OK;case gt.CANCELLED:return l.CANCELLED;case gt.UNKNOWN:return l.UNKNOWN;case gt.DEADLINE_EXCEEDED:return l.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return l.RESOURCE_EXHAUSTED;case gt.INTERNAL:return l.INTERNAL;case gt.UNAVAILABLE:return l.UNAVAILABLE;case gt.UNAUTHENTICATED:return l.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return l.INVALID_ARGUMENT;case gt.NOT_FOUND:return l.NOT_FOUND;case gt.ALREADY_EXISTS:return l.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return l.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return l.FAILED_PRECONDITION;case gt.ABORTED:return l.ABORTED;case gt.OUT_OF_RANGE:return l.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return l.UNIMPLEMENTED;case gt.DATA_LOSS:return l.DATA_LOSS;default:return m()}}(mt=gt||(gt={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";var Et=function(){function t(t,e){this.i=t,this.root=e||At.EMPTY}return t.prototype.ot=function(e,n){return new t(this.i,this.root.ot(e,n,this.i).copy(null,null,At.at,null,null))},t.prototype.remove=function(e){return new t(this.i,this.root.remove(e,this.i).copy(null,null,At.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.m();){var n=this.i(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.m();){var r=this.i(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.m=function(){return this.root.m()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(){return this.root.ut()},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.forEach=function(t){this.ht((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ht((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new Tt(this.root,null,this.i,!1)},t.prototype.ft=function(t){return new Tt(this.root,t,this.i,!1)},t.prototype.dt=function(){return new Tt(this.root,null,this.i,!0)},t.prototype.wt=function(t){return new Tt(this.root,t,this.i,!0)},t}(),Tt=function(){function t(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.m();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}return t.prototype.It=function(){var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.m();)this.Et.push(t),t=t.right;else for(t=t.right;!t.m();)this.Et.push(t),t=t.left;return e},t.prototype.At=function(){return this.Et.length>0},t.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},t}(),At=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.m=function(){return!1},t.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.m()?this:this.left.min()},t.prototype.ct=function(){return this.min().key},t.prototype.ut=function(){return this.right.m()?this.key:this.right.ut()},t.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).gt()},t.prototype.Pt=function(){if(this.left.m())return t.EMPTY;var e=this;return e.left.yt()||e.left.left.yt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.Pt(),null)).gt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.m()||i.left.yt()||i.left.left.yt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.yt()&&(i=i.bt()),i.right.m()||i.right.yt()||i.right.left.yt()||(i=i.vt()),0===n(e,i.key)){if(i.right.m())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.gt()},t.prototype.yt=function(){return this.color},t.prototype.gt=function(){var t=this;return t.right.yt()&&!t.left.yt()&&(t=t.St()),t.left.yt()&&t.left.left.yt()&&(t=t.bt()),t.left.yt()&&t.right.yt()&&(t=t.Dt()),t},t.prototype.Vt=function(){var t=this.Dt();return t.right.left.yt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.yt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.yt()&&this.left.yt())throw m();if(this.right.yt())throw m();var t=this.left.Nt();if(t!==this.right.Nt())throw m();return t+(this.yt()?0:1)},t}();At.EMPTY=null,At.RED=!0,At.at=!1,At.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw m()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ot=function(t,e,n){return new At(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.m=function(){return!0},t.prototype.ht=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ct=function(){return null},t.prototype.ut=function(){return null},t.prototype.yt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());var St=function(){function t(t){this.i=t,this.data=new Et(this.i)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ct()},t.prototype.last=function(){return this.data.ut()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ht((function(e,n){return t(e),!1}))},t.prototype.Ft=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(this.i(r.key,t[1])>=0)return;e(r.key)}},t.prototype.xt=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.$t=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new Nt(this.data._t())},t.prototype.ft=function(t){return new Nt(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.m=function(){return this.data.m()},t.prototype.kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.At();){var i=n.It().key,o=r.It().key;if(0!==this.i(i,o))return!1}return!0},t.prototype.A=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.i);return n.data=e,n},t}(),Nt=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),Rt=new Et(R.i);function Ot(){return Rt}function kt(){return Ot()}var Pt=new Et(R.i);function Dt(){return Pt}var Ct=new Et(R.i),xt=new St(R.i);function Lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=xt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var jt=new St(J);function Ft(){return jt}var Mt=function(){function t(t){this.i=t?function(e,n){return t(e,n)||R.i(e.key,n.key)}:function(t,e){return R.i(t.key,e.key)},this.Ot=Dt(),this.Lt=new Et(this.i)}return t.Bt=function(e){return new t(e.i)},t.prototype.has=function(t){return null!=this.Ot.get(t)},t.prototype.get=function(t){return this.Ot.get(t)},t.prototype.first=function(){return this.Lt.ct()},t.prototype.last=function(){return this.Lt.ut()},t.prototype.m=function(){return this.Lt.m()},t.prototype.indexOf=function(t){var e=this.Ot.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ht((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ot.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ot.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),r=e.Lt._t();n.At();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.i=this.i,r.Ot=e,r.Lt=n,r},t}(),Ut=function(){function t(){this.qt=new Et(R.i)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):m():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ht((function(e,n){t.push(n)})),t},t}(),Vt=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Qt=n,this.docChanges=r,this.Wt=i,this.fromCache=o,this.jt=s,this.Kt=a}return t.Gt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Mt.Bt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Wt.m()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.jt===t.jt&&this.Wt.isEqual(t.Wt)&&Xn(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Qt.isEqual(t.Qt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),qt=function(){function t(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Yt=r,this.Jt=i}return t.Xt=function(e,n){var r=new Map;return r.set(e,Bt.Zt(e,n)),new t(ut.min(),r,Ft(),Ot(),Lt())},t}(),Bt=function(){function t(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}return t.Zt=function(e,n){return new t(Z.B,n,Lt(),Lt(),Lt())},t}(),Gt=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},Ht=function(t,e){this.targetId=t,this.oe=e},Wt=function(t,e,n,r){void 0===n&&(n=Z.B),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},zt=function(){function t(){this.ae=0,this.ce=Xt(),this.ue=Z.B,this.he=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.O()>0&&(this.le=!0,this.ue=t)},t.prototype.we=function(){var t=Lt(),e=Lt(),n=Lt();return this.ce.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:m()}})),new Bt(this.ue,this.he,t,e,n)},t.prototype.me=function(){this.le=!1,this.ce=Xt()},t.prototype.Te=function(t,e){this.le=!0,this.ce=this.ce.ot(t,e)},t.prototype.Ee=function(t){this.le=!0,this.ce=this.ce.remove(t)},t.prototype.Ie=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.he=!0},t}(),Kt=function(){function t(t){this.ge=t,this.Pe=new Map,this.ye=Ot(),this.Ve=$t(),this.pe=new St(J)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof Cn?this.ve(r,t.re):t.re instanceof xn&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Se(s,t.key,t.re)}},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var r=e.Ne(n);switch(t.state){case 0:e.Fe(n)&&r.de(t.resumeToken);break;case 1:r.Ae(),r._e||r.me(),r.de(t.resumeToken);break;case 2:r.Ae(),r._e||e.removeTarget(n);break;case 3:e.Fe(n)&&(r.Re(),r.de(t.resumeToken));break;case 4:e.Fe(n)&&(e.xe(n),r.de(t.resumeToken));break;default:m()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Pe.forEach((function(t,r){n.Fe(r)&&e(r)}))},t.prototype.$e=function(t){var e=t.targetId,n=t.oe.count,r=this.ke(e);if(r){var i=r.target;if(yt(i))if(0===n){var o=new R(i.path);this.Se(e,o,new xn(o,ut.min()))}else b(1===n);else this.Me(e)!==n&&(this.xe(e),this.pe=this.pe.add(e))}},t.prototype.Oe=function(t){var e=this,n=new Map;this.Pe.forEach((function(r,i){var o=e.ke(i);if(o){if(r.te&&yt(o.target)){var s=new R(o.target.path);null!==e.ye.get(s)||e.Le(i,s)||e.Se(i,s,new xn(s,t))}r.fe&&(n.set(i,r.we()),r.me())}}));var r=Lt();this.Ve.forEach((function(t,n){var i=!0;n.xt((function(t){var n=e.ke(t);return!n||2===n.et||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new qt(t,n,this.pe,this.ye,r);return this.ye=Ot(),this.Ve=$t(),this.pe=new St(J),i},t.prototype.ve=function(t,e){if(this.Fe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.ye=this.ye.ot(e.key,e),this.Ve=this.Ve.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.Fe(t)){var r=this.Ne(t);this.Le(t,e)?r.Te(e,1):r.Ee(e),this.Ve=this.Ve.ot(e,this.Be(e).delete(t)),n&&(this.ye=this.ye.ot(e,n))}},t.prototype.removeTarget=function(t){this.Pe.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.ge.qe(t).size+e.ee.size-e.se.size},t.prototype.Ie=function(t){this.Ne(t).Ie()},t.prototype.Ne=function(t){var e=this.Pe.get(t);return e||(e=new zt,this.Pe.set(t,e)),e},t.prototype.Be=function(t){var e=this.Ve.get(t);return e||(e=new St(J),this.Ve=this.Ve.ot(t,e)),e},t.prototype.Fe=function(t){var e=null!==this.ke(t);return e||d("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ke=function(t){var e=this.Pe.get(t);return e&&e._e?null:this.ge.Ue(t)},t.prototype.xe=function(t){var e=this;this.Pe.set(t,new zt),this.ge.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.ge.qe(t).has(e)},t}();function $t(){return new Et(R.i)}function Xt(){return new Et(R.i)}function Jt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yt(t){var e=t.mapValue.fields.__previous_value__;return Jt(e)?Yt(e):e}function Qt(t){var e=ae(t.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}var Zt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function te(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jt(t)?4:10:m()}function ee(t,e){var n=te(t);if(n!==te(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qt(t).isEqual(Qt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ae(t.timestampValue),r=ae(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ce(t.bytesValue).isEqual(ce(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ue(t.geoPointValue.latitude)===ue(e.geoPointValue.latitude)&&ue(t.geoPointValue.longitude)===ue(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ue(t.integerValue)===ue(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ue(t.doubleValue),r=ue(e.doubleValue);return n===r?lt(n)===lt(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Y(t.arrayValue.values||[],e.arrayValue.values||[],ee);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(_(n)!==_(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ee(n[i],r[i])))return!1;return!0}(t,e);default:return m()}}function ne(t,e){return void 0!==(t.values||[]).find((function(t){return ee(t,e)}))}function re(t,e){var n=te(t),r=te(e);if(n!==r)return J(n,r);switch(n){case 0:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ue(t.integerValue||t.doubleValue),r=ue(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ie(t.timestampValue,e.timestampValue);case 4:return ie(Qt(t),Qt(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ce(t),r=ce(e);return n.L(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=J(n[i],r[i]);if(0!==o)return o}return J(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=J(ue(t.latitude),ue(e.latitude));return 0!==n?n:J(ue(t.longitude),ue(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=re(n[i],r[i]);if(o)return o}return J(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=J(r[s],o[s]);if(0!==a)return a;var u=re(n[r[s]],i[o[s]]);if(0!==u)return u}return J(r.length,o.length)}(t.mapValue,e.mapValue);default:throw m()}}function ie(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return J(t,e);var n=ae(t),r=ae(e),i=J(n.seconds,r.seconds);return 0!==i?i:J(n.nanos,r.nanos)}function oe(t){return se(t)}function se(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ae(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ce(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,R.C(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=se(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+se(t.fields[o])}return e+"}"}(t.mapValue):m();var e,n}function ae(t){if(b(!!t),"string"==typeof t){var e=0,n=Zt.exec(t);if(b(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ue(t.seconds),nanos:ue(t.nanos)}}function ue(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ce(t){return"string"==typeof t?Z.fromBase64String(t):Z.fromUint8Array(t)}function le(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.R()}}function he(t){return!!t&&"integerValue"in t}function fe(t){return!!t&&"arrayValue"in t}function pe(t){return!!t&&"nullValue"in t}function de(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ve(t){return!!t&&"mapValue"in t}var ye={asc:"ASCENDING",desc:"DESCENDING"},ge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},me=function(t,e){this.U=t,this.Qe=e};function be(t){return{integerValue:""+t}}function we(t,e){if(t.Qe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lt(e)?"-0":e}}function _e(t,e){return ht(e)?be(e):we(t,e)}function Ie(t,e){return t.Qe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ee(t,e){return t.Qe?e.toBase64():e.toUint8Array()}function Te(t,e){return Ie(t,e.Z())}function Ae(t){return b(!!t),ut.J(function(t){var e=ae(t);return new at(e.seconds,e.nanos)}(t))}function Se(t,e){return function(t){return new A(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).R()}function Ne(t){var e=A.g(t);return b(Je(e)),e}function Re(t,e){return Se(t.U,e.path)}function Oe(t,e){var n=Ne(e);return b(n.get(1)===t.U.projectId),b(!n.get(3)&&!t.U.database||n.get(3)===t.U.database),new R(Ce(n))}function ke(t,e){return Se(t.U,e)}function Pe(t){var e=Ne(t);return 4===e.length?A.P():Ce(e)}function De(t){return new A(["projects",t.U.projectId,"databases",t.U.database]).R()}function Ce(t){return b(t.length>4&&"documents"===t.get(4)),t.u(5)}function xe(t,e,n){return{name:Re(t,e),fields:n.proto.mapValue.fields}}function Le(t,e){var n;if(e instanceof _n)n={update:xe(t,e.key,e.value)};else if(e instanceof Nn)n={delete:Re(t,e.key)};else if(e instanceof In)n={update:xe(t,e.key,e.data),updateMask:Xe(e.We)};else if(e instanceof Tn)n={transform:{document:Re(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof en)return{fieldPath:e.field.R(),setToServerValue:"REQUEST_TIME"};if(n instanceof nn)return{fieldPath:e.field.R(),appendMissingElements:{values:n.elements}};if(n instanceof on)return{fieldPath:e.field.R(),removeAllFromArray:{values:n.elements}};if(n instanceof an)return{fieldPath:e.field.R(),increment:n.je};throw m()}(0,t)}))}};else{if(!(e instanceof Rn))return m();n={verify:Re(t,e.key)}}return e.Ge.Ke||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Te(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:m()}(t,e.Ge)),n}function je(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?pn.updateTime(Ae(t.updateTime)):void 0!==t.exists?pn.exists(t.exists):pn.ze()}(e.currentDocument):pn.ze();if(e.update){e.update.name;var r=Oe(t,e.update.name),i=new On({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new ln(e.map((function(t){return N.S(t)})))}(e.updateMask);return new In(r,i,o,n)}return new _n(r,i,n)}if(e.delete){var s=Oe(t,e.delete);return new Nn(s,n)}if(e.transform){var a=Oe(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)b("REQUEST_TIME"===e.setToServerValue),n=new en;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new nn(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new on(i)}else"increment"in e?n=new an(t,e.increment):m();var o=N.S(e.fieldPath);return new hn(o,n)}(t,e)}));return b(!0===n.exists),new Tn(a,u)}if(e.verify){var c=Oe(t,e.verify);return new Rn(c,n)}return m()}function Fe(t,e){return{documents:[ke(t,e.path)]}}function Me(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ke(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ke(t,r.h()),n.structuredQuery.from=[{collectionId:r._()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(de(t.value))return{unaryFilter:{field:We(t.field),op:"IS_NAN"}};if(pe(t.value))return{unaryFilter:{field:We(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(de(t.value))return{unaryFilter:{field:We(t.field),op:"IS_NOT_NAN"}};if(pe(t.value))return{unaryFilter:{field:We(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:We(t.field),op:He(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:We(t.field),direction:Ge(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Qe||ct(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=qe(e.startAt)),e.endAt&&(n.structuredQuery.endAt=qe(e.endAt)),n}function Ue(t){var e=Pe(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){b(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ve(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new pr(ze(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ct(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Be(n.startAt));var l=null;return n.endAt&&(l=Be(n.endAt)),Wn(Fn(e,i,a,s,u,"F",c,l))}function Ve(t){return t?void 0!==t.unaryFilter?[$e(t)]:void 0!==t.fieldFilter?[Ke(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ve(t)})).reduce((function(t,e){return t.concat(e)})):m():[]}function qe(t){return{before:t.before,values:t.position}}function Be(t){var e=!!t.before,n=t.values||[];return new cr(n,e)}function Ge(t){return ye[t]}function He(t){return ge[t]}function We(t){return{fieldPath:t.R()}}function ze(t){return N.S(t.fieldPath)}function Ke(t){return tr.create(ze(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return m()}}(t.fieldFilter.op),t.fieldFilter.value)}function $e(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ze(t.unaryFilter.field);return tr.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ze(t.unaryFilter.field);return tr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ze(t.unaryFilter.field);return tr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ze(t.unaryFilter.field);return tr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return m()}}function Xe(t){var e=[];return t.fields.forEach((function(t){return e.push(t.R())})),{fieldPaths:e}}function Je(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Ye=function(){this.He=void 0};function Qe(t,e,n){return t instanceof en?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof nn?rn(t,e):t instanceof on?sn(t,e):function(t,e){var n=tn(t,e),r=un(n)+un(t.je);return he(n)&&he(t.je)?be(r):we(t.serializer,r)}(t,e)}function Ze(t,e,n){return t instanceof nn?rn(t,e):t instanceof on?sn(t,e):n}function tn(t,e){return t instanceof an?he(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var en=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e}(Ye),nn=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return r.__extends(e,t),e}(Ye);function rn(t,e){for(var n=cn(e),r=function(t){n.some((function(e){return ee(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var on=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return r.__extends(e,t),e}(Ye);function sn(t,e){for(var n=cn(e),r=function(t){n=n.filter((function(e){return!ee(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var an=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.je=n,r}return r.__extends(e,t),e}(Ye);function un(t){return ue(t.integerValue||t.doubleValue)}function cn(t){return fe(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ln=function(){function t(t){this.fields=t,t.sort(N.i)}return t.prototype.Ye=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].T(t))return!0;return!1},t.prototype.isEqual=function(t){return Y(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),hn=function(t,e){this.field=t,this.transform=e},fn=function(t,e){this.version=t,this.transformResults=e},pn=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Ke",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function dn(t,e){return void 0!==t.updateTime?e instanceof Cn&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Cn}var vn=function(){};function yn(t,e,n){return t instanceof _n?function(t,e,n){return new Cn(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof In?function(t,e,n){if(!dn(t.Ge,e))return new Ln(t.key,n.version);var r=En(t,e);return new Cn(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Tn?function(t,e,n){if(b(null!=n.transformResults),!dn(t.Ge,e))return new Ln(t.key,n.version);var r=An(0,e),i=function(t,e,n){var r=[];b(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Cn&&(a=e.field(o.field)),r.push(Ze(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Sn(t,r.data(),i);return new Cn(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new xn(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function gn(t,e,n,r){return t instanceof _n?function(t,e){if(!dn(t.Ge,e))return e;var n=wn(e);return new Cn(t.key,n,t.value,{Je:!0})}(t,e):t instanceof In?function(t,e){if(!dn(t.Ge,e))return e;var n=wn(e),r=En(t,e);return new Cn(t.key,n,r,{Je:!0})}(t,e):t instanceof Tn?function(t,e,n,r){if(!dn(t.Ge,e))return e;var i=An(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof Cn&&(c=n.field(a.field)),null===c&&r instanceof Cn&&(c=r.field(a.field)),i.push(Qe(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=Sn(t,i.data(),o);return new Cn(t.key,i.version,s,{Je:!0})}(t,e,r,n):function(t,e){return dn(t.Ge,e)?new xn(t.key,ut.min()):e}(t,e)}function mn(t,e){return t instanceof Tn?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof Cn?e.field(o.field):void 0,a=tn(o.transform,s||null);null!=a&&(n=null==n?(new kn).set(o.field,a):n.set(o.field,a))}return n?n.Xe():null}(t,e):null}function bn(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.We.isEqual(e.We):2!==t.type||Y(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof nn&&e instanceof nn||t instanceof on&&e instanceof on?Y(t.elements,e.elements,ee):t instanceof an&&e instanceof an?ee(t.je,e.je):t instanceof en&&e instanceof en}(t.transform,e.transform)}(t,e)})))}function wn(t){return t instanceof Cn?t.version:ut.min()}var _n=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ge=r,i.type=0,i}return r.__extends(e,t),e}(vn),In=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.We=r,o.Ge=i,o.type=1,o}return r.__extends(e,t),e}(vn);function En(t,e){return function(t,e){var n=new kn(e);return t.We.fields.forEach((function(e){if(!e.m()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Xe()}(t,e instanceof Cn?e.data():On.empty())}var Tn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ge=pn.exists(!0),r}return r.__extends(e,t),e}(vn);function An(t,e){return e}function Sn(t,e,n){for(var r=new kn(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Xe()}var Nn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=3,r}return r.__extends(e,t),e}(vn),Rn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=4,r}return r.__extends(e,t),e}(vn),On=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.m())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!ve(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t._()])||null},t.prototype.isEqual=function(t){return ee(this.proto,t.proto)},t}(),kn=function(){function t(t){void 0===t&&(t=On.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===te(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t._(),e)},t.prototype.Xe=function(){var t=this.nn(N.P(),this.tn);return null!=t?new On(t):this.Ze},t.prototype.nn=function(t,e){var n=this,r=!1,i=this.Ze.field(t),o=ve(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.nn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Pn(t){var e=[];return I(t.fields||{},(function(t,n){var r=new N([t]);if(ve(n)){var i=Pn(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new ln(e)}var Dn=function(t,e){this.key=t,this.version=e},Cn=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).sn=r,o.Je=!!i.Je,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return r.__extends(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Dn),xn=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return r.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Dn),Ln=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Dn),jn=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=s,this.endAt=a,this.cn=null,this.un=null,this.startAt,this.endAt};function Fn(t,e,n,r,i,o,s,a){return new jn(t,e,n,r,i,o,s,a)}function Mn(t){return new jn(t)}function Un(t){return!ct(t.limit)&&"F"===t.an}function Vn(t){return!ct(t.limit)&&"L"===t.an}function qn(t){return t.on.length>0?t.on[0].field:null}function Bn(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.hn())return r.field}return null}function Gn(t){return null!==t.collectionGroup}function Hn(t){var e=w(t);if(null===e.cn){e.cn=[];var n=Bn(e),r=qn(e);if(null!==n&&null===r)n.p()||e.cn.push(new pr(n)),e.cn.push(new pr(N.v(),"asc"));else{for(var i=!1,o=0,s=e.on;o<s.length;o++){var a=s[o];e.cn.push(a),a.field.p()&&(i=!0)}if(!i){var u=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.cn.push(new pr(N.v(),u))}}}return e.cn}function Wn(t){var e=w(t);if(!e.un)if("F"===e.an)e.un=pt(e.path,e.collectionGroup,Hn(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Hn(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new pr(o.field,s))}var a=e.endAt?new cr(e.endAt.position,!e.endAt.before):null,u=e.startAt?new cr(e.startAt.position,!e.startAt.before):null;e.un=pt(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.un}function zn(t,e,n){return new jn(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kn(t,e){return new jn(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function $n(t,e){return new jn(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Xn(t,e){return vt(Wn(t),Wn(e))&&t.an===e.an}function Jn(t){return dt(Wn(t))+"|lt:"+t.an}function Yn(t){return"Query(target="+function(t){var e=t.path.R();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.R()+" "+e.op+" "+oe(e.value);var e})).join(", ")+"]"),ct(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.R()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+lr(t.startAt)),t.endAt&&(e+=", endAt: "+lr(t.endAt)),"Target("+e+")"}(Wn(t))+"; limitType="+t.an+")"}function Qn(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.N(t.collectionGroup)&&t.path.T(n):R.F(t.path)?t.path.isEqual(n):t.path.I(n)}(t,e)&&function(t,e){for(var n=0,r=t.on;n<r.length;n++){var i=r[n];if(!i.field.p()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!hr(t.startAt,Hn(t),e)||t.endAt&&hr(t.endAt,Hn(t),e))}(t,e)}function Zn(t){return function(e,n){for(var r=!1,i=0,o=Hn(t);i<o.length;i++){var s=o[i],a=dr(s,e,n);if(0!==a)return a;r=r||s.field.p()}return 0}}var tr=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return r.__extends(e,t),e.create=function(t,n,r){if(t.p())return"in"===n||"not-in"===n?this.ln(t,n,r):new er(t,n,r);if(pe(r)){if("=="!==n&&"!="!==n)throw new h(l.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new e(t,n,r)}if(de(r)){if("=="!==n&&"!="!==n)throw new h(l.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new e(t,n,r)}return"array-contains"===n?new or(t,r):"in"===n?new sr(t,r):"not-in"===n?new ar(t,r):"array-contains-any"===n?new ur(t,r):new e(t,n,r)},e.ln=function(t,e,n){return"in"===e?new nr(t,n):new rr(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n(re(e,this.value)):null!==e&&te(this.value)===te(e)&&this._n(re(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return m()}},e.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),er=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=R.C(r.referenceValue),i}return r.__extends(e,t),e.prototype.matches=function(t){var e=R.i(t.key,this.key);return this._n(e)},e}(tr),nr=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ir(0,n),r}return r.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(tr),rr=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ir(0,n),r}return r.__extends(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(tr);function ir(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return R.C(t.referenceValue)}))}var or=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return fe(e)&&ne(e.arrayValue,this.value)},e}(tr),sr=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ne(this.value.arrayValue,e)},e}(tr),ar=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){if(ne(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ne(this.value.arrayValue,e)},e}(tr),ur=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!fe(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ne(e.value.arrayValue,t)}))},e}(tr),cr=function(t,e){this.position=t,this.before=e};function lr(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return oe(t)})).join(",")}function hr(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.p()?R.i(R.C(s.referenceValue),n.key):re(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function fr(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ee(t.position[n],e.position[n]))return!1;return!0}var pr=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function dr(t,e,n){var r=t.field.p()?R.i(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?re(r,i):m()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return m()}}function vr(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var yr=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},gr=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.mn=r,this.Tn=i,this.En=0,this.In=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.En=0},t.prototype.Rn=function(){this.En=this.Tn},t.prototype.gn=function(t){var e=this;this.cancel();var n=Math.floor(this.En+this.Pn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.En+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.In=this.fn.yn(this.dn,i,(function(){return e.An=Date.now(),t()})),this.En*=this.mn,this.En<this.wn&&(this.En=this.wn),this.En>this.Tn&&(this.En=this.Tn)},t.prototype.Vn=function(){null!==this.In&&(this.In.pn(),this.In=null)},t.prototype.cancel=function(){null!==this.In&&(this.In.cancel(),this.In=null)},t.prototype.Pn=function(){return(Math.random()-.5)*this.En},t}(),mr=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Dn&&m(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,i){r.bn=function(n){r.Nn(e,n).next(t,i)},r.vn=function(e){r.Cn(n,e).next(t,i)}}))},t.prototype.Fn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.xn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.xn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.xn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.kn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),br=function(){function t(e,n,r){this.name=e,this.version=n,this.Mn=r,12.2===t.On(s.getUA())&&v("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return d("SimpleDb","Removing database:",t),Ar(window.indexedDB.deleteDatabase(t)).Fn()},t.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(t.Bn())return!0;var e=s.getUA(),n=t.On(e),r=0<n&&n<10,i=t.qn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={production:!0,baseUrl:"https://your-prod-url.com.br",default:{production:!0,baseUrl:"https://your-prod-url.com.br"}})||void 0===t?void 0:t.Un)},t.Qn=function(t,e){return t.store(e)},t.On=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Wn=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(d("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new _r(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new h(l.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new _r(t,n))},i.onupgradeneeded=function(t){d("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Mn.createOrUpgrade(e,i.transaction,t.oldVersion,n.version).next((function(){d("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.jn&&(this.db.onversionchange=function(t){return n.jn(t)}),this.db)]}}))}))},t.prototype.Kn=function(t){this.jn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,s,a,u,c;return r.__generator(this,(function(l){switch(l.label){case 0:o="readonly"===e,s=0,a=function(){var e,a,c,l,h;return r.__generator(this,(function(r){switch(r.label){case 0:++s,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.Wn(t)];case 2:return u.db=r.sent(),e=Er.open(u.db,t,o?"readonly":"readwrite",n),a=i(e).catch((function(t){return e.abort(t),mr.reject(t)})).Fn(),c={},a.catch((function(){})),[4,e.Gn];case 3:return[2,(c.value=(r.sent(),a),c)];case 4:return l=r.sent(),h="FirebaseError"!==l.name&&s<3,d("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),wr=function(){function t(t){this.zn=t,this.Hn=!1,this.Yn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Yn=t},t.prototype.delete=function(){return Ar(this.zn.delete())},t}(),_r=function(t){function e(e,n){var r=this;return(r=t.call(this,l.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return r.__extends(e,t),e}(h);function Ir(t){return"IndexedDbTransactionError"===t.name}var Er=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new yr,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new _r(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var r=Nr(e.target.error);n.Zn.reject(new _r(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new _r(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(d("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Tr(e)},t}(),Tr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(d("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ar(n)},t.prototype.add=function(t){return d("SimpleDb","ADD",this.store.name,t,t),Ar(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ar(this.store.get(t)).next((function(n){return void 0===n&&(n=null),d("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return d("SimpleDb","DELETE",this.store.name,t),Ar(this.store.delete(t))},t.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),Ar(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.es(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ns=function(t,e){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var r=this.cursor(n);return this.es(r,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.es(r,e)},t.prototype.os=function(t){var e=this.cursor({});return new mr((function(n,r){e.onerror=function(t){var e=Nr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new mr((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new wr(i),s=e(i.primaryKey,i.value,o);if(s instanceof mr){var a=s.catch((function(t){return o.done(),mr.reject(t)}));n.push(a)}o.Sn?r():null===o.Jn?i.continue():i.continue(o.Jn)}else r()}})).next((function(){return mr.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ar(t){return new mr((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Nr(t.target.error);n(e)}}))}var Sr=!1;function Nr(t){var e=br.On(s.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new h("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Sr||(Sr=!0,setTimeout((function(){throw r}),0)),r}}return t}function Rr(){return"undefined"!=typeof window?window:null}function Or(){return"undefined"!=typeof document?document:null}var kr=function(){function t(t,e,n,r,i){this.cs=t,this.dn=e,this.us=n,this.op=r,this.hs=i,this.ls=new yr,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new h(l.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.ds=function(){var t=this;this.cs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},t}(),Pr=function(){function t(){var t=this;this.Ts=Promise.resolve(),this.Es=[],this.Is=!1,this.As=[],this.Rs=null,this.gs=!1,this.Ps=[],this.ys=new gr(this,"async_queue_retry"),this.Vs=function(){var e=Or();e&&d("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.ys.Vn()};var e=Or();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(t.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),t.prototype.ws=function(t){this.enqueue(t)},t.prototype.bs=function(t){this.vs(),this.Ss(t)},t.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=Or();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vs)}},t.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},t.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Es.push(t),e.Ns()}))},t.prototype.Ns=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(0===this.Es.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Es[0]()];case 2:return n.sent(),this.Es.shift(),this.ys.reset(),[3,4];case 3:if(!Ir(t=n.sent()))throw t;return d("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Es.length>0&&this.ys.gn((function(){return e.Ns()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ss=function(t){var e=this,n=this.Ts.then((function(){return e.gs=!0,t().catch((function(t){throw e.Rs=t,e.gs=!1,v("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gs=!1,t}))}));return this.Ts=n,n},t.prototype.yn=function(t,e,n){var r=this;this.vs(),this.Ps.indexOf(t)>-1&&(e=0);var i=kr._s(this,t,e,n,(function(t){return r.Fs(t)}));return this.As.push(i),i},t.prototype.vs=function(){this.Rs&&m()},t.prototype.xs=function(){},t.prototype.$s=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.Ts];case 1:e.sent(),e.label=2;case 2:if(t!==this.Ts)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.ks=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},t.prototype.Ms=function(t){var e=this;return this.$s().then((function(){e.As.sort((function(t,e){return t.us-e.us}));for(var n=0,r=e.As;n<r.length;n++){var i=r[n];if(i.pn(),"all"!==t&&i.dn===t)break}return e.$s()}))},t.prototype.Os=function(t){this.Ps.push(t)},t.prototype.Fs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},t}();function Dr(t,e){if(v("AsyncQueue",e+": "+t),Ir(t))return new h(l.UNAVAILABLE,e+": "+t);throw t}var Cr=function(){this.Ls=void 0,this.listeners=[]},xr=function(){this.Bs=new st((function(t){return Jn(t)}),Xn),this.onlineState="Unknown",this.qs=new Set};function Lr(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,a,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:if(n=w(t),i=e.query,o=!1,(s=n.Bs.get(i))||(o=!0,s=new Cr),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),a=s,[4,n.Us(i)];case 2:return a.Ls=r.sent(),[3,4];case 3:return u=r.sent(),c=Dr(u,"Initialization of query '"+Yn(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.Bs.set(i,s),s.listeners.push(e),e.Qs(n.onlineState),s.Ls&&e.Ws(s.Ls)&&Ur(n),[2]}}))}))}function jr(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,a;return r.__generator(this,(function(r){return n=w(t),i=e.query,o=!1,(s=n.Bs.get(i))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),o=0===s.listeners.length),o?[2,(n.Bs.delete(i),n.js(i))]:[2]}))}))}function Fr(t,e){for(var n=w(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.Bs.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Ws(s)&&(r=!0);u.Ls=s}}r&&Ur(n)}function Mr(t,e,n){var r=w(t),i=r.Bs.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.Bs.delete(e)}function Ur(t){t.qs.forEach((function(t){t.next()}))}var Vr=function(){function t(t,e,n){this.query=t,this.Ks=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Ws=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Vt(t.query,t.docs,t.Qt,e,t.Wt,t.fromCache,t.jt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.Ks.next(t),o=!0):this.Ys(t,this.onlineState)&&(this.Js(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.Ks.error(t)},t.prototype.Qs=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,t)&&(this.Js(this.zs),e=!0),e},t.prototype.Ys=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Xs&&n||t.docs.m()&&"Offline"!==e)},t.prototype.Hs=function(t){if(t.docChanges.length>0)return!0;var e=this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites;return!(!t.jt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Js=function(t){t=Vt.Gt(t.query,t.docs,t.Wt,t.fromCache),this.Gs=!0,this.Ks.next(t)},t}(),qr=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();qr.UNAUTHENTICATED=new qr(null),qr.ei=new qr("google-credentials-uid"),qr.ni=new qr("first-party-uid");var Br=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.si=function(t){return n.ii(t)},this.ri=function(t){return e.oi(t)})}return t.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},t}();function Gr(t,e){return"firestore_clients_"+t+"_"+e}function Hr(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Zs()&&(r+="_"+e.uid),r}function Wr(t,e){return"firestore_targets_"+t+"_"+e}Br.ai=-1;var zr=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ci=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new h(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(v("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Kr=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ci=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new h(r.error.code,r.error.message)),i?new t(e,r.state,o):(v("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),$r=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ci=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ft(),s=0;i&&s<r.activeTargetIds.length;++s)i=ht(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(v("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Xr=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ci=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(v("SharedClientState","Failed to parse online state: "+e),null)},t}(),Jr=function(){function t(){this.activeTargetIds=Ft()}return t.prototype.hi=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ui=function(){var t={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Yr=function(){function t(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this._i=r,this.fi=null,this.di=null,this.si=null,this.wi=this.mi.bind(this),this.Ti=new Et(J),this.Ei=!1,this.Ii=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ai=Gr(this.persistenceKey,this._i),this.Ri=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ti=this.Ti.ot(this._i,new Jr),this.gi=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.yi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Vi=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wi)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e,n,i,o,s,a,u,c,l,h,f=this;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.fi.pi()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this._i&&(o=this.getItem(Gr(this.persistenceKey,i)))&&(s=$r.ci(i,o))&&(this.Ti=this.Ti.ot(s.clientId,s));for(this.bi(),(a=this.storage.getItem(this.Vi))&&(u=this.vi(a))&&this.Si(u),c=0,l=this.Ii;c<l.length;c++)h=l[c],this.mi(h);return this.Ii=[],this.window.addEventListener("unload",(function(){return f.Di()})),this.Ei=!0,[2]}}))}))},t.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},t.prototype.Ci=function(){return this.Ni(this.Ti)},t.prototype.Fi=function(t){var e=!1;return this.Ti.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xi=function(t){this.$i(t,"pending")},t.prototype.ki=function(t,e,n){this.$i(t,e,n),this.Mi(t)},t.prototype.Oi=function(t){var e="not-current";if(this.Fi(t)){var n=this.storage.getItem(Wr(this.persistenceKey,t));if(n){var r=Kr.ci(t,n);r&&(e=r.state)}}return this.Li.hi(t),this.bi(),e},t.prototype.Bi=function(t){this.Li.li(t),this.bi()},t.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},t.prototype.Ui=function(t){this.removeItem(Wr(this.persistenceKey,t))},t.prototype.Qi=function(t,e,n){this.Wi(t,e,n)},t.prototype.ji=function(t,e,n){var r=this;e.forEach((function(t){r.Mi(t)})),this.currentUser=t,n.forEach((function(t){r.xi(t)}))},t.prototype.Ki=function(t){this.Gi(t)},t.prototype.Di=function(){this.Ei&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ei=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return d("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){d("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){d("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.mi=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(d("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ai)return void v("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return r.__awaiter(e,void 0,void 0,(function(){var t,e,i,o,s,a;return r.__generator(this,(function(r){if(this.Ei){if(null!==n.key)if(this.gi.test(n.key)){if(null==n.newValue)return t=this.zi(n.key),[2,this.Hi(t,null)];if(e=this.Yi(n.key,n.newValue))return[2,this.Hi(e.clientId,e)]}else if(this.Pi.test(n.key)){if(null!==n.newValue&&(i=this.Ji(n.key,n.newValue)))return[2,this.Xi(i)]}else if(this.yi.test(n.key)){if(null!==n.newValue&&(o=this.Zi(n.key,n.newValue)))return[2,this.tr(o)]}else if(n.key===this.Vi){if(null!==n.newValue&&(s=this.vi(n.newValue)))return[2,this.Si(s)]}else n.key===this.Ri&&(a=function(t){var e=Br.ai;if(null!=t)try{var n=JSON.parse(t);b("number"==typeof n),e=n}catch(t){v("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Br.ai&&this.si(a)}else this.Ii.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),t.prototype.bi=function(){this.setItem(this.Ai,this.Li.ui())},t.prototype.$i=function(t,e,n){var r=new zr(this.currentUser,t,e,n),i=Hr(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ui())},t.prototype.Mi=function(t){var e=Hr(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Gi=function(t){var e={clientId:this._i,onlineState:t};this.storage.setItem(this.Vi,JSON.stringify(e))},t.prototype.Wi=function(t,e,n){var r=Wr(this.persistenceKey,t),i=new Kr(t,e,n);this.setItem(r,i.ui())},t.prototype.zi=function(t){var e=this.gi.exec(t);return e?e[1]:null},t.prototype.Yi=function(t,e){var n=this.zi(t);return $r.ci(n,e)},t.prototype.Ji=function(t,e){var n=this.Pi.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zr.ci(new qr(i),r,e)},t.prototype.Zi=function(t,e){var n=this.yi.exec(t),r=Number(n[1]);return Kr.ci(r,e)},t.prototype.vi=function(t){return Xr.ci(t)},t.prototype.Xi=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fi.er(t.batchId,t.state,t.error)]:(d("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},t.prototype.Hi=function(t,e){var n=this,r=e?this.Ti.ot(t,e):this.Ti.remove(t),i=this.Ni(this.Ti),o=this.Ni(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.fi.sr(s,a).then((function(){n.Ti=r}))},t.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},t.prototype.Ni=function(t){var e=Ft();return t.forEach((function(t,n){e=e.kt(n.activeTargetIds)})),e},t}(),Qr=function(){function t(){this.ir=new Jr,this.rr={},this.di=null,this.si=null}return t.prototype.xi=function(t){},t.prototype.ki=function(t,e,n){},t.prototype.Oi=function(t){return this.ir.hi(t),this.rr[t]||"not-current"},t.prototype.Qi=function(t,e,n){this.rr[t]=e},t.prototype.Bi=function(t){this.ir.li(t)},t.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.Ui=function(t){delete this.rr[t]},t.prototype.Ci=function(){return this.ir.activeTargetIds},t.prototype.Fi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.start=function(){return this.ir=new Jr,Promise.resolve()},t.prototype.ji=function(t,e,n){},t.prototype.Ki=function(t){},t.prototype.Di=function(){},t.prototype.oi=function(t){},t}(),Zr=function(){function t(t,e,n,r){this.batchId=t,this.ar=e,this.baseMutations=n,this.mutations=r}return t.prototype.cr=function(t,e,n){for(var r=n.ur,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=yn(o,e,r[i]))}return e},t.prototype.hr=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=gn(i,e,e,this.ar))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=gn(u,e,o,this.ar))}return e},t.prototype.lr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.hr(r.key,t.get(r.key));i&&(n=n.ot(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Lt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Y(this.mutations,t.mutations,(function(t,e){return bn(t,e)}))&&Y(this.baseMutations,t.baseMutations,(function(t,e){return bn(t,e)}))},t}(),ti=function(){function t(t,e,n,r){this.batch=t,this._r=e,this.ur=n,this.dr=r}return t.from=function(e,n,r){b(e.mutations.length===r.length);for(var i=Ct,o=e.mutations,s=0;s<o.length;s++)i=i.ot(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),ei=function(){function t(){this.wr=new st((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.mr=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),t.prototype.Er=function(t,e){this.Ir(),this.readTime=e,this.wr.set(t.key,t)},t.prototype.Ar=function(t,e){this.Ir(),e&&(this.readTime=e),this.wr.set(t,null)},t.prototype.Rr=function(t,e){this.Ir();var n=this.wr.get(e);return void 0!==n?mr.resolve(n):this.gr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Ir(),this.mr=!0,this.yr(t)},t.prototype.Ir=function(){},t}(),ni="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ri=function(){function t(){this.Vr=[]}return t.prototype.pr=function(t){this.Vr.push(t)},t.prototype.br=function(){this.Vr.forEach((function(t){return t()}))},t}(),ii=function(){function t(t,e,n){this.vr=t,this.Sr=e,this.Dr=n}return t.prototype.Cr=function(t,e){var n=this;return this.Sr.Nr(t,e).next((function(r){return n.Fr(t,e,r)}))},t.prototype.Fr=function(t,e,n){return this.vr.Rr(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].hr(e,t);return t}))},t.prototype.$r=function(t,e,n){var r=kt();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].hr(t,e);r=r.ot(t,e)})),r},t.prototype.kr=function(t,e){var n=this;return this.vr.getEntries(t,e).next((function(e){return n.Mr(t,e)}))},t.prototype.Mr=function(t,e){var n=this;return this.Sr.Or(t,e).next((function(r){var i=n.$r(t,e,r),o=Ot();return i.forEach((function(t,e){e||(e=new xn(t,ut.min())),o=o.ot(t,e)})),o}))},t.prototype.Lr=function(t,e,n){return function(t){return R.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Br(t,e.path):Gn(e)?this.qr(t,e,n):this.Ur(t,e,n)},t.prototype.Br=function(t,e){return this.Cr(t,new R(e)).next((function(t){var e=Dt();return t instanceof Cn&&(e=e.ot(t.key,t)),e}))},t.prototype.qr=function(t,e,n){var r=this,i=e.collectionGroup,o=Dt();return this.Dr.Qr(t,i).next((function(s){return mr.forEach(s,(function(s){var a=function(t,e){return new jn(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,s.child(i));return r.Ur(t,a,n).next((function(t){t.forEach((function(t,e){o=o.ot(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Ur=function(t,e,n){var r,i,o=this;return this.vr.Lr(t,e,n).next((function(n){return r=n,o.Sr.Wr(t,e)})).next((function(e){return i=e,o.jr(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=gn(u,l,l,o.ar);r=h instanceof Cn?r.ot(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Qn(e,n)||(r=r.remove(t))})),r}))},t.prototype.jr=function(t,e,n){for(var r=Lt(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof In&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.vr.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Cn&&(c=c.ot(t,e))})),c}))},t}(),oi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Kr=n,this.Gr=r}return t.zr=function(e,n){for(var r=Lt(),i=Lt(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}();function si(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=J(n,i);return 0===s?J(r,o):s}var ai=function(){function t(t){this.Hr=t,this.buffer=new St(si),this.Yr=0}return t.prototype.Jr=function(){return++this.Yr},t.prototype.Xr=function(t){var e=[t,this.Jr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();si(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ui={Zr:!1,eo:0,no:0,so:0},ci=function(){function t(t,e,n){this.io=t,this.ro=e,this.oo=n}return t.ao=function(e){return new t(e,t.co,t.uo)},t}();ci.ho=-1,ci.lo=1048576,ci._o=41943040,ci.co=10,ci.uo=1e3,ci.fo=new ci(ci._o,ci.co,ci.uo),ci.do=new ci(ci.ho,0,0);var li=function(){function t(t,e){this.wo=t,this.cs=e,this.mo=!1,this.To=null}return t.prototype.start=function(t){this.wo.params.io!==ci.ho&&this.Eo(t)},t.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(t.prototype,"Ei",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),t.prototype.Eo=function(t){var e=this,n=this.mo?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.To=this.cs.yn("lru_garbage_collection",n,(function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:this.To=null,this.mo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Io(this.wo)];case 2:return n.sent(),[3,7];case 3:return Ir(e=n.sent())?(d("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ko(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Eo(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),hi=function(){function t(t,e){this.Ao=t,this.params=e}return t.prototype.Ro=function(t,e){return this.Ao.Po(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.yo=function(t,e){var n=this;if(0===e)return mr.resolve(Br.ai);var r=new ai(e);return this.Ao.Ce(t,(function(t){return r.Xr(t.sequenceNumber)})).next((function(){return n.Ao.Vo(t,(function(t){return r.Xr(t)}))})).next((function(){return r.maxValue}))},t.prototype.po=function(t,e,n){return this.Ao.po(t,e,n)},t.prototype.bo=function(t,e){return this.Ao.bo(t,e)},t.prototype.vo=function(t,e){var n=this;return this.params.io===ci.ho?(d("LruGarbageCollector","Garbage collection skipped; disabled"),mr.resolve(ui)):this.So(t).next((function(r){return r<n.params.io?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.io),ui):n.Do(t,e)}))},t.prototype.So=function(t){return this.Ao.So(t)},t.prototype.Do=function(t,e){var n,r,i,s,a,u,c,l=this,h=Date.now();return this.Ro(t,this.params.ro).next((function(e){return e>l.params.oo?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.oo+" from "+e),r=l.params.oo):r=e,s=Date.now(),l.yo(t,r)})).next((function(r){return n=r,a=Date.now(),l.po(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.bo(t,n)})).next((function(t){return c=Date.now(),p()<=o.LogLevel.DEBUG&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),mr.resolve({Zr:!0,eo:r,no:i,so:t})}))},t}();function fi(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=di(e)),e=pi(t.get(n),e);return di(e)}function pi(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function di(t){return t+""}function vi(t){var e=t.length;if(b(e>=2),2===e)return b(""===t.charAt(0)&&""===t.charAt(1)),A.P();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&m(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:m()}o=s+2}return new A(r)}var yi=function(t){this.Co=t};function gi(t,e){if(e.document)return function(t,e,n){var r=Oe(t,e.name),i=Ae(e.updateTime),o=new On({mapValue:{fields:e.fields}});return new Cn(r,i,o,{hasCommittedMutations:!!n})}(t.Co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=R.$(e.noDocument.path),r=Ii(e.noDocument.readTime);return new xn(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=R.$(e.unknownDocument.path),o=Ii(e.unknownDocument.version);return new Ln(i,o)}return m()}function mi(t,e,n){var r=bi(n),i=e.key.path.h().A();if(e instanceof Cn){var o=function(t,e){return{name:Re(t,e.key),fields:e.rn().mapValue.fields,updateTime:Ie(t,e.version.Z())}}(t.Co,e),s=e.hasCommittedMutations;return new $i(null,null,o,s,r,i)}if(e instanceof xn){var a=e.key.path.A(),u=_i(e.version),c=e.hasCommittedMutations;return new $i(null,new zi(a,u),null,c,r,i)}if(e instanceof Ln){var l=e.key.path.A(),h=_i(e.version);return new $i(new Ki(l,h),null,null,!0,r,i)}return m()}function bi(t){var e=t.Z();return[e.seconds,e.nanoseconds]}function wi(t){var e=new at(t[0],t[1]);return ut.J(e)}function _i(t){var e=t.Z();return new qi(e.seconds,e.nanoseconds)}function Ii(t){var e=new at(t.seconds,t.nanoseconds);return ut.J(e)}function Ei(t,e){var n=(e.baseMutations||[]).map((function(e){return je(t.Co,e)})),r=e.mutations.map((function(e){return je(t.Co,e)})),i=at.fromMillis(e.localWriteTimeMs);return new Zr(e.batchId,i,n,r)}function Ti(t){var e,n,r=Ii(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ii(t.lastLimboFreeSnapshotVersion):ut.min();return void 0!==t.query.documents?(b(1===(n=t.query).documents.length),e=Wn(Mn(Pe(n.documents[0])))):e=Ue(t.query),new bt(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Z.fromBase64String(t.resumeToken))}function Ai(t,e){var n,r=_i(e.nt),i=_i(e.lastLimboFreeSnapshotVersion);n=yt(e.target)?Fe(t.Co,e.target):Me(t.Co,e.target);var o=e.resumeToken.toBase64();return new Ji(e.targetId,dt(e.target),r,o,e.sequenceNumber,i,n)}var Si=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Dr=n,this.No=r,this.Fo={}}return t.xo=function(e,n,r,i){return b(""!==e.uid),new t(e.Zs()?e.uid:"",n,r,i)},t.prototype.$o=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oi(t).rs({index:Hi.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.ko=function(t,e,n,r){var i=this,o=ki(t),s=Oi(t);return s.add({}).next((function(a){b("number"==typeof a);for(var u=new Zr(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Le(t.Co,e)})),i=n.mutations.map((function(e){return Le(t.Co,e)}));return new Hi(e,n.batchId,n.ar.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new St((function(t,e){return J(t.R(),e.R())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Wi.key(i.userId,d.key.path,a);h=h.add(d.key.path.h()),l.push(s.put(c)),l.push(o.put(v,Wi.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Dr.Mo(t,e))})),t.pr((function(){i.Fo[a]=u.keys()})),mr.$n(l).next((function(){return u}))}))},t.prototype.Oo=function(t,e){var n=this;return Oi(t).get(e).next((function(t){return t?(b(t.userId===n.userId),Ei(n.serializer,t)):null}))},t.prototype.Lo=function(t,e){var n=this;return this.Fo[e]?mr.resolve(this.Fo[e]):this.Oo(t,e).next((function(t){if(t){var r=t.keys();return n.Fo[e]=r,r}return null}))},t.prototype.Bo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Oi(t).rs({index:Hi.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(b(e.batchId>=r),o=Ei(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Oi(t).rs({index:Hi.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Oi(t).ts(Hi.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ei(e.serializer,t)}))}))},t.prototype.Nr=function(t,e){var n=this,r=Wi.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ki(t).rs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=vi(u);if(a===n.userId&&e.path.isEqual(l))return Oi(t).get(c).next((function(t){if(!t)throw m();b(t.userId===n.userId),o.push(Ei(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.Or=function(t,e){var n=this,r=new St(J),i=[];return e.forEach((function(e){var o=Wi.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=ki(t).rs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=vi(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),mr.$n(i).next((function(){return n.Qo(t,r)}))},t.prototype.Wr=function(t,e){var n=this,r=e.path,i=r.length+1,o=Wi.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new St(J);return ki(t).rs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=vi(u);s===n.userId&&r.T(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Qo(t,a)}))},t.prototype.Qo=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Oi(t).get(e).next((function(t){if(null===t)throw m();b(t.userId===n.userId),r.push(Ei(n.serializer,t))})))})),mr.$n(i).next((function(){return r}))},t.prototype.Wo=function(t,e){var n=this;return Ri(t.jo,this.userId,e).next((function(r){return t.pr((function(){n.Ko(e.batchId)})),mr.forEach(r,(function(e){return n.No.Go(t,e)}))}))},t.prototype.Ko=function(t){delete this.Fo[t]},t.prototype.zo=function(t){var e=this;return this.$o(t).next((function(n){if(!n)return mr.resolve();var r=IDBKeyRange.lowerBound(Wi.prefixForUser(e.userId)),i=[];return ki(t).rs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=vi(t[1]);i.push(o)}else r.done()})).next((function(){b(0===i.length)}))}))},t.prototype.Ho=function(t,e){return Ni(t,this.userId,e)},t.prototype.Yo=function(t){var e=this;return Pi(t).get(this.userId).next((function(t){return t||new Gi(e.userId,-1,"")}))},t}();function Ni(t,e,n){var r=Wi.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ki(t).rs({range:o,ss:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Ri(t,e,n){var r=t.store(Hi.store),i=t.store(Wi.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.rs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){b(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Wi.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return mr.$n(o).next((function(){return c}))}function Oi(t){return fo.Qn(t,Hi.store)}function ki(t){return fo.Qn(t,Wi.store)}function Pi(t){return fo.Qn(t,Gi.store)}var Di=function(){function t(t,e){this.serializer=t,this.Dr=e}return t.prototype.Er=function(t,e,n){return Li(t).put(ji(e),n)},t.prototype.Ar=function(t,e){var n=Li(t),r=ji(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Jo(t,r)}))},t.prototype.Rr=function(t,e){var n=this;return Li(t).get(ji(e)).next((function(t){return n.Xo(t)}))},t.prototype.Zo=function(t,e){var n=this;return Li(t).get(ji(e)).next((function(t){var e=n.Xo(t);return e?{ta:e,size:Fi(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=kt();return this.ea(t,e,(function(t,e){var i=n.Xo(e);r=r.ot(t,i)})).next((function(){return r}))},t.prototype.na=function(t,e){var n=this,r=kt(),i=new Et(R.i);return this.ea(t,e,(function(t,e){var o=n.Xo(e);o?(r=r.ot(t,o),i=i.ot(t,Fi(e))):(r=r.ot(t,null),i=i.ot(t,0))})).next((function(){return{sa:r,ia:i}}))},t.prototype.ea=function(t,e,n){if(e.m())return mr.resolve();var r=IDBKeyRange.bound(e.first().path.A(),e.last().path.A()),i=e._t(),o=i.It();return Li(t).rs({range:r},(function(t,e,r){for(var s=R.$(t);o&&R.i(o,s)<0;)n(o,null),o=i.It();o&&o.isEqual(s)&&(n(o,e),o=i.At()?i.It():null),o?r.Xn(o.path.A()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.It():null}))},t.prototype.Lr=function(t,e,n){var r=this,i=Dt(),o=e.path.length+1,s={};if(n.isEqual(ut.min())){var a=e.path.A();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.A(),c=bi(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=$i.collectionReadTimeIndex}return Li(t).rs(s,(function(t,n,s){if(t.length===o){var a=gi(r.serializer,n);e.path.T(a.key.path)?a instanceof Cn&&Qn(e,a)&&(i=i.ot(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.ra=function(t){return new Ci(this,!!t&&t.oa)},t.prototype.aa=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return xi(t).get(Xi.key).next((function(t){return b(!!t),t}))},t.prototype.Jo=function(t,e){return xi(t).put(Xi.key,e)},t.prototype.Xo=function(t){if(t){var e=gi(this.serializer,t);return e instanceof xn&&e.version.isEqual(ut.min())?null:e}return null},t}(),Ci=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ca=e,r.oa=n,r.ua=new st((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return r.__extends(e,t),e.prototype.yr=function(t){var e=this,n=[],r=0,i=new St((function(t,e){return J(t.R(),e.R())}));return this.wr.forEach((function(o,s){var a=e.ua.get(o);if(s){var u=mi(e.ca.serializer,s,e.readTime);i=i.add(o.path.h());var c=Fi(u);r+=c-a,n.push(e.ca.Er(t,o,u))}else if(r-=a,e.oa){var l=mi(e.ca.serializer,new xn(o,ut.min()),e.readTime);n.push(e.ca.Er(t,o,l))}else n.push(e.ca.Ar(t,o))})),i.forEach((function(r){n.push(e.ca.Dr.Mo(t,r))})),n.push(this.ca.updateMetadata(t,r)),mr.$n(n)},e.prototype.gr=function(t,e){var n=this;return this.ca.Zo(t,e).next((function(t){return null===t?(n.ua.set(e,0),null):(n.ua.set(e,t.size),t.ta)}))},e.prototype.Pr=function(t,e){var n=this;return this.ca.na(t,e).next((function(t){var e=t.sa;return t.ia.forEach((function(t,e){n.ua.set(t,e)})),e}))},e}(ei);function xi(t){return fo.Qn(t,Xi.store)}function Li(t){return fo.Qn(t,$i.store)}function ji(t){return t.path.A()}function Fi(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw m();e=t.noDocument}return JSON.stringify(e).length}var Mi=function(){function t(){this.ha=new Ui}return t.prototype.Mo=function(t,e){return this.ha.add(e),mr.resolve()},t.prototype.Qr=function(t,e){return mr.resolve(this.ha.getEntries(e))},t}(),Ui=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t._(),n=t.h(),r=this.index[e]||new St(A.i),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t._(),n=t.h(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new St(A.i)).A()},t}(),Vi=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;b(n<r&&n>=0&&r<=10);var o=new Er("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Bi.store)}(t),function(t){t.createObjectStore(Gi.store,{keyPath:Gi.keyPath}),t.createObjectStore(Hi.store,{keyPath:Hi.keyPath,autoIncrement:!0}).createIndex(Hi.userMutationsIndex,Hi.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Wi.store)}(t),to(t),function(t){t.createObjectStore($i.store)}(t));var s=mr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Yi.store),t.deleteObjectStore(Ji.store),t.deleteObjectStore(Qi.store)}(t),to(t)),s=s.next((function(){return function(t){var e=t.store(Qi.store),n=new Qi(0,0,ut.min().Z(),0);return e.put(Qi.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Hi.store).ts().next((function(n){t.deleteObjectStore(Hi.store),t.createObjectStore(Hi.store,{keyPath:Hi.keyPath,autoIncrement:!0}).createIndex(Hi.userMutationsIndex,Hi.userMutationsKeyPath,{unique:!0});var r=e.store(Hi.store),i=n.map((function(t){return r.put(t)}));return mr.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(eo.store,{keyPath:eo.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Xi.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore($i.store);e.createIndex($i.readTimeIndex,$i.readTimeIndexPath,{unique:!1}),e.createIndex($i.collectionReadTimeIndex,$i.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store($i.store).rs((function(t,n){e+=Fi(n)})).next((function(){var n=new Xi(e);return t.store(Xi.store).put(Xi.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Gi.store),r=t.store(Hi.store);return n.ts().next((function(n){return mr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(Hi.userMutationsIndex,i).next((function(r){return mr.forEach(r,(function(r){b(r.userId===n.userId);var i=Ei(e.serializer,r);return Ri(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Yi.store),n=t.store($i.store);return t.store(Qi.store).get(Qi.key).next((function(t){var r=[];return n.rs((function(n,i){var o=new A(n),s=function(t){return[0,fi(t)]}(o);r.push(e.get(s).next((function(n){return n?mr.resolve():function(n){return e.put(new Yi(0,fi(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return mr.$n(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Zi.store,{keyPath:Zi.keyPath});var n=e.store(Zi.store),r=new Ui,i=function(t){if(r.add(t)){var e=t._(),i=t.h();return n.put({collectionId:e,parent:fi(i)})}};return e.store($i.store).rs({ss:!0},(function(t,e){var n=new A(t);return i(n.h())})).next((function(){return e.store(Wi.store).rs({ss:!0},(function(t,e){t[0];var n=t[1],r=(t[2],vi(n));return i(r.h())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Ji.store);return n.rs((function(t,r){var i=Ti(r),o=Ai(e.serializer,i);return n.put(o)}))},t}(),qi=function(t,e){this.seconds=t,this.nanoseconds=e},Bi=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Bi.store="owner",Bi.key="owner";var Gi=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Gi.store="mutationQueues",Gi.keyPath="userId";var Hi=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Hi.store="mutations",Hi.keyPath="batchId",Hi.userMutationsIndex="userMutationsIndex",Hi.userMutationsKeyPath=["userId","batchId"];var Wi=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,fi(e)]},t.key=function(t,e,n){return[t,fi(e),n]},t}();Wi.store="documentMutations",Wi.PLACEHOLDER=new Wi;var zi=function(t,e){this.path=t,this.readTime=e},Ki=function(t,e){this.path=t,this.version=e},$i=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};$i.store="remoteDocuments",$i.readTimeIndex="readTimeIndex",$i.readTimeIndexPath="readTime",$i.collectionReadTimeIndex="collectionReadTimeIndex",$i.collectionReadTimeIndexPath=["parentPath","readTime"];var Xi=function(t){this.byteSize=t};Xi.store="remoteDocumentGlobal",Xi.key="remoteDocumentGlobalKey";var Ji=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Ji.store="targets",Ji.keyPath="targetId",Ji.queryTargetsIndexName="queryTargetsIndex",Ji.queryTargetsKeyPath=["canonicalId","targetId"];var Yi=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Yi.store="targetDocuments",Yi.keyPath=["targetId","path"],Yi.documentTargetsIndex="documentTargetsIndex",Yi.documentTargetsKeyPath=["path","targetId"];var Qi=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Qi.key="targetGlobalKey",Qi.store="targetGlobal";var Zi=function(t,e){this.collectionId=t,this.parent=e};function to(t){t.createObjectStore(Yi.store,{keyPath:Yi.keyPath}).createIndex(Yi.documentTargetsIndex,Yi.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ji.store,{keyPath:Ji.keyPath}).createIndex(Ji.queryTargetsIndexName,Ji.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Qi.store)}Zi.store="collectionParents",Zi.keyPath=["collectionId","parent"];var eo=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};eo.store="clientMetadata",eo.keyPath="clientId";var no=r.__spreadArrays(r.__spreadArrays(r.__spreadArrays([Gi.store,Hi.store,Wi.store,$i.store,Ji.store,Bi.store,Qi.store,Yi.store],[eo.store]),[Xi.store]),[Zi.store]),ro=function(){function t(){this.la=new Ui}return t.prototype.Mo=function(t,e){var n=this;if(!this.la.has(e)){var r=e._(),i=e.h();t.pr((function(){n.la.add(e)}));var o={collectionId:r,parent:fi(i)};return io(t).put(o)}return mr.resolve()},t.prototype.Qr=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Q(e),""],!1,!0);return io(t).ts(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(vi(o.parent))}return n}))},t}();function io(t){return fo.Qn(t,Zi.store)}var oo=function(){function t(t){this._a=t}return t.prototype.next=function(){return this._a+=2,this._a},t.fa=function(){return new t(0)},t.da=function(){return new t(-1)},t}(),so=function(){function t(t,e){this.No=t,this.serializer=e}return t.prototype.wa=function(t){var e=this;return this.ma(t).next((function(n){var r=new oo(n.highestTargetId);return n.highestTargetId=r.next(),e.Ta(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ea=function(t){return this.ma(t).next((function(t){return ut.J(new at(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ia=function(t){return this.ma(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Aa=function(t,e,n){var r=this;return this.ma(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.Z()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ta(t,i)}))},t.prototype.Ra=function(t,e){var n=this;return this.ga(t,e).next((function(){return n.ma(t).next((function(r){return r.targetCount+=1,n.Pa(e,r),n.Ta(t,r)}))}))},t.prototype.ya=function(t,e){return this.ga(t,e)},t.prototype.Va=function(t,e){var n=this;return this.pa(t,e.targetId).next((function(){return ao(t).delete(e.targetId)})).next((function(){return n.ma(t)})).next((function(e){return b(e.targetCount>0),e.targetCount-=1,n.Ta(t,e)}))},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return ao(t).rs((function(s,a){var u=Ti(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Va(t,u)))})).next((function(){return mr.$n(o)})).next((function(){return i}))},t.prototype.Ce=function(t,e){return ao(t).rs((function(t,n){var r=Ti(n);e(r)}))},t.prototype.ma=function(t){return uo(t).get(Qi.key).next((function(t){return b(null!==t),t}))},t.prototype.Ta=function(t,e){return uo(t).put(Qi.key,e)},t.prototype.ga=function(t,e){return ao(t).put(Ai(this.serializer,e))},t.prototype.Pa=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.ba=function(t){return this.ma(t).next((function(t){return t.targetCount}))},t.prototype.va=function(t,e){var n=dt(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ao(t).rs({range:r,index:Ji.queryTargetsIndexName},(function(t,n,r){var o=Ti(n);vt(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Sa=function(t,e,n){var r=this,i=[],o=co(t);return e.forEach((function(e){var s=fi(e.path);i.push(o.put(new Yi(n,s))),i.push(r.No.Da(t,n,e))})),mr.$n(i)},t.prototype.Ca=function(t,e,n){var r=this,i=co(t);return mr.forEach(e,(function(e){var o=fi(e.path);return mr.$n([i.delete([n,o]),r.No.Na(t,n,e)])}))},t.prototype.pa=function(t,e){var n=co(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Fa=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=co(t),i=Lt();return r.rs({range:n,ss:!0},(function(t,e,n){var r=vi(t[1]),o=new R(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Ho=function(t,e){var n=fi(e.path),r=IDBKeyRange.bound([n],[Q(n)],!1,!0),i=0;return co(t).rs({index:Yi.documentTargetsIndex,ss:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ue=function(t,e){return ao(t).get(e).next((function(t){return t?Ti(t):null}))},t}();function ao(t){return fo.Qn(t,Ji.store)}function uo(t){return fo.Qn(t,Qi.store)}function co(t){return fo.Qn(t,Yi.store)}var lo="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ho=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jo=e,r.xa=n,r}return r.__extends(e,t),e}(ri),fo=function(){function t(e,n,r,i,o,s,a,u,c,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.fn=o,this.window=s,this.document=a,this.$a=c,this.ka=f,this.Ma=null,this.Oa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Qa=function(t){return Promise.resolve()},!t.Ln())throw new h(l.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new yo(this,i),this.Wa=n+"main",this.serializer=new yi(u),this.ja=new br(this.Wa,10,new Vi(this.serializer)),this.Ka=new so(this.No,this.serializer),this.Dr=new ro,this.vr=function(t,e){return new Di(t,e)}(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===f&&v("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Qn=function(t,e){if(t instanceof ho)return br.Qn(t.jo,e);throw m()},t.prototype.start=function(){var t=this;return this.za().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new h(l.FAILED_PRECONDITION,lo);return t.Ha(),t.Ya(),t.Ja(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Ka.Ia(e)}))})).then((function(e){t.Ma=new Br(e,t.$a)})).then((function(){t.Oa=!0})).catch((function(e){return t.ja&&t.ja.close(),Promise.reject(e)}))},t.prototype.Xa=function(t){var e=this;return this.Qa=function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.Ei?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Za=function(t){var e=this;this.ja.Kn((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.tc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.Ei?[4,this.za()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.za=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return vo(e).put(new eo(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.ec(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.Qa(!1)})))}))})).next((function(){return t.nc(e)})).next((function(n){return t.isPrimary&&!n?t.sc(e).next((function(){return!1})):!!n&&t.ic(e).next((function(){return!0}))}))})).catch((function(e){if(Ir(e))return d("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return d("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.Qa(e)})),t.isPrimary=e}))},t.prototype.ec=function(t){var e=this;return po(t).get(Bi.key).next((function(t){return mr.resolve(e.rc(t))}))},t.prototype.oc=function(t){return vo(t).delete(this.clientId)},t.prototype.ac=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o,s=this;return r.__generator(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.cc(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Qn(e,eo.store);return n.ts().next((function(t){var e=s.uc(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return mr.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.Ga)for(n=0,i=e;n<i.length;n++)o=i[n],this.Ga.removeItem(this.hc(o.clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.Ja=function(){var t=this;this.qa=this.fn.yn("client_metadata_refresh",4e3,(function(){return t.za().then((function(){return t.ac()})).then((function(){return t.Ja()}))}))},t.prototype.rc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.nc=function(t){var e=this;return this.ka?mr.resolve(!0):po(t).get(Bi.key).next((function(n){if(null!==n&&e.cc(n.leaseTimestampMs,5e3)&&!e.lc(n.ownerId)){if(e.rc(n)&&e.networkEnabled)return!0;if(!e.rc(n)){if(!n.allowTabSynchronization)throw new h(l.FAILED_PRECONDITION,lo);return!1}}return!(!e.networkEnabled||!e.inForeground)||vo(t).ts().next((function(t){return void 0===e.uc(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&d("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Di=function(){return r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(e){switch(e.label){case 0:return this.Oa=!1,this._c(),this.qa&&(this.qa.cancel(),this.qa=null),this.fc(),this.dc(),[4,this.ja.runTransaction("shutdown","readwrite",[Bi.store,eo.store],(function(e){var n=new ho(e,Br.ai);return t.sc(n).next((function(){return t.oc(n)}))}))];case 1:return e.sent(),this.ja.close(),this.wc(),[2]}}))}))},t.prototype.uc=function(t,e){var n=this;return t.filter((function(t){return n.cc(t.updateTimeMs,e)&&!n.lc(t.clientId)}))},t.prototype.pi=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return vo(e).ts().next((function(e){return t.uc(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),t.prototype.mc=function(t){return Si.xo(t,this.serializer,this.Dr,this.No)},t.prototype.Tc=function(){return this.Ka},t.prototype.Ec=function(){return this.vr},t.prototype.Ic=function(){return this.Dr},t.prototype.runTransaction=function(t,e,n){var r=this;d("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.ja.runTransaction(t,o,no,(function(o){return i=new ho(o,r.Ma?r.Ma.next():Br.ai),"readwrite-primary"===e?r.ec(i).next((function(t){return!!t||r.nc(i)})).next((function(e){if(!e)throw v("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.fn.Cs((function(){return r.Qa(!1)})),new h(l.FAILED_PRECONDITION,ni);return n(i)})).next((function(t){return r.ic(i).next((function(){return t}))})):r.Ac(i).next((function(){return n(i)}))})).then((function(t){return i.br(),t}))},t.prototype.Ac=function(t){var e=this;return po(t).get(Bi.key).next((function(t){if(null!==t&&e.cc(t.leaseTimestampMs,5e3)&&!e.lc(t.ownerId)&&!e.rc(t)&&!(e.ka||e.allowTabSynchronization&&t.allowTabSynchronization))throw new h(l.FAILED_PRECONDITION,lo)}))},t.prototype.ic=function(t){var e=new Bi(this.clientId,this.allowTabSynchronization,Date.now());return po(t).put(Bi.key,e)},t.Ln=function(){return br.Ln()},t.prototype.sc=function(t){var e=this,n=po(t);return n.get(Bi.key).next((function(t){return e.rc(t)?(d("IndexedDbPersistence","Releasing primary lease."),n.delete(Bi.key)):mr.resolve()}))},t.prototype.cc=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(v("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ha=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.za()}))},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},t.prototype.fc=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},t.prototype.Ya=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){e._c(),e.fn.ws((function(){return e.Di()}))},this.window.addEventListener("unload",this.La))},t.prototype.dc=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},t.prototype.lc=function(t){var e;try{var n=null!==(null===(e=this.Ga)||void 0===e?void 0:e.getItem(this.hc(t)));return d("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return v("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype._c=function(){if(this.Ga)try{this.Ga.setItem(this.hc(this.clientId),String(Date.now()))}catch(t){v("Failed to set zombie client id.",t)}},t.prototype.wc=function(){if(this.Ga)try{this.Ga.removeItem(this.hc(this.clientId))}catch(t){}},t.prototype.hc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function po(t){return fo.Qn(t,Bi.store)}function vo(t){return fo.Qn(t,eo.store)}var yo=function(){function t(t,e){this.db=t,this.wo=new hi(this,e)}return t.prototype.Po=function(t){var e=this.Rc(t);return this.db.Tc().ba(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Rc=function(t){var e=0;return this.Vo(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Tc().Ce(t,e)},t.prototype.Vo=function(t,e){return this.gc(t,(function(t,n){return e(n)}))},t.prototype.Da=function(t,e,n){return go(t,n)},t.prototype.Na=function(t,e,n){return go(t,n)},t.prototype.po=function(t,e,n){return this.db.Tc().po(t,e,n)},t.prototype.Go=function(t,e){return go(t,e)},t.prototype.Pc=function(t,e){return function(t,e){var n=!1;return Pi(t).os((function(r){return Ni(t,r,e).next((function(t){return t&&(n=!0),mr.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.bo=function(t,e){var n=this,r=this.db.Ec().ra(),i=[],o=0;return this.gc(t,(function(s,a){if(a<=e){var u=n.Pc(t,s).next((function(e){if(!e)return o++,r.Rr(t,s).next((function(){return r.Ar(s),co(t).delete([0,fi(s.path)])}))}));i.push(u)}})).next((function(){return mr.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.xa);return this.db.Tc().ya(t,n)},t.prototype.yc=function(t,e){return go(t,e)},t.prototype.gc=function(t,e){var n,r=co(t),i=Br.ai;return r.rs({index:Yi.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==Br.ai&&e(new R(vi(n)),i),i=a,n=s):i=Br.ai})).next((function(){i!==Br.ai&&e(new R(vi(n)),i)}))},t.prototype.So=function(t){return this.db.Ec().aa(t)},t}();function go(t,e){return co(t).put(function(t,e){return new Yi(0,fi(t.path),e)}(e,t.xa))}function mo(t,e){var n=t.projectId;return t.j||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var bo=function(){function t(t,e,n){this.persistence=t,this.Vc=e,this.bc=new Et(J),this.vc=new st((function(t){return dt(t)}),vt),this.Sc=ut.min(),this.Sr=t.mc(n),this.Dc=t.Ec(),this.Ka=t.Tc(),this.Cc=new ii(this.Dc,this.Sr,this.persistence.Ic()),this.Vc.Nc(this.Cc)}return t.prototype.Io=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.vo(n,e.bc)}))},t}();function wo(t,e){var n=w(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Dc.ra({oa:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=mr.resolve();return o.forEach((function(t){s=s.next((function(){return r.Rr(e,t)})).next((function(e){var o=e,s=n.dr.get(t);b(null!==s),(!o||o.version.L(s)<0)&&(o=i.cr(t,o,n))&&r.Er(o,n._r)}))})),s.next((function(){return t.Sr.Wo(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Cc.kr(t,r)}))}))}function _o(t){var e=w(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Ka.Ea(t)}))}function Io(t,e){var n=w(t),r=e.nt,i=n.bc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Dc.ra({oa:!0});i=n.bc;var s=[];e.zt.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.Ka.Ca(t,e.se,o).next((function(){return n.Ka.Sa(t,e.ee,o)})));var u=e.resumeToken;if(u.O()>0){var c=a.it(u,r).st(t.xa);i=i.ot(o,c),function(t,e,n){return b(e.resumeToken.O()>0),0===t.resumeToken.O()||e.nt.X()-t.nt.X()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(a,c,e)&&s.push(n.Ka.ya(t,c))}}}));var a=Ot(),u=Lt();if(e.Yt.forEach((function(t,e){u=u.add(t)})),s.push(o.getEntries(t,u).next((function(i){e.Yt.forEach((function(u,c){var l=i.get(u);c instanceof xn&&c.version.isEqual(ut.min())?(o.Ar(u,r),a=a.ot(u,c)):null==l||c.version.L(l.version)>0||0===c.version.L(l.version)&&l.hasPendingWrites?(o.Er(c,r),a=a.ot(u,c)):d("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.Jt.has(u)&&s.push(n.persistence.No.yc(t,u))}))}))),!r.isEqual(ut.min())){var c=n.Ka.Ea(t).next((function(e){return n.Ka.Aa(t,t.xa,r)}));s.push(c)}return mr.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Cc.Mr(t,a)}))})).then((function(t){return n.bc=i,t}))}function Eo(t,e){var n=w(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Sr.Bo(t,e)}))}function To(t,e){var n=w(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Ka.va(t,e).next((function(i){return i?(r=i,mr.resolve(r)):n.Ka.wa(t).next((function(i){return r=new bt(e,i,0,t.xa),n.Ka.Ra(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.bc.get(t.targetId);return(null===r||t.nt.L(r.nt)>0)&&(n.bc=n.bc.ot(t.targetId,t),n.vc.set(e,t.targetId)),t}))}function Ao(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,a;return r.__generator(this,(function(r){switch(r.label){case 0:i=w(t),o=i.bc.get(e),s=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.No.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!Ir(a=r.sent()))throw a;return d("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return i.bc=i.bc.remove(e),i.vc.delete(o.target),[2]}}))}))}function So(t,e,n){var r=w(t),i=ut.min(),o=Lt();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=w(t),i=r.vc.get(n);return void 0!==i?mr.resolve(r.bc.get(i)):r.Ka.va(e,n)}(r,t,Wn(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ka.Fa(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Vc.Lr(t,e,n?i:ut.min(),n?o:Lt())})).next((function(t){return{documents:t,Fc:o}}))}))}function No(t,e){var n=w(t),r=w(n.Ka),i=n.bc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ue(t,e).next((function(t){return t?t.target:null}))}))}function Ro(t){var e=w(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=w(t),i=Ot(),o=bi(n),s=Li(e),a=IDBKeyRange.lowerBound(o,!0);return s.rs({index:$i.readTimeIndex,range:a},(function(t,e){var n=gi(r.serializer,e);i=i.ot(n.key,n),o=e.readTime})).next((function(){return{xc:i,readTime:wi(o)}}))}(e.Dc,t,e.Sc)})).then((function(t){var n=t.xc,r=t.readTime;return e.Sc=r,n}))}function Oo(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){return[2,(e=w(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Li(t),n=ut.min();return e.rs({index:$i.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=wi(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Sc=t}))]}))}))}function ko(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){if(t.code!==l.FAILED_PRECONDITION||t.message!==ni)throw t;return d("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Po=function(){function t(){this.$c=new St(Do.kc),this.Mc=new St(Do.Oc)}return t.prototype.m=function(){return this.$c.m()},t.prototype.Da=function(t,e){var n=new Do(t,e);this.$c=this.$c.add(n),this.Mc=this.Mc.add(n)},t.prototype.Lc=function(t,e){var n=this;t.forEach((function(t){return n.Da(t,e)}))},t.prototype.Na=function(t,e){this.Bc(new Do(t,e))},t.prototype.qc=function(t,e){var n=this;t.forEach((function(t){return n.Na(t,e)}))},t.prototype.Uc=function(t){var e=this,n=new R(new A([])),r=new Do(n,t),i=new Do(n,t+1),o=[];return this.Mc.Ft([r,i],(function(t){e.Bc(t),o.push(t.key)})),o},t.prototype.Qc=function(){var t=this;this.$c.forEach((function(e){return t.Bc(e)}))},t.prototype.Bc=function(t){this.$c=this.$c.delete(t),this.Mc=this.Mc.delete(t)},t.prototype.Wc=function(t){var e=new R(new A([])),n=new Do(e,t),r=new Do(e,t+1),i=Lt();return this.Mc.Ft([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Ho=function(t){var e=new Do(t,0),n=this.$c.$t(e);return null!==n&&t.isEqual(n.key)},t}(),Do=function(){function t(t,e){this.key=t,this.jc=e}return t.kc=function(t,e){return R.i(t.key,e.key)||J(t.jc,e.jc)},t.Oc=function(t,e){return J(t.jc,e.jc)||R.i(t.key,e.key)},t}(),Co=function(t,e){this.user=e,this.type="OAuth",this.Kc={},this.Kc.Authorization="Bearer "+t},xo=function(){function t(){this.Gc=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.zc=function(){},t.prototype.Hc=function(t){this.Gc=t,t(qr.UNAUTHENTICATED)},t.prototype.Yc=function(){this.Gc=null},t}(),Lo=function(){function t(t){var e=this;this.Jc=null,this.currentUser=qr.UNAUTHENTICATED,this.Xc=!1,this.Zc=0,this.Gc=null,this.forceRefresh=!1,this.Jc=function(){e.Zc++,e.currentUser=e.tu(),e.Xc=!0,e.Gc&&e.Gc(e.currentUser)},this.Zc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Jc):(this.Jc(null),t.get().then((function(t){e.auth=t,e.Jc&&e.auth.addAuthTokenListener(e.Jc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Zc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Zc!==e?(d("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(b("string"==typeof n.accessToken),new Co(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.zc=function(){this.forceRefresh=!0},t.prototype.Hc=function(t){this.Gc=t,this.Xc&&t(this.currentUser)},t.prototype.Yc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Jc),this.Jc=null,this.Gc=null},t.prototype.tu=function(){var t=this.auth&&this.auth.getUid();return b(null===t||"string"==typeof t),new qr(t)},t}(),jo=function(){function t(t,e){this.eu=t,this.nu=e,this.type="FirstParty",this.user=qr.ni}return Object.defineProperty(t.prototype,"Kc",{get:function(){var t={"X-Goog-AuthUser":this.nu},e=this.eu.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Fo=function(){function t(t,e){this.eu=t,this.nu=e}return t.prototype.getToken=function(){return Promise.resolve(new jo(this.eu,this.nu))},t.prototype.Hc=function(t){t(qr.ni)},t.prototype.Yc=function(){},t.prototype.zc=function(){},t}(),Mo=function(){function t(t,e,n,r,i,o){this.fn=t,this.su=n,this.iu=r,this.ru=i,this.listener=o,this.state=0,this.ou=0,this.au=null,this.stream=null,this.ys=new gr(t,e)}return t.prototype.cu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.uu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.hu()},t.prototype.stop=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.cu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.lu=function(){this.state=0,this.ys.reset()},t.prototype._u=function(){var t=this;this.uu()&&null===this.au&&(this.au=this.fn.yn(this.su,6e4,(function(){return t.fu()})))},t.prototype.du=function(t){this.wu(),this.stream.send(t)},t.prototype.fu=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.uu()?[2,this.close(0)]:[2]}))}))},t.prototype.wu=function(){this.au&&(this.au.cancel(),this.au=null)},t.prototype.close=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return this.wu(),this.ys.cancel(),this.ou++,3!==t?this.ys.reset():e&&e.code===l.RESOURCE_EXHAUSTED?(v(e.toString()),v("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):e&&e.code===l.UNAUTHENTICATED&&this.ru.zc(),null!==this.stream&&(this.mu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.mu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.Eu(this.ou),n=this.ou;this.ru.getToken().then((function(e){t.ou===n&&t.Iu(e)}),(function(n){e((function(){var e=new h(l.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Au(e)}))}))},t.prototype.Iu=function(t){var e=this,n=this.Eu(this.ou);this.stream=this.Ru(t),this.stream.gu((function(){n((function(){return e.state=2,e.listener.gu()}))})),this.stream.Tu((function(t){n((function(){return e.Au(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.hu=function(){var t=this;this.state=4,this.ys.gn((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Au=function(t){return d("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Eu=function(t){var e=this;return function(n){e.fn.ws((function(){return e.ou===t?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Uo=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return r.__extends(e,t),e.prototype.Ru=function(t){return this.iu.Pu("Listen",t)},e.prototype.onMessage=function(t){this.ys.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:m()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Qe?(b(void 0===e||"string"==typeof e),Z.fromBase64String(e||"")):(b(void 0===e||e instanceof Uint8Array),Z.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?l.UNKNOWN:It(t.code);return new h(e,t.message||"")}(s);n=new Wt(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=Oe(t,u.document.name),f=Ae(u.document.updateTime),p=new On({mapValue:{fields:u.document.fields}}),d=new Cn(c,f,p,{}),v=u.targetIds||[],y=u.removedTargetIds||[];n=new Gt(v,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;var g=e.documentDelete;g.document;var w=Oe(t,g.document),_=g.readTime?Ae(g.readTime):ut.min(),I=new xn(w,_),E=g.removedTargetIds||[];n=new Gt([],E,I.key,I)}else if("documentRemove"in e){e.documentRemove;var T=e.documentRemove;T.document;var A=Oe(t,T.document),S=T.removedTargetIds||[];n=new Gt([],S,A,null)}else{if(!("filter"in e))return m();e.filter;var N=e.filter;N.targetId;var R=N.count||0,O=new wt(R),k=N.targetId;n=new Ht(k,O)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ut.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ut.min():e.readTime?Ae(e.readTime):ut.min()}(t);return this.listener.yu(e,n)},e.prototype.Vu=function(t){var e={};e.database=De(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=yt(r)?{documents:Fe(t,r)}:{query:Me(t,r)}).targetId=e.targetId,e.resumeToken.O()>0&&(n.resumeToken=Ee(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return m()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.du(e)},e.prototype.pu=function(t){var e={};e.database=De(this.serializer),e.removeTarget=t,this.du(e)},e}(Mo),Vo=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.bu=!1,s}return r.__extends(e,t),Object.defineProperty(e.prototype,"vu",{get:function(){return this.bu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.bu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mu=function(){this.bu&&this.Su([])},e.prototype.Ru=function(t){return this.iu.Pu("Write",t)},e.prototype.onMessage=function(t){if(b(!!t.streamToken),this.lastStreamToken=t.streamToken,this.bu){this.ys.reset();var e=function(t,e){return t&&t.length>0?(b(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Ae(t.updateTime):Ae(e);n.isEqual(ut.min())&&(n=Ae(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new fn(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Ae(t.commitTime);return this.listener.Du(n,e)}return b(!t.writeResults||0===t.writeResults.length),this.bu=!0,this.listener.Cu()},e.prototype.Nu=function(){var t={};t.database=De(this.serializer),this.du(t)},e.prototype.Su=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Le(e.serializer,t)}))};this.du(n)},e}(Mo),qo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.iu=n,i.serializer=r,i.Fu=!1,i}return r.__extends(e,t),e.prototype.xu=function(){if(this.Fu)throw new h(l.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.$u=function(t,e,n){var r=this;return this.xu(),this.credentials.getToken().then((function(i){return r.iu.$u(t,e,n,i)})).catch((function(t){throw t.code===l.UNAUTHENTICATED&&r.credentials.zc(),t}))},e.prototype.ku=function(t,e,n){var r=this;return this.xu(),this.credentials.getToken().then((function(i){return r.iu.ku(t,e,n,i)})).catch((function(t){throw t.code===l.UNAUTHENTICATED&&r.credentials.zc(),t}))},e.prototype.terminate=function(){this.Fu=!1},e}((function(){})),Bo=function(){function t(t,e){this.cs=t,this.di=e,this.state="Unknown",this.Mu=0,this.Ou=null,this.Lu=!0}return t.prototype.Bu=function(){var t=this;0===this.Mu&&(this.qu("Unknown"),this.Ou=this.cs.yn("online_state_timeout",1e4,(function(){return t.Ou=null,t.Uu("Backend didn't respond within 10 seconds."),t.qu("Offline"),Promise.resolve()})))},t.prototype.Qu=function(t){"Online"===this.state?this.qu("Unknown"):(this.Mu++,this.Mu>=1&&(this.Wu(),this.Uu("Connection failed 1 times. Most recent error: "+t.toString()),this.qu("Offline")))},t.prototype.set=function(t){this.Wu(),this.Mu=0,"Online"===t&&(this.Lu=!1),this.qu(t)},t.prototype.qu=function(t){t!==this.state&&(this.state=t,this.di(t))},t.prototype.Uu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Lu?(v(e),this.Lu=!1):d("OnlineStateTracker",e)},t.prototype.Wu=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t}(),Go=function(t,e,n,i,o){var s=this;this.ju=t,this.Ku=e,this.cs=n,this.Gu={},this.zu=[],this.Hu=new Map,this.Yu=new Set,this.Ju=[],this.Xu=o,this.Xu.Zu((function(t){n.ws((function(){return r.__awaiter(s,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return Zo(this)?(d("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=w(t)).Yu.add(4),[4,Wo(e)];case 1:return n.sent(),e.th.set("Unknown"),e.Yu.delete(4),[4,Ho(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.th=new Bo(n,i)};function Ho(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:if(!Zo(t))return[3,4];e=0,n=t.Ju,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Wo(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:e=0,n=t.Ju,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function zo(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return e=w(t),d("RemoteStore","RemoteStore shutting down."),e.Yu.add(5),[4,Wo(e)];case 1:return n.sent(),e.Xu.Di(),e.th.set("Unknown"),[2]}}))}))}function Ko(t,e){var n=w(t);n.Hu.has(e.targetId)||(n.Hu.set(e.targetId,e),Qo(n)?Yo(n):ds(n).uu()&&Xo(n,e))}function $o(t,e){var n=w(t),r=ds(n);n.Hu.delete(e),r.uu()&&Jo(n,e),0===n.Hu.size&&(r.uu()?r._u():Zo(n)&&n.th.set("Unknown"))}function Xo(t,e){t.eh.Ie(e.targetId),ds(t).Vu(e)}function Jo(t,e){t.eh.Ie(e),ds(t).pu(e)}function Yo(t){t.eh=new Kt({qe:function(e){return t.Gu.qe(e)},Ue:function(e){return t.Hu.get(e)||null}}),ds(t).start(),t.th.Bu()}function Qo(t){return Zo(t)&&!ds(t).cu()&&t.Hu.size>0}function Zo(t){return 0===w(t).Yu.size}function ts(t){t.eh=void 0}function es(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return t.Hu.forEach((function(e,n){Xo(t,e)})),[2]}))}))}function ns(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){return ts(t),Qo(t)?(t.th.Qu(e),Yo(t)):t.th.set("Unknown"),[2]}))}))}function rs(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s;return r.__generator(this,(function(a){switch(a.label){case 0:if(t.th.set("Online"),!(e instanceof Wt&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?(s=o[i],t.Hu.has(s)?[4,t.Gu.nh(s,n)]:[3,3]):[3,5];case 2:r.sent(),t.Hu.delete(s),t.eh.removeTarget(s),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return i=a.sent(),d("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,is(t,i)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Gt?t.eh.be(e):e instanceof Ht?t.eh.$e(e):t.eh.De(e),n.isEqual(ut.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,_o(t.ju)];case 8:return o=a.sent(),n.L(o)>=0?[4,function(t,e){var n=t.eh.Oe(e);return n.zt.forEach((function(n,r){if(n.resumeToken.O()>0){var i=t.Hu.get(r);i&&t.Hu.set(r,i.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Hu.get(e);if(n){t.Hu.set(e,n.it(Z.B,n.nt)),Jo(t,e);var r=new bt(n.target,e,1,n.sequenceNumber);Xo(t,r)}})),t.Gu.sh(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return d("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,is(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function is(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i=this;return r.__generator(this,(function(o){switch(o.label){case 0:if(!Ir(e))throw e;return t.Yu.add(1),[4,Wo(t)];case 1:return o.sent(),t.th.set("Offline"),n||(n=function(){return _o(t.ju)}),t.cs.Cs((function(){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return d("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Yu.delete(1),[4,Ho(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function os(t,e){return e().catch((function(n){return is(t,n,e)}))}function ss(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:e=w(t),n=vs(e),i=e.zu.length>0?e.zu[e.zu.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return Zo(t)&&t.zu.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Eo(e.ju,i)];case 3:return null===(o=r.sent())?(0===e.zu.length&&n._u(),[3,7]):(i=o.batchId,function(t,e){t.zu.push(e);var n=vs(t);n.uu()&&n.vu&&n.Su(e.mutations)}(e,o),[3,6]);case 4:return s=r.sent(),[4,is(e,s)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return as(e)&&us(e),[2]}}))}))}function as(t){return Zo(t)&&!vs(t).cu()&&t.zu.length>0}function us(t){vs(t).start()}function cs(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return vs(t).Nu(),[2]}))}))}function ls(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o;return r.__generator(this,(function(r){for(e=vs(t),n=0,i=t.zu;n<i.length;n++)o=i[n],e.Su(o.mutations);return[2]}))}))}function hs(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return i=t.zu.shift(),o=ti.from(i,e,n),[4,os(t,(function(){return t.Gu.ih(o)}))];case 1:return r.sent(),[4,ss(t)];case 2:return r.sent(),[2]}}))}))}function fs(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return e&&vs(t).vu?[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return _t(i=e.code)&&i!==l.ABORTED?(n=t.zu.shift(),vs(t).lu(),[4,os(t,(function(){return t.Gu.rh(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,ss(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return as(t)&&us(t),[2]}}))}))}function ps(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return n=w(t),e?(n.Yu.delete(2),[4,Ho(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Yu.add(2),[4,Wo(n)]);case 3:r.sent(),n.th.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function ds(t){var e=this;return t.oh||(t.oh=function(t,e,n){var r=w(t);return r.xu(),new Uo(e,r.iu,r.credentials,r.serializer,n)}(t.Ku,t.cs,{gu:es.bind(null,t),Tu:ns.bind(null,t),yu:rs.bind(null,t)}),t.Ju.push((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return n?(t.oh.lu(),Qo(t)?Yo(t):t.th.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.oh.stop()];case 2:e.sent(),ts(t),e.label=3;case 3:return[2]}}))}))}))),t.oh}function vs(t){var e=this;return t.ah||(t.ah=function(t,e,n){var r=w(t);return r.xu(),new Vo(e,r.iu,r.credentials,r.serializer,n)}(t.Ku,t.cs,{gu:cs.bind(null,t),Tu:fs.bind(null,t),Cu:ls.bind(null,t),Du:hs.bind(null,t)}),t.Ju.push((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return n?(t.ah.lu(),[4,ss(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.ah.stop()];case 3:e.sent(),t.zu.length>0&&(d("RemoteStore","Stopping write stream with "+t.zu.length+" pending writes"),t.zu=[]),e.label=4;case 4:return[2]}}))}))}))),t.ah}var ys=function(t){this.key=t},gs=function(t){this.key=t},ms=function(){function t(t,e){this.query=t,this.uh=e,this.hh=null,this.te=!1,this.lh=Lt(),this.Wt=Lt(),this._h=Zn(t),this.fh=new Mt(this._h)}return Object.defineProperty(t.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),t.prototype.wh=function(t,e){var n=this,r=e?e.mh:new Ut,i=e?e.fh:this.fh,o=e?e.Wt:this.Wt,s=i,a=!1,u=Un(this.query)&&i.size===this.query.limit?i.last():null,c=Vn(this.query)&&i.size===this.query.limit?i.first():null;if(t.ht((function(t,e){var l=i.get(t),h=e instanceof Cn?e:null;h&&(h=Qn(n.query,h)?h:null);var f=!!l&&n.Wt.has(l.key),p=!!h&&(h.Je||n.Wt.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Th(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n._h(h,u)>0||c&&n._h(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Un(this.query)||Vn(this.query))for(;s.size>this.query.limit;){var l=Un(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fh:s,mh:r,Eh:a,Wt:o}},t.prototype.Th=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.yr=function(t,e,n){var r=this,i=this.fh;this.fh=t.fh,this.Wt=t.Wt;var o=t.mh.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return m()}};return n(t)-n(e)}(t.type,e.type)||r._h(t.doc,e.doc)})),this.Ih(n);var s=e?this.Ah():[],a=0===this.lh.size&&this.te?1:0,u=a!==this.hh;return this.hh=a,0!==o.length||u?{snapshot:new Vt(this.query,t.fh,i,o,t.Wt,0===a,u,!1),Rh:s}:{Rh:s}},t.prototype.Qs=function(t){return this.te&&"Offline"===t?(this.te=!1,this.yr({fh:this.fh,mh:new Ut,Wt:this.Wt,Eh:!1},!1)):{Rh:[]}},t.prototype.gh=function(t){return!this.uh.has(t)&&!!this.fh.has(t)&&!this.fh.get(t).Je},t.prototype.Ih=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uh=e.uh.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uh=e.uh.delete(t)})),this.te=t.te)},t.prototype.Ah=function(){var t=this;if(!this.te)return[];var e=this.lh;this.lh=Lt(),this.fh.forEach((function(e){t.gh(e.key)&&(t.lh=t.lh.add(e.key))}));var n=[];return e.forEach((function(e){t.lh.has(e)||n.push(new gs(e))})),this.lh.forEach((function(t){e.has(t)||n.push(new ys(t))})),n},t.prototype.Ph=function(t){this.uh=t.Fc,this.lh=Lt();var e=this.wh(t.documents);return this.yr(e,!0)},t.prototype.yh=function(){return Vt.Gt(this.query,this.fh,this.Wt,0===this.hh)},t}(),bs=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ws=function(t){this.key=t,this.Vh=!1},_s=function(){function t(t,e,n,r,i,o){this.ju=t,this.ph=e,this.bh=n,this.Sh=r,this.currentUser=i,this.Dh=o,this.Ch={},this.Nh=new st((function(t){return Jn(t)}),Xn),this.Fh=new Map,this.xh=[],this.$h=new Et(R.i),this.kh=new Map,this.Mh=new Po,this.Oh={},this.Lh=new Map,this.Bh=oo.da(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(t.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),t}();function Is(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,a,u;return r.__generator(this,(function(r){switch(r.label){case 0:return n=$s(t),(s=n.Nh.get(e))?(i=s.targetId,n.Sh.Oi(i),o=s.view.yh(),[3,4]):[3,1];case 1:return[4,To(n.ju,Wn(e))];case 2:return a=r.sent(),u=n.Sh.Oi(a.targetId),i=a.targetId,[4,Es(n,e,i,"current"===u)];case 3:o=r.sent(),n.Uh&&Ko(n.ph,a),r.label=4;case 4:return[2,o]}}))}))}function Es(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,s,a,u,c,l;return r.__generator(this,(function(h){switch(h.label){case 0:return t.Qh=function(e,n,i){return function(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,s,a;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=e.view.wh(n)).Eh?[4,So(t.ju,e.query,!1).then((function(t){var n=t.documents;return e.view.wh(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return s=i&&i.zt.get(e.targetId),a=e.view.yr(o,t.Uh,s),[2,(xs(t,e.targetId,a.Rh),a.snapshot)]}}))}))}(t,e,n,i)},[4,So(t.ju,e,!0)];case 1:return o=h.sent(),s=new ms(e,o.Fc),a=s.wh(o.documents),u=Bt.Zt(n,i&&"Offline"!==t.onlineState),c=s.yr(a,t.Uh,u),xs(t,n,c.Rh),l=new bs(e,n,s),[2,(t.Nh.set(e,l),t.Fh.has(n)?t.Fh.get(n).push(e):t.Fh.set(n,[e]),c.snapshot)]}}))}))}function Ts(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=w(t),i=n.Nh.get(e),(o=n.Fh.get(i.targetId)).length>1?[2,(n.Fh.set(i.targetId,o.filter((function(t){return!Xn(t,e)}))),void n.Nh.delete(e))]:n.Uh?(n.Sh.Bi(i.targetId),n.Sh.Fi(i.targetId)?[3,2]:[4,Ao(n.ju,i.targetId,!1).then((function(){n.Sh.Ui(i.targetId),$o(n.ph,i.targetId),Ds(n,i.targetId)})).catch(ko)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return Ds(n,i.targetId),[4,Ao(n.ju,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function As(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:n=w(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Io(n.ju,e)];case 2:return i=r.sent(),e.zt.forEach((function(t,e){var r=n.kh.get(e);r&&(b(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?r.Vh=!0:t.ne.size>0?b(r.Vh):t.se.size>0&&(b(r.Vh),r.Vh=!1))})),[4,Fs(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,ko(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ss(t,e,n){var r=w(t);if(r.Uh&&0===n||!r.Uh&&1===n){var i=[];r.Nh.forEach((function(t,n){var r=n.view.Qs(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=w(t);n.onlineState=e;var r=!1;n.Bs.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Qs(e)&&(r=!0)})),r&&Ur(n)}(r.bh,e),i.length&&r.Ch.yu(i),r.onlineState=e,r.Uh&&r.Sh.Ki(e)}}function Ns(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,a,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:return(i=w(t)).Sh.Qi(e,"rejected",n),o=i.kh.get(e),(s=o&&o.key)?(a=(a=new Et(R.i)).ot(s,new xn(s,ut.min())),u=Lt().add(s),c=new qt(ut.min(),new Map,new St(J),a,u),[4,As(i,c)]):[3,2];case 1:return r.sent(),i.$h=i.$h.remove(s),i.kh.delete(e),js(i),[3,4];case 2:return[4,Ao(i.ju,e,!1).then((function(){return Ds(i,e,n)})).catch(ko)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function Rs(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:n=w(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,wo(n.ju,e)];case 2:return o=r.sent(),Ps(n,i,null),ks(n,i),n.Sh.ki(i,"acknowledged"),[4,Fs(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,ko(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Os(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:i=w(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=w(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Sr.Oo(t,e).next((function(e){return b(null!==e),r=e.keys(),n.Sr.Wo(t,e)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Cc.kr(t,r)}))}))}(i.ju,e)];case 2:return o=r.sent(),Ps(i,e,n),ks(i,e),i.Sh.ki(e,"rejected",n),[4,Fs(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,ko(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function ks(t,e){(t.Lh.get(e)||[]).forEach((function(t){t.resolve()})),t.Lh.delete(e)}function Ps(t,e,n){var r=w(t),i=r.Oh[r.currentUser.ti()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Oh[r.currentUser.ti()]=i}}function Ds(t,e,n){void 0===n&&(n=null),t.Sh.Bi(e);for(var r=0,i=t.Fh.get(e);r<i.length;r++){var o=i[r];t.Nh.delete(o),n&&t.Ch.Wh(o,n)}t.Fh.delete(e),t.Uh&&t.Mh.Uc(e).forEach((function(e){t.Mh.Ho(e)||Cs(t,e)}))}function Cs(t,e){var n=t.$h.get(e);null!==n&&($o(t.ph,n),t.$h=t.$h.remove(e),t.kh.delete(n),js(t))}function xs(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ys?(t.Mh.Da(o.key,e),Ls(t,o)):o instanceof gs?(d("SyncEngine","Document no longer in limbo: "+o.key),t.Mh.Na(o.key,e),t.Mh.Ho(o.key)||Cs(t,o.key)):m()}}function Ls(t,e){var n=e.key;t.$h.get(n)||(d("SyncEngine","New document in limbo: "+n),t.xh.push(n),js(t))}function js(t){for(;t.xh.length>0&&t.$h.size<t.Dh;){var e=t.xh.shift(),n=t.Bh.next();t.kh.set(n,new ws(e)),t.$h=t.$h.ot(e,n),Ko(t.ph,new bt(Wn(Mn(e.path)),n,2,Br.ai))}}function Fs(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,a;return r.__generator(this,(function(u){switch(u.label){case 0:return i=w(t),o=[],s=[],a=[],i.Nh.m()?[3,3]:(i.Nh.forEach((function(t,r){a.push(i.Qh(r,e,n).then((function(t){if(t){i.Uh&&i.Sh.Qi(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=oi.zr(r.targetId,t);s.push(e)}})))})),[4,Promise.all(a)]);case 1:return u.sent(),i.Ch.yu(o),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l,h;return r.__generator(this,(function(r){switch(r.label){case 0:n=w(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return mr.forEach(e,(function(e){return mr.forEach(e.Kr,(function(r){return n.persistence.No.Da(t,e.targetId,r)})).next((function(){return mr.forEach(e.Gr,(function(r){return n.persistence.No.Na(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!Ir(i=r.sent()))throw i;return d("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=e;o<s.length;o++)a=s[o],u=a.targetId,a.fromCache||(c=n.bc.get(u),l=c.nt,h=c.rt(l),n.bc=n.bc.ot(u,h));return[2]}}))}))}(i.ju,s)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Ms(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(o){switch(o.label){case 0:return(n=w(t)).currentUser.isEqual(e)?[3,3]:(d("SyncEngine","User change. New user:",e.ti()),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return n=w(t),i=n.Sr,o=n.Cc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n.Sr.Uo(t).next((function(s){return r=s,i=n.persistence.mc(e),o=new ii(n.Dc,i,n.persistence.Ic()),i.Uo(t)})).next((function(e){for(var n=[],i=[],s=Lt(),a=0,u=r;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];i.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return o.kr(t,s).next((function(t){return{jh:t,Kh:n,Gh:i}}))}))}))];case 1:return s=r.sent(),[2,(n.Sr=i,n.Cc=o,n.Vc.Nc(n.Cc),s)]}}))}))}(n.ju,e)]);case 1:return i=o.sent(),n.currentUser=e,function(t,e){t.Lh.forEach((function(t){t.forEach((function(t){t.reject(new h(l.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Lh.clear()}(n),n.Sh.ji(e,i.Kh,i.Gh),[4,Fs(n,i.jh)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function Us(t,e){var n=w(t),r=n.kh.get(e);if(r&&r.Vh)return Lt().add(r.key);var i=Lt(),o=n.Fh.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Nh.get(u);i=i.kt(c.view.dh)}return i}function Vs(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,So((n=w(t)).ju,e.query,!0)];case 1:return i=r.sent(),o=e.view.Ph(i),[2,(n.Uh&&xs(n,e.targetId,o.Rh),o)]}}))}))}function qs(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,function(t,e){var n=w(t),r=w(n.Sr);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Lo(t,e).next((function(e){return e?n.Cc.kr(t,e):mr.resolve(null)}))}))}((o=w(t)).ju,e)];case 1:return null===(s=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,ss(o.ph)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ps(o,e,i||null),ks(o,e),function(t,e){w(w(t).Sr).Ko(e)}(o.ju,e)):m(),r.label=4;case 4:return[4,Fs(o,s)];case 5:return r.sent(),[3,7];case 6:d("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function Bs(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l;return r.__generator(this,(function(r){switch(r.label){case 0:return $s(n=w(t)),Xs(n),!0!==e||!0===n.qh?[3,3]:(i=n.Sh.Ci(),[4,Gs(n,i.A())]);case 1:return o=r.sent(),n.qh=!0,[4,ps(n.ph,!0)];case 2:for(r.sent(),s=0,a=o;s<a.length;s++)u=a[s],Ko(n.ph,u);return[3,7];case 3:return!1!==e||!1===n.qh?[3,7]:(c=[],l=Promise.resolve(),n.Fh.forEach((function(t,e){n.Sh.qi(e)?c.push(e):l=l.then((function(){return Ds(n,e),Ao(n.ju,e,!0)})),$o(n.ph,e)})),[4,l]);case 4:return r.sent(),[4,Gs(n,c)];case 5:return r.sent(),function(t){var e=w(t);e.kh.forEach((function(t,n){$o(e.ph,n)})),e.Mh.Qc(),e.kh=new Map,e.$h=new Et(R.i)}(n),n.qh=!1,[4,ps(n.ph,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function Gs(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l,h,f,p,d,v,y;return r.__generator(this,(function(r){switch(r.label){case 0:n=w(t),i=[],o=[],s=0,a=e,r.label=1;case 1:return s<a.length?(u=a[s],c=void 0,(l=n.Fh.get(u))&&0!==l.length?[4,To(n.ju,Wn(l[0]))]:[3,7]):[3,13];case 2:c=r.sent(),h=0,f=l,r.label=3;case 3:return h<f.length?(p=f[h],d=n.Nh.get(p),[4,Vs(n,d)]):[3,6];case 4:(v=r.sent()).snapshot&&o.push(v.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,No(n.ju,u)];case 8:return y=r.sent(),[4,To(n.ju,y)];case 9:return c=r.sent(),[4,Es(n,Hs(y),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return s++,[3,1];case 13:return[2,(n.Ch.yu(o),i)]}}))}))}function Hs(t){return Fn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ws(t){var e=w(t);return w(w(e.ju).persistence).pi()}function zs(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,s,a;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=w(t)).qh?(d("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Fh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ro(o.ju)];case 3:return s=r.sent(),a=qt.Xt(e,"current"===n),[4,Fs(o,s,a)];case 4:return r.sent(),[3,8];case 5:return[4,Ao(o.ju,e,!0)];case 6:return r.sent(),Ds(o,e,i),[3,8];case 7:m(),r.label=8;case 8:return[2]}}))}))}function Ks(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,f,p;return r.__generator(this,(function(v){switch(v.label){case 0:if(!(i=$s(t)).qh)return[3,10];o=0,s=e,v.label=1;case 1:return o<s.length?(a=s[o],i.Fh.has(a)?(d("SyncEngine","Adding an already active target "+a),[3,5]):[4,No(i.ju,a)]):[3,6];case 2:return u=v.sent(),[4,To(i.ju,u)];case 3:return c=v.sent(),[4,Es(i,Hs(u),c.targetId,!1)];case 4:v.sent(),Ko(i.ph,c),v.label=5;case 5:return o++,[3,1];case 6:l=function(t){return r.__generator(this,(function(e){switch(e.label){case 0:return i.Fh.has(t)?[4,Ao(i.ju,t,!1).then((function(){$o(i.ph,t),Ds(i,t)})).catch(ko)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,v.label=7;case 7:return h<f.length?(p=f[h],[5,l(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function $s(t){var e=w(t);return e.ph.Gu.sh=As.bind(null,e),e.ph.Gu.qe=Us.bind(null,e),e.ph.Gu.nh=Ns.bind(null,e),e.Ch.yu=Fr.bind(null,e.bh),e.Ch.Wh=Mr.bind(null,e.bh),e}function Xs(t){var e=w(t);return e.ph.Gu.ih=Rs.bind(null,e),e.ph.Gu.rh=Os.bind(null,e),e}var Js=function(){function t(){}return t.prototype.Nc=function(t){this.zh=t},t.prototype.Lr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.p())}(e)||n.isEqual(ut.min())?this.Hh(t,e):this.zh.kr(t,r).next((function(s){var a=i.Yh(e,s);return(Un(e)||Vn(e))&&i.Eh(e.an,a,r,n)?i.Hh(t,e):(p()<=o.LogLevel.DEBUG&&d("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Yn(e)),i.zh.Lr(t,e,n).next((function(t){return a.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Yh=function(t,e){var n=new St(Zn(t));return e.forEach((function(e,r){r instanceof Cn&&Qn(t,r)&&(n=n.add(r))})),n},t.prototype.Eh=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.L(r)>0)},t.prototype.Hh=function(t,e){return p()<=o.LogLevel.DEBUG&&d("IndexFreeQueryEngine","Using full collection scan to execute query:",Yn(e)),this.zh.Lr(t,e,ut.min())},t}(),Ys=function(){function t(t,e){this.Dr=t,this.No=e,this.Sr=[],this.Jh=1,this.Xh=new St(Do.kc)}return t.prototype.$o=function(t){return mr.resolve(0===this.Sr.length)},t.prototype.ko=function(t,e,n,r){var i=this.Jh;this.Jh++,this.Sr.length>0&&this.Sr[this.Sr.length-1];var o=new Zr(i,e,n,r);this.Sr.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Xh=this.Xh.add(new Do(u.key,i)),this.Dr.Mo(t,u.key.path.h())}return mr.resolve(o)},t.prototype.Oo=function(t,e){return mr.resolve(this.Zh(e))},t.prototype.Bo=function(t,e){var n=e+1,r=this.tl(n),i=r<0?0:r;return mr.resolve(this.Sr.length>i?this.Sr[i]:null)},t.prototype.qo=function(){return mr.resolve(0===this.Sr.length?-1:this.Jh-1)},t.prototype.Uo=function(t){return mr.resolve(this.Sr.slice())},t.prototype.Nr=function(t,e){var n=this,r=new Do(e,0),i=new Do(e,Number.POSITIVE_INFINITY),o=[];return this.Xh.Ft([r,i],(function(t){var e=n.Zh(t.jc);o.push(e)})),mr.resolve(o)},t.prototype.Or=function(t,e){var n=this,r=new St(J);return e.forEach((function(t){var e=new Do(t,0),i=new Do(t,Number.POSITIVE_INFINITY);n.Xh.Ft([e,i],(function(t){r=r.add(t.jc)}))})),mr.resolve(this.el(r))},t.prototype.Wr=function(t,e){var n=e.path,r=n.length+1,i=n;R.F(i)||(i=i.child(""));var o=new Do(new R(i),0),s=new St(J);return this.Xh.xt((function(t){var e=t.key.path;return!!n.T(e)&&(e.length===r&&(s=s.add(t.jc)),!0)}),o),mr.resolve(this.el(s))},t.prototype.el=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Zh(t);null!==r&&n.push(r)})),n},t.prototype.Wo=function(t,e){var n=this;b(0===this.nl(e.batchId,"removed")),this.Sr.shift();var r=this.Xh;return mr.forEach(e.mutations,(function(i){var o=new Do(i.key,e.batchId);return r=r.delete(o),n.No.Go(t,i.key)})).next((function(){n.Xh=r}))},t.prototype.Ko=function(t){},t.prototype.Ho=function(t,e){var n=new Do(e,0),r=this.Xh.$t(n);return mr.resolve(e.isEqual(r&&r.key))},t.prototype.zo=function(t){return this.Sr.length,mr.resolve()},t.prototype.nl=function(t,e){return this.tl(t)},t.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},t.prototype.Zh=function(t){var e=this.tl(t);return e<0||e>=this.Sr.length?null:this.Sr[e]},t}(),Qs=function(){function t(t,e){this.Dr=t,this.sl=e,this.docs=new Et(R.i),this.size=0}return t.prototype.Er=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.sl(e);return this.docs=this.docs.ot(r,{ta:e,size:s,readTime:n}),this.size+=s-o,this.Dr.Mo(t,r.path.h())},t.prototype.Ar=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Rr=function(t,e){var n=this.docs.get(e);return mr.resolve(n?n.ta:null)},t.prototype.getEntries=function(t,e){var n=this,r=kt();return e.forEach((function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ta:null)})),mr.resolve(r)},t.prototype.Lr=function(t,e,n){for(var r=Dt(),i=new R(e.path.child("")),o=this.docs.ft(i);o.At();){var s=o.It(),a=s.key,u=s.value,c=u.ta,l=u.readTime;if(!e.path.T(a.path))break;l.L(n)<=0||c instanceof Cn&&Qn(e,c)&&(r=r.ot(c.key,c))}return mr.resolve(r)},t.prototype.il=function(t,e){return mr.forEach(this.docs,(function(t){return e(t)}))},t.prototype.ra=function(t){return new Zs(this)},t.prototype.aa=function(t){return mr.resolve(this.size)},t}(),Zs=function(t){function e(e){var n=this;return(n=t.call(this)||this).ca=e,n}return r.__extends(e,t),e.prototype.yr=function(t){var e=this,n=[];return this.wr.forEach((function(r,i){i?n.push(e.ca.Er(t,i,e.readTime)):e.ca.Ar(r)})),mr.$n(n)},e.prototype.gr=function(t,e){return this.ca.Rr(t,e)},e.prototype.Pr=function(t,e){return this.ca.getEntries(t,e)},e}(ei),ta=function(){function t(t){this.persistence=t,this.rl=new st((function(t){return dt(t)}),vt),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.ol=0,this.al=new Po,this.targetCount=0,this.cl=oo.fa()}return t.prototype.Ce=function(t,e){return this.rl.forEach((function(t,n){return e(n)})),mr.resolve()},t.prototype.Ea=function(t){return mr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ia=function(t){return mr.resolve(this.ol)},t.prototype.wa=function(t){return this.highestTargetId=this.cl.next(),mr.resolve(this.highestTargetId)},t.prototype.Aa=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ol&&(this.ol=e),mr.resolve()},t.prototype.ga=function(t){this.rl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.cl=new oo(e),this.highestTargetId=e),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},t.prototype.Ra=function(t,e){return this.ga(e),this.targetCount+=1,mr.resolve()},t.prototype.ya=function(t,e){return this.ga(e),mr.resolve()},t.prototype.Va=function(t,e){return this.rl.delete(e.target),this.al.Uc(e.targetId),this.targetCount-=1,mr.resolve()},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return this.rl.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.rl.delete(s),o.push(r.pa(t,a.targetId)),i++)})),mr.$n(o).next((function(){return i}))},t.prototype.ba=function(t){return mr.resolve(this.targetCount)},t.prototype.va=function(t,e){var n=this.rl.get(e)||null;return mr.resolve(n)},t.prototype.Sa=function(t,e,n){return this.al.Lc(e,n),mr.resolve()},t.prototype.Ca=function(t,e,n){this.al.qc(e,n);var r=this.persistence.No,i=[];return r&&e.forEach((function(e){i.push(r.Go(t,e))})),mr.$n(i)},t.prototype.pa=function(t,e){return this.al.Uc(e),mr.resolve()},t.prototype.Fa=function(t,e){var n=this.al.Wc(e);return mr.resolve(n)},t.prototype.Ho=function(t,e){return mr.resolve(this.al.Ho(e))},t}(),ea=function(){function t(t){var e=this;this.ul={},this.Ma=new Br(0),this.Oa=!1,this.Oa=!0,this.No=t(this),this.Ka=new ta(this),this.Dr=new Mi,this.vr=function(t,n){return new Qs(t,(function(t){return e.No.hl(t)}))}(this.Dr)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Di=function(){return this.Oa=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),t.prototype.Za=function(){},t.prototype.tc=function(){},t.prototype.Ic=function(){return this.Dr},t.prototype.mc=function(t){var e=this.ul[t.ti()];return e||(e=new Ys(this.Dr,this.No),this.ul[t.ti()]=e),e},t.prototype.Tc=function(){return this.Ka},t.prototype.Ec=function(){return this.vr},t.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new na(this.Ma.next());return this.No.ll(),n(i).next((function(t){return r.No._l(i).next((function(){return t}))})).Fn().then((function(t){return i.br(),t}))},t.prototype.fl=function(t,e){return mr.kn(Object.values(this.ul).map((function(n){return function(){return n.Ho(t,e)}})))},t}(),na=function(t){function e(e){var n=this;return(n=t.call(this)||this).xa=e,n}return r.__extends(e,t),e}(ri),ra=function(){function t(t){this.persistence=t,this.dl=new Po,this.wl=null}return t.ml=function(e){return new t(e)},Object.defineProperty(t.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw m()},enumerable:!1,configurable:!0}),t.prototype.Da=function(t,e,n){return this.dl.Da(n,e),this.Tl.delete(n.toString()),mr.resolve()},t.prototype.Na=function(t,e,n){return this.dl.Na(n,e),this.Tl.add(n.toString()),mr.resolve()},t.prototype.Go=function(t,e){return this.Tl.add(e.toString()),mr.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.dl.Uc(e.targetId).forEach((function(t){return n.Tl.add(t.toString())}));var r=this.persistence.Tc();return r.Fa(t,e.targetId).next((function(t){t.forEach((function(t){return n.Tl.add(t.toString())}))})).next((function(){return r.Va(t,e)}))},t.prototype.ll=function(){this.wl=new Set},t.prototype._l=function(t){var e=this,n=this.persistence.Ec().ra();return mr.forEach(this.Tl,(function(r){var i=R.D(r);return e.El(t,i).next((function(t){t||n.Ar(i)}))})).next((function(){return e.wl=null,n.apply(t)}))},t.prototype.yc=function(t,e){var n=this;return this.El(t,e).next((function(t){t?n.Tl.delete(e.toString()):n.Tl.add(e.toString())}))},t.prototype.hl=function(t){return 0},t.prototype.El=function(t,e){var n=this;return mr.kn([function(){return mr.resolve(n.dl.Ho(e))},function(){return n.persistence.Tc().Ho(t,e)},function(){return n.persistence.fl(t,e)}])},t}(),ia=function(){function t(t){this.Il=t.Il,this.Al=t.Al}return t.prototype.gu=function(t){this.Rl=t},t.prototype.Tu=function(t){this.gl=t},t.prototype.onMessage=function(t){this.Pl=t},t.prototype.close=function(){this.Al()},t.prototype.send=function(t){this.Il(t)},t.prototype.yl=function(){this.Rl()},t.prototype.Vl=function(t){this.gl(t)},t.prototype.pl=function(t){this.Pl(t)},t}(),oa={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},sa=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.W=e.W,n}return r.__extends(e,t),e.prototype.Nl=function(t,e,n,r){return new Promise((function(i,o){var s=new a.XhrIo;s.listenOnce(a.EventType.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case a.ErrorCode.NO_ERROR:var e=s.getResponseJson();d("Connection","XHR received:",JSON.stringify(e)),i(e);break;case a.ErrorCode.TIMEOUT:d("Connection",'RPC "'+t+'" timed out'),o(new h(l.DEADLINE_EXCEEDED,"Request time out"));break;case a.ErrorCode.HTTP_ERROR:var n=s.getStatus();if(d("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(l).indexOf(e)>=0?e:l.UNKNOWN}(r.status);o(new h(u,r.message))}else o(new h(l.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new h(l.UNAVAILABLE,"Connection failed."));break;default:m()}}finally{d("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.Pu=function(t,e){var n=[this.vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=a.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.W};this.Cl(i.initMessageHeaders,e),s.isMobileCordova()||s.isReactNative()||s.isElectron()||s.isIE()||s.isUWP()||s.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");d("Connection","Creating WebChannel: "+o,i);var u=r.createWebChannel(o,i),c=!1,f=!1,p=new ia({Il:function(t){f?d("Connection","Not sending because WebChannel is closed:",t):(c||(d("Connection","Opening WebChannel transport."),u.open(),c=!0),d("Connection","WebChannel sending:",t),u.send(t))},Al:function(){return u.close()}}),v=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return v(a.WebChannel.EventType.OPEN,(function(){f||d("Connection","WebChannel transport opened.")})),v(a.WebChannel.EventType.CLOSE,(function(){f||(f=!0,d("Connection","WebChannel transport closed"),p.Vl())})),v(a.WebChannel.EventType.ERROR,(function(t){f||(f=!0,y("Connection","WebChannel transport errored:",t),p.Vl(new h(l.UNAVAILABLE,"The operation could not be completed")))})),v(a.WebChannel.EventType.MESSAGE,(function(t){var e;if(!f){var n=t.data[0];b(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){d("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=gt[t];if(void 0!==e)return It(e)}(o),a=i.message;void 0===s&&(s=l.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),f=!0,p.Vl(new h(s,a)),u.close()}else d("Connection","WebChannel received:",n),p.pl(n)}})),setTimeout((function(){p.yl()}),0),p},e}(function(){function t(t){this.bl=t,this.U=t.U;var e=t.ssl?"https":"http";this.vl=e+"://"+t.host,this.Sl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return t.prototype.$u=function(t,e,n,r){var i=this.Dl(t,e);d("RestConnection","Sending: ",i,n);var o={};return this.Cl(o,r),this.Nl(t,i,o,n).then((function(t){return d("RestConnection","Received: ",t),t}),(function(e){throw y("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.ku=function(t,e,n,r){return this.$u(t,e,n,r)},t.prototype.Cl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.24.0",t["Content-Type"]="text/plain",e)for(var n in e.Kc)e.Kc.hasOwnProperty(n)&&(t[n]=e.Kc[n])},t.prototype.Dl=function(t,e){var n=oa[t];return this.vl+"/v1/"+e+":"+n},t}()),aa=function(){function t(){var t=this;this.Fl=function(){return t.xl()},this.$l=function(){return t.kl()},this.Ml=[],this.Ol()}return t.prototype.Zu=function(t){this.Ml.push(t)},t.prototype.Di=function(){window.removeEventListener("online",this.Fl),window.removeEventListener("offline",this.$l)},t.prototype.Ol=function(){window.addEventListener("online",this.Fl),window.addEventListener("offline",this.$l)},t.prototype.xl=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(0)},t.prototype.kl=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ua=function(){function t(){}return t.prototype.Zu=function(t){},t.prototype.Di=function(){},t}();function ca(t){return new me(t,!0)}var la="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",ha=function(){function t(){}return t.prototype.initialize=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.Sh=this.Ll(t),this.persistence=this.Bl(t),[4,this.persistence.start()];case 1:return e.sent(),this.ql=this.Ul(t),this.ju=this.Ql(t),[2]}}))}))},t.prototype.Ul=function(t){return null},t.prototype.Ql=function(t){return e=this.persistence,n=new Js,r=t.Wl,new bo(e,n,r);var e,n,r},t.prototype.Bl=function(t){if(t.persistenceSettings.jl)throw new h(l.FAILED_PRECONDITION,la);return new ea(ra.ml)},t.prototype.Ll=function(t){return new Qr},t.prototype.terminate=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Sh.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}}))}))},t.prototype.clearPersistence=function(t,e){throw new h(l.FAILED_PRECONDITION,la)},t}(),fa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Kl.fi,this.Sh instanceof Yr?(this.Sh.fi={er:qs.bind(null,n),nr:zs.bind(null,n),sr:Ks.bind(null,n),pi:Ws.bind(null,n)},[4,this.Sh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.Xa((function(t){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,Bs(this.Kl.fi,t)];case 1:return e.sent(),this.ql&&(t&&!this.ql.Ei?this.ql.start(this.ju):t||this.ql.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.Ll=function(t){if(t.persistenceSettings.jl&&t.persistenceSettings.synchronizeTabs){var e=Rr();if(!Yr.Ln(e))throw new h(l.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=mo(t.bl.U,t.bl.persistenceKey);return new Yr(e,t.cs,n,t.clientId,t.Wl)}return new Qr},e}(function(t){function e(e){var n=this;return(n=t.call(this)||this).Kl=e,n}return r.__extends(e,t),e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Oo(this.ju)];case 2:return n.sent(),[4,this.Kl.initialize(this,e)];case 3:return n.sent(),[4,Xs(this.Kl.fi)];case 4:return n.sent(),[4,ss(this.Kl.ph)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ul=function(t){var e=this.persistence.No.wo;return new li(e,t.cs)},e.prototype.Bl=function(t){var e=mo(t.bl.U,t.bl.persistenceKey),n=ca(t.bl.U);return new fo(t.persistenceSettings.synchronizeTabs,e,t.clientId,ci.ao(t.persistenceSettings.cacheSizeBytes),t.cs,Rr(),Or(),n,this.Sh,t.persistenceSettings.ka)},e.prototype.Ll=function(t){return new Qr},e.prototype.clearPersistence=function(t,e){return function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return br.Ln()?(e=t+"main",[4,br.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(mo(t,e))},e}(ha)),pa=function(){function t(){}return t.prototype.initialize=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.ju?[3,2]:(this.ju=t.ju,this.Sh=t.Sh,this.Ku=this.Gl(e),this.ph=this.zl(e),this.bh=this.Hl(e),this.fi=this.Yl(e),this.Sh.di=function(t){return Ss(n.fi,t,1)},this.ph.Gu.Jl=Ms.bind(null,this.fi),[4,ps(this.ph,this.fi.Uh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.Hl=function(t){return new xr},t.prototype.Gl=function(t){var e,n=ca(t.bl.U),r=(e=t.bl,new sa(e));return function(t,e,n){return new qo(t,e,n)}(t.credentials,r,n)},t.prototype.zl=function(t){var e,n,r,i,o,s=this;return e=this.ju,n=this.Ku,r=t.cs,i=function(t){return Ss(s.fi,t,0)},o=aa.Ln()?new aa:new ua,new Go(e,n,r,i,o)},t.prototype.Yl=function(t){return function(t,e,n,r,i,o,s){var a=new _s(t,e,n,r,i,o);return s&&(a.qh=!0),a}(this.ju,this.ph,this.bh,this.Sh,t.Wl,t.Dh,!t.persistenceSettings.jl||!t.persistenceSettings.synchronizeTabs)},t.prototype.terminate=function(){return zo(this.ph)},t}(),da=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Xl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Xl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Zl=function(){this.muted=!0},t.prototype.Xl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),va=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new h(l.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+K(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(C("FieldPath","string",e,t[e]),0===t[e].length)throw new h(l.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.t_=new N(t)},ya=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return r.__extends(e,t),e.documentId=function(){return new e(N.v().R())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw H("isEqual","FieldPath",1,t);return this.t_.isEqual(t.t_)},e}(va),ga=new RegExp("[~\\*/\\[\\]]"),ma=function(t){this.e_=t},ba=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.n_=function(t){if(2!==t.s_)throw 1===t.s_?t.i_(this.e_+"() can only appear at the top level of your update data"):t.i_(this.e_+"() cannot be used with set() unless you pass {merge:true}");return t.We.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ma);function wa(t,e,n){return new Da({s_:3,r_:e.settings.r_,methodName:t.e_,o_:n},e.U,e.serializer,e.ignoreUndefinedProperties)}var _a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.n_=function(t){return new hn(t.path,new en)},e.prototype.isEqual=function(t){return t instanceof e},e}(ma),Ia=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return r.__extends(e,t),e.prototype.n_=function(t){var e=wa(this,t,!0),n=this.a_.map((function(t){return Ma(t,e)})),r=new nn(n);return new hn(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ma),Ea=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return r.__extends(e,t),e.prototype.n_=function(t){var e=wa(this,t,!0),n=this.a_.map((function(t){return Ma(t,e)})),r=new on(n);return new hn(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ma),Ta=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).c_=n,r}return r.__extends(e,t),e.prototype.n_=function(t){var e=new an(t.serializer,_e(t.serializer,this.c_));return new hn(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ma),Aa=function(){function t(t,e){if(k("GeoPoint",arguments,2),C("GeoPoint","number",1,t),C("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new h(l.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new h(l.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.u_=t,this.h_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.u_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.u_===t.u_&&this.h_===t.h_},t.prototype.toJSON=function(){return{latitude:this.u_,longitude:this.h_}},t.prototype.Y=function(t){return J(this.u_,t.u_)||J(this.h_,t.h_)},t}(),Sa=function(t){this.l_=t},Na=/^__.*__$/,Ra=function(t,e,n){this.__=t,this.f_=e,this.d_=n},Oa=function(){function t(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}return t.prototype.w_=function(t,e){var n=[];return null!==this.We?n.push(new In(t,this.data,this.We,e)):n.push(new _n(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Tn(t,this.fieldTransforms)),n},t}(),ka=function(){function t(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}return t.prototype.w_=function(t,e){var n=[new In(t,this.data,this.We,e)];return this.fieldTransforms.length>0&&n.push(new Tn(t,this.fieldTransforms)),n},t}();function Pa(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw m()}}var Da=function(){function t(t,e,n,r,i,o){this.settings=t,this.U=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.m_(),this.fieldTransforms=i||[],this.We=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"s_",{get:function(){return this.settings.s_},enumerable:!1,configurable:!0}),t.prototype.T_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.We)},t.prototype.E_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.T_({path:n,o_:!1});return r.I_(t),r},t.prototype.A_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.T_({path:n,o_:!1});return r.m_(),r},t.prototype.R_=function(t){return this.T_({path:void 0,o_:!0})},t.prototype.i_=function(t){return Ha(t,this.settings.methodName,this.settings.g_||!1,this.path,this.settings.r_)},t.prototype.contains=function(t){return void 0!==this.We.find((function(e){return t.T(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.T(e.field)}))},t.prototype.m_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},t.prototype.I_=function(t){if(0===t.length)throw this.i_("Document fields must not be empty");if(Pa(this.s_)&&Na.test(t))throw this.i_('Document fields cannot begin and end with "__"')},t}(),Ca=function(){function t(t,e,n){this.U=t,this.ignoreUndefinedProperties=e,this.serializer=n||ca(t)}return t.prototype.P_=function(t,e,n,r){return void 0===r&&(r=!1),new Da({s_:t,methodName:e,r_:n,path:N.P(),o_:!1,g_:r},this.U,this.serializer,this.ignoreUndefinedProperties)},t}();function xa(t,e,n,r,i,o){void 0===o&&(o={});var s=t.P_(o.merge||o.mergeFields?2:0,e,n,i);qa("Data must be an object, but it was:",s,r);var a,u,c=Ua(r,s);if(o.merge)a=new ln(s.We),u=s.fieldTransforms;else if(o.mergeFields){for(var f=[],p=0,d=o.mergeFields;p<d.length;p++){var v=d[p],y=void 0;if(v instanceof va)y=v.t_;else{if("string"!=typeof v)throw m();y=Ga(e,v,n)}if(!s.contains(y))throw new h(l.INVALID_ARGUMENT,"Field '"+y+"' is specified in your field mask but missing from your input data.");Wa(f,y)||f.push(y)}a=new ln(f),u=s.fieldTransforms.filter((function(t){return a.Ye(t.field)}))}else a=null,u=s.fieldTransforms;return new Oa(new On(c),a,u)}function La(t,e,n,r){var i=t.P_(1,e,n);qa("Data must be an object, but it was:",i,r);var o=[],s=new kn;I(r,(function(t,r){var a=Ga(e,t,n),u=i.A_(a);if(r instanceof ba||r instanceof Sa&&r.l_ instanceof ba)o.push(a);else{var c=Ma(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new ln(o);return new ka(s.Xe(),a,i.fieldTransforms)}function ja(t,e,n,r,i,o){var s=t.P_(1,e,n),a=[Ba(e,r,n)],u=[i];if(o.length%2!=0)throw new h(l.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Ba(e,o[c])),u.push(o[c+1]);for(var f=[],p=new kn,d=a.length-1;d>=0;--d)if(!Wa(f,a[d])){var v=a[d],y=u[d],g=s.A_(v);if(y instanceof ba||y instanceof Sa&&y.l_ instanceof ba)f.push(v);else{var m=Ma(y,g);null!=m&&(f.push(v),p.set(v,m))}}var b=new ln(f);return new ka(p.Xe(),b,s.fieldTransforms)}function Fa(t,e,n,r){return void 0===r&&(r=!1),Ma(n,t.P_(r?4:3,e))}function Ma(t,e){if(t instanceof Sa&&(t=t.l_),Va(t))return qa("Unsupported field value:",e,t),Ua(t,e);if(t instanceof ma)return function(t,e){if(!Pa(e.s_))throw e.i_(t.e_+"() can only be used with update() and set()");if(!e.path)throw e.i_(t.e_+"() is not currently supported inside arrays");var n=t.n_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.We.push(e.path),t instanceof Array){if(e.settings.o_&&4!==e.s_)throw e.i_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ma(o[i],e.R_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _e(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=at.fromDate(t);return{timestampValue:Ie(e.serializer,n)}}if(t instanceof at){var r=new at(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ie(e.serializer,r)}}if(t instanceof Aa)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tt)return{bytesValue:Ee(e.serializer,t.q)};if(t instanceof Ra){var i=e.U,o=t.__;if(!o.isEqual(i))throw e.i_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Se(t.__||e.U,t.f_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.i_("Unsupported field value: "+q(t))}(t,e)}function Ua(t,e){var n={};return E(t)?e.path&&e.path.length>0&&e.We.push(e.path):I(t,(function(t,r){var i=Ma(r,e.E_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Va(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof at||t instanceof Aa||t instanceof tt||t instanceof Ra||t instanceof ma)}function qa(t,e,n){if(!Va(n)||!V(n)){var r=q(n);throw"an object"===r?e.i_(t+" a custom object"):e.i_(t+" "+r)}}function Ba(t,e,n){if(e instanceof va)return e.t_;if("string"==typeof e)return Ga(t,e);throw Ha("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Ga(t,e,n){try{return function(t){if(t.search(ga)>=0)throw new h(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ya.bind.apply(ya,r.__spreadArrays([void 0],t.split("."))))}catch(e){throw new h(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).t_}catch(e){throw Ha((i=e)instanceof Error?i.message:i.toString(),t,!1,void 0,n)}var i}function Ha(t,e,n,r,i){var o=r&&!r.m(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new h(l.INVALID_ARGUMENT,(a+=". ")+t+u)}function Wa(t,e){return t.some((function(t){return t.isEqual(e)}))}var za=function(){function t(t){this.Ku=t,this.y_=new Map,this.mutations=[],this.V_=!1,this.p_=null,this.b_=new Set}return t.prototype.v_=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:if(this.S_(),this.mutations.length>0)throw new h(l.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,a,u;return r.__generator(this,(function(r){switch(r.label){case 0:return n=w(t),i=De(n.serializer)+"/documents",o={documents:e.map((function(t){return Re(n.serializer,t)}))},[4,n.ku("BatchGetDocuments",i,o)];case 1:return s=r.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){b(!!e.found),e.found.name,e.found.updateTime;var n=Oe(t,e.found.name),r=Ae(e.found.updateTime),i=new On({mapValue:{fields:e.found.fields}});return new Cn(n,r,i,{})}(t,e):"missing"in e?function(t,e){b(!!e.missing),b(!!e.readTime);var n=Oe(t,e.missing),r=Ae(e.readTime);return new xn(n,r)}(t,e):m()}(n.serializer,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());b(!!e),u.push(e)})),u)]}}))}))}(this.Ku,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof xn||t instanceof Cn?n.D_(t):m()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.w_(t,this.Ge(t))),this.b_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.w_(t,this.C_(t)))}catch(t){this.p_=t}this.b_.add(t.toString())},t.prototype.delete=function(t){this.write([new Nn(t,this.Ge(t))]),this.b_.add(t.toString())},t.prototype.commit=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(this.S_(),this.p_)throw this.p_;return t=this.y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=R.D(n);e.mutations.push(new Rn(r,e.Ge(r)))})),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=w(t),i=De(n.serializer)+"/documents",o={writes:e.map((function(t){return Le(n.serializer,t)}))},[4,n.$u("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.Ku,this.mutations)];case 1:return n.sent(),this.V_=!0,[2]}}))}))},t.prototype.D_=function(t){var e;if(t instanceof Cn)e=t.version;else{if(!(t instanceof xn))throw m();e=ut.min()}var n=this.y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new h(l.ABORTED,"Document version changed between two reads.")}else this.y_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.y_.get(t.toString());return!this.b_.has(t.toString())&&e?pn.updateTime(e):pn.ze()},t.prototype.C_=function(t){var e=this.y_.get(t.toString());if(!this.b_.has(t.toString())&&e){if(e.isEqual(ut.min()))throw new h(l.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pn.updateTime(e)}return pn.exists(!0)},t.prototype.write=function(t){this.S_(),this.mutations=this.mutations.concat(t)},t.prototype.S_=function(){},t}(),Ka=function(){function t(t,e,n,r){this.cs=t,this.Ku=e,this.updateFunction=n,this.ls=r,this.N_=5,this.ys=new gr(this.cs,"transaction_retry")}return t.prototype.run=function(){this.F_()},t.prototype.F_=function(){var t=this;this.ys.gn((function(){return r.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return r.__generator(this,(function(r){return t=new za(this.Ku),(e=this.x_(t))&&e.then((function(e){n.cs.ws((function(){return t.commit().then((function(){n.ls.resolve(e)})).catch((function(t){n.k_(t)}))}))})).catch((function(t){n.k_(t)})),[2]}))}))}))},t.prototype.x_=function(t){try{var e=this.updateFunction(t);return!ct(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},t.prototype.k_=function(t){var e=this;this.N_>0&&this.M_(t)?(this.N_-=1,this.cs.ws((function(){return e.F_(),Promise.resolve()}))):this.ls.reject(t)},t.prototype.M_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!_t(e)}return!1},t}(),$a=function(){function t(t,e){this.credentials=t,this.cs=e,this.clientId=X.k(),this.O_=new yr}return t.prototype.start=function(t,e,n,i){var o=this;this.L_(),this.bl=t;var s=new yr,a=!1;return this.credentials.Hc((function(t){if(!a)return a=!0,d("FirestoreClient","Initializing. user=",t.uid),o.B_(e,n,i,t,s).then(o.O_.resolve,o.O_.reject);o.cs.Cs((function(){return function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=w(t)).cs.xs(),d("RemoteStore","RemoteStore received new credentials"),i=Zo(n),n.Yu.add(3),[4,Wo(n)];case 1:return r.sent(),i&&n.th.set("Unknown"),[4,n.Gu.Jl(e)];case 2:return r.sent(),n.Yu.delete(3),[4,Ho(n)];case 3:return r.sent(),[2]}}))}))}(o.ph,t)}))})),this.cs.ws((function(){return o.O_.promise})),s.promise},t.prototype.enableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue((function(){return t.persistence.tc(!0),function(t){var e=w(t);return e.Yu.delete(0),Ho(e)}(t.ph)}))},t.prototype.B_=function(t,e,n,i,o){return r.__awaiter(this,void 0,void 0,(function(){var s,a,u=this;return r.__generator(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),s={cs:this.cs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Wl:i,Dh:100,persistenceSettings:n},[4,t.initialize(s)];case 1:return c.sent(),[4,e.initialize(t,s)];case 2:return c.sent(),this.persistence=t.persistence,this.Sh=t.Sh,this.ju=t.ju,this.ql=t.ql,this.Ku=e.Ku,this.ph=e.ph,this.fi=e.fi,this.q_=e.bh,this.q_.Us=Is.bind(null,this.fi),this.q_.js=Ts.bind(null,this.fi),this.persistence.Za((function(){return r.__awaiter(u,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),o.resolve(),[3,4];case 3:if(a=c.sent(),o.reject(a),!this.U_(a))throw a;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),this.B_(new ha,new pa,{jl:!1},i,o))];case 4:return[2]}}))}))},t.prototype.U_=function(t){return"FirebaseError"===t.name?t.code===l.FAILED_PRECONDITION||t.code===l.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.L_=function(){if(this.cs.ps)throw new h(l.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue((function(){return t.persistence.tc(!1),function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=w(t)).Yu.add(0),[4,Wo(e)];case 1:return n.sent(),e.th.set("Offline"),[2]}}))}))}(t.ph)}))},t.prototype.terminate=function(){var t=this;this.cs.Ds();var e=new yr;return this.cs.bs((function(){return r.__awaiter(t,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,zo(this.ph)];case 1:return r.sent(),[4,this.Sh.Di()];case 2:return r.sent(),[4,this.persistence.Di()];case 3:return r.sent(),this.credentials.Yc(),e.resolve(),[3,5];case 4:return t=r.sent(),n=Dr(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.L_();var e=new yr;return this.cs.ws((function(){return function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,a;return r.__generator(this,(function(r){switch(r.label){case 0:Zo((n=w(t)).ph)||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=w(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Sr.qo(t)}))}(n.ju)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.Lh.get(i)||[]).push(e),n.Lh.set(i,o),[3,4]);case 3:return s=r.sent(),a=Dr(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}(t.fi,e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.L_();var i=new da(n),o=new Vr(t,i,e);return this.cs.ws((function(){return Lr(r.q_,o)})),function(){i.Zl(),r.cs.ws((function(){return jr(r.q_,o)}))}},t.prototype.Q_=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),e=new yr,[2,(this.cs.ws((function(){return function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=w(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Cc.Cr(t,e)}))}(t,e)];case 1:return(i=r.sent())instanceof Cn?n.resolve(i):i instanceof xn?n.resolve(null):n.reject(new h(l.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=r.sent(),s=Dr(o,"Failed to get document '"+e+" from cache"),n.reject(s),[3,3];case 3:return[2]}}))}))}(n.ju,t,e)})),e.promise)]}}))}))},t.prototype.W_=function(t,e){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return r.sent(),n=new yr,[2,(this.cs.ws((function(){return function(t,e,n,r,i){var o=new da({next:function(o){e.ws((function(){return jr(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new h(l.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new h(l.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Vr(Mn(n.path),o,{includeMetadataChanges:!0,Xs:!0});return Lr(t,s)}(i.q_,i.cs,t,e,n)})),n.promise)]}}))}))},t.prototype.j_=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),e=new yr,[2,(this.cs.ws((function(){return function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,a,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,So(t,e,!0)];case 1:return i=r.sent(),o=new ms(e,i.Fc),s=o.wh(i.documents),a=o.yr(s,!1),n.resolve(a.snapshot),[3,3];case 2:return u=r.sent(),c=Dr(u,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}}))}))}(n.ju,t,e)})),e.promise)]}}))}))},t.prototype.K_=function(t,e){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return r.sent(),n=new yr,[2,(this.cs.ws((function(){return function(t,e,n,r,i){var o=new da({next:function(n){e.ws((function(){return jr(t,s)})),n.fromCache&&"server"===r.source?i.reject(new h(l.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Vr(n,o,{includeMetadataChanges:!0,Xs:!0});return Lr(t,s)}(i.q_,i.cs,t,e,n)})),n.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.L_();var n=new yr;return this.cs.ws((function(){return function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,a;return r.__generator(this,(function(r){switch(r.label){case 0:i=Xs(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=w(t),i=at.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Lt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Cc.kr(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=mn(c,n.get(c.key));null!=l&&s.push(new In(c.key,l,Pn(l.proto.mapValue),pn.exists(!0)))}return r.Sr.ko(t,i,s,e)}))})).then((function(t){var e=t.lr(n);return{batchId:t.batchId,wr:e}}))}(i.ju,e)];case 2:return o=r.sent(),i.Sh.xi(o.batchId),function(t,e,n){var r=t.Oh[t.currentUser.ti()];r||(r=new Et(J)),r=r.ot(e,n),t.Oh[t.currentUser.ti()]=r}(i,o.batchId,n),[4,Fs(i,o.wr)];case 3:return r.sent(),[4,ss(i.ph)];case 4:return r.sent(),[3,6];case 5:return s=r.sent(),a=Dr(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}(e.fi,t,n)})),n.promise},t.prototype.U=function(){return this.bl.U},t.prototype.G_=function(t){var e=this;this.L_();var n=new da(t);return this.cs.ws((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,function(t,e){w(t).qs.add(e),e.next()}(this.q_,n)]}))}))})),function(){n.Zl(),e.cs.ws((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,function(t,e){w(t).qs.delete(e)}(this.q_,n)]}))}))}))}},Object.defineProperty(t.prototype,"z_",{get:function(){return this.cs.ps},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.L_();var n=new yr;return this.cs.ws((function(){return new Ka(e.cs,e.Ku,t,n).run(),Promise.resolve()})),n.promise},t}();function Xa(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ja=function(){function t(t,e,n,r,i){this.U=t,this.timestampsInSnapshots=e,this.H_=n,this.Y_=r,this.J_=i}return t.prototype.X_=function(t){switch(te(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ue(t.integerValue||t.doubleValue);case 3:return this.Z_(t.timestampValue);case 4:return this.tf(t);case 5:return t.stringValue;case 6:return this.J_(ce(t.bytesValue));case 7:return this.ef(t.referenceValue);case 8:return this.nf(t.geoPointValue);case 9:return this.sf(t.arrayValue);case 10:return this.if(t.mapValue);default:throw m()}},t.prototype.if=function(t){var e=this,n={};return I(t.fields||{},(function(t,r){n[t]=e.X_(r)})),n},t.prototype.nf=function(t){return new Aa(ue(t.latitude),ue(t.longitude))},t.prototype.sf=function(t){var e=this;return(t.values||[]).map((function(t){return e.X_(t)}))},t.prototype.tf=function(t){switch(this.H_){case"previous":var e=Yt(t);return null==e?null:this.X_(e);case"estimate":return this.Z_(Qt(t));default:return null}},t.prototype.Z_=function(t){var e=ae(t),n=new at(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.ef=function(t){var e=A.g(t);b(Je(e));var n=new ot(e.get(1),e.get(3)),r=new R(e.u(5));return n.isEqual(this.U)||v("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.Y_(r)},t}(),Ya=ci.ho,Qa=function(){function t(t){var e,n,r,i,o;if(void 0===t.host){if(void 0!==t.ssl)throw new h(l.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else L("settings","non-empty string","host",t.host),this.host=t.host,j("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(G("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","experimentalAutoDetectLongPolling","ignoreUndefinedProperties"]),j("settings","object","credentials",t.credentials),this.credentials=t.credentials,j("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),j("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?v("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&v("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,j("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=ci._o;else{if(t.cacheSizeBytes!==Ya&&t.cacheSizeBytes<ci.lo)throw new h(l.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+ci.lo);this.cacheSizeBytes=t.cacheSizeBytes}j("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i,j("settings","boolean","experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalAutoDetectLongPolling=null!==(o=t.experimentalAutoDetectLongPolling)&&void 0!==o&&o,function(t,e,n,r){if(!0===e&&!0===r)throw new h(l.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Za=function(){function t(e,n,i,o){var s=this;if(void 0===i&&(i=new ha),void 0===o&&(o=new pa),this.rf=i,this.af=o,this.cf=null,this.uf=new Pr,this.INTERNAL={delete:function(){return r.__awaiter(s,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.hf(),[4,this.lf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var a=e;this.cf=a,this.__=t._f(a),this.ff=a.name,this.df=new Lo(n)}else{var u=e;if(!u.projectId)throw new h(l.INVALID_ARGUMENT,"Must provide projectId");this.__=new ot(u.projectId,u.database),this.ff="[DEFAULT]",this.df=new xo}this.wf=new Qa({})}return Object.defineProperty(t.prototype,"mf",{get:function(){return this.Tf||(this.Tf=new Ca(this.__,this.wf.ignoreUndefinedProperties)),this.Tf},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){k("Firestore.settings",arguments,1),C("Firestore.settings","object",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.wf),t)).merge;var e=new Qa(t);if(this.lf&&!this.wf.isEqual(e))throw new h(l.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.wf=e,void 0!==e.credentials&&(this.df=function(t){if(!t)return new xo;switch(t.type){case"gapi":var e=t.client;return b(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Fo(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new h(l.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.hf(),this.lf.enableNetwork()},t.prototype.disableNetwork=function(){return this.hf(),this.lf.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.lf)throw new h(l.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&v("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new h(l.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Ef(this.rf,this.af,{jl:!0,cacheSizeBytes:this.wf.cacheSizeBytes,synchronizeTabs:r,ka:i})},t.prototype.clearPersistence=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){if(void 0!==this.lf&&!this.lf.z_)throw new h(l.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new yr,[2,(this.uf.bs((function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.rf.clearPersistence(this.__,this.ff)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return e=n.sent(),t.reject(e),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"If",{get:function(){return this.hf(),this.lf.z_},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.hf(),this.lf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.hf(),Xa(t))return this.lf.G_(t);C("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.lf.G_(e)},t.prototype.hf=function(){return this.lf||this.Ef(new ha,new pa,{jl:!1}),this.lf},t.prototype.Af=function(){return new it(this.__,this.ff,this.wf.host,this.wf.ssl,this.wf.experimentalForceLongPolling,this.wf.experimentalAutoDetectLongPolling)},t.prototype.Ef=function(t,e,n){var r=this.Af();return this.lf=new $a(this.df,this.uf),this.lf.start(r,t,e,n)},t._f=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new h(l.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new h(l.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ot(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.cf)throw new h(l.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return k("Firestore.collection",arguments,1),C("Firestore.collection","non-empty string",1,t),this.hf(),new fu(A.g(t),this,null)},t.prototype.doc=function(t){return k("Firestore.doc",arguments,1),C("Firestore.doc","non-empty string",1,t),this.hf(),nu.Rf(A.g(t),this,null)},t.prototype.collectionGroup=function(t){if(k("Firestore.collectionGroup",arguments,1),C("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new h(l.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.hf(),new lu(function(t){return new jn(A.P(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return k("Firestore.runTransaction",arguments,1),C("Firestore.runTransaction","function",1,t),this.hf().transaction((function(n){return t(new tu(e,n))}))},t.prototype.batch=function(){return this.hf(),new eu(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(p()){case o.LogLevel.DEBUG:return"debug";case o.LogLevel.ERROR:return"error";case o.LogLevel.SILENT:return"silent";case o.LogLevel.WARN:return"warn";case o.LogLevel.INFO:return"info";case o.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;k("Firestore.setLogLevel",arguments,1),M("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,f.setLogLevel(e)},t.prototype.gf=function(){return this.wf.timestampsInSnapshots},t.prototype.Pf=function(){return this.wf},t}(),tu=function(){function t(t,e){this.yf=t,this.Vf=e}return t.prototype.get=function(t){var e=this;k("Transaction.get",arguments,1);var n=yu("Transaction.get",t,this.yf);return this.Vf.v_([n.f_]).then((function(t){if(!t||1!==t.length)return m();var r=t[0];if(r instanceof xn)return new iu(e.yf,n.f_,null,!1,!1,n.d_);if(r instanceof Cn)return new iu(e.yf,n.f_,r,!1,!1,n.d_);throw m()}))},t.prototype.set=function(t,e,n){D("Transaction.set",arguments,2,3);var r=yu("Transaction.set",t,this.yf);n=pu("Transaction.set",n);var i=mu(r.d_,e,n),o=xa(this.yf.mf,"Transaction.set",r.f_,i,null!==r.d_,n);return this.Vf.set(r.f_,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof ya?(P("Transaction.update",arguments,3),r=yu("Transaction.update",t,this.yf),i=ja(this.yf.mf,"Transaction.update",r.f_,e,n,o)):(k("Transaction.update",arguments,2),r=yu("Transaction.update",t,this.yf),i=La(this.yf.mf,"Transaction.update",r.f_,e)),this.Vf.update(r.f_,i),this},t.prototype.delete=function(t){k("Transaction.delete",arguments,1);var e=yu("Transaction.delete",t,this.yf);return this.Vf.delete(e.f_),this},t}(),eu=function(){function t(t){this.yf=t,this.pf=[],this.bf=!1}return t.prototype.set=function(t,e,n){D("WriteBatch.set",arguments,2,3),this.vf();var r=yu("WriteBatch.set",t,this.yf);n=pu("WriteBatch.set",n);var i=mu(r.d_,e,n),o=xa(this.yf.mf,"WriteBatch.set",r.f_,i,null!==r.d_,n);return this.pf=this.pf.concat(o.w_(r.f_,pn.ze())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.vf(),"string"==typeof e||e instanceof ya?(P("WriteBatch.update",arguments,3),r=yu("WriteBatch.update",t,this.yf),i=ja(this.yf.mf,"WriteBatch.update",r.f_,e,n,o)):(k("WriteBatch.update",arguments,2),r=yu("WriteBatch.update",t,this.yf),i=La(this.yf.mf,"WriteBatch.update",r.f_,e)),this.pf=this.pf.concat(i.w_(r.f_,pn.exists(!0))),this},t.prototype.delete=function(t){k("WriteBatch.delete",arguments,1),this.vf();var e=yu("WriteBatch.delete",t,this.yf);return this.pf=this.pf.concat(new Nn(e.f_,pn.ze())),this},t.prototype.commit=function(){return this.vf(),this.bf=!0,this.pf.length>0?this.yf.hf().write(this.pf):Promise.resolve()},t.prototype.vf=function(){if(this.bf)throw new h(l.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),nu=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.__,e,r)||this).f_=e,i.firestore=n,i.d_=r,i.lf=i.firestore.hf(),i}return r.__extends(e,t),e.Rf=function(t,n,r){if(t.length%2!=0)throw new h(l.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.R()+" has "+t.length);return new e(new R(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new fu(this.f_.path.h(),this.firestore,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.f_.path.R()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(k("DocumentReference.collection",arguments,1),C("DocumentReference.collection","non-empty string",1,t),!t)throw new h(l.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=A.g(t);return new fu(this.f_.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw H("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.f_.isEqual(t.f_)&&this.d_===t.d_},e.prototype.set=function(t,e){D("DocumentReference.set",arguments,1,2),e=pu("DocumentReference.set",e);var n=mu(this.d_,t,e),r=xa(this.firestore.mf,"DocumentReference.set",this.f_,n,null!==this.d_,e);return this.lf.write(r.w_(this.f_,pn.ze()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof ya?(P("DocumentReference.update",arguments,2),n=ja(this.firestore.mf,"DocumentReference.update",this.f_,t,e,r)):(k("DocumentReference.update",arguments,1),n=La(this.firestore.mf,"DocumentReference.update",this.f_,t)),this.lf.write(n.w_(this.f_,pn.exists(!0)))},e.prototype.delete=function(){return k("DocumentReference.delete",arguments,0),this.lf.write([new Nn(this.f_,pn.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];D("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Xa(i[a])||(G("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),j("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u={includeMetadataChanges:s.includeMetadataChanges};if(Xa(i[a])){var c=i[a];i[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else C("DocumentReference.onSnapshot","function",a,i[a]),x("DocumentReference.onSnapshot","function",a+1,i[a+1]),x("DocumentReference.onSnapshot","function",a+2,i[a+2]);var l={next:function(t){i[a]&&i[a](r.Sf(t))},error:i[a+1],complete:i[a+2]};return this.lf.listen(Mn(this.f_.path),u,l)},e.prototype.get=function(t){var e=this;D("DocumentReference.get",arguments,0,1),vu("DocumentReference.get",t);var n=this.firestore.hf();return t&&"cache"===t.source?n.Q_(this.f_).then((function(t){return new iu(e.firestore,e.f_,t,!0,t instanceof Cn&&t.Je,e.d_)})):n.W_(this.f_,t).then((function(t){return e.Sf(t)}))},e.prototype.withConverter=function(t){return new e(this.f_,this.firestore,t)},e.prototype.Sf=function(t){var e=t.docs.get(this.f_);return new iu(this.firestore,this.f_,e,t.fromCache,t.hasPendingWrites,this.d_)},e}(Ra),ru=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),iu=function(){function t(t,e,n,r,i,o){this.yf=t,this.f_=e,this.Df=n,this.Cf=r,this.Nf=i,this.d_=o}return t.prototype.data=function(t){var e=this;if(D("DocumentSnapshot.data",arguments,0,1),t=du("DocumentSnapshot.data",t),this.Df){if(this.d_){var n=new ou(this.yf,this.f_,this.Df,this.Cf,this.Nf,null);return this.d_.fromFirestore(n,t)}return new Ja(this.yf.__,this.yf.gf(),t.serverTimestamps||"none",(function(t){return new nu(t,e.yf,null)}),(function(t){return new rt(t)})).X_(this.Df.rn())}},t.prototype.get=function(t,e){var n=this;if(D("DocumentSnapshot.get",arguments,1,2),e=du("DocumentSnapshot.get",e),this.Df){var r=this.Df.data().field(Ba("DocumentSnapshot.get",t,this.f_));if(null!==r)return new Ja(this.yf.__,this.yf.gf(),e.serverTimestamps||"none",(function(t){return new nu(t,n.yf,n.d_)}),(function(t){return new rt(t)})).X_(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new nu(this.f_,this.yf,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new ru(this.Nf,this.Cf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","DocumentSnapshot",1,e);return this.yf===e.yf&&this.Cf===e.Cf&&this.f_.isEqual(e.f_)&&(null===this.Df?null===e.Df:this.Df.isEqual(e.Df))&&this.d_===e.d_},t}(),ou=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(iu);function su(t,e,n){if("string"==typeof n){if(""===n)throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gn(e)&&-1!==n.indexOf("/"))throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(A.g(n));if(!R.F(r))throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return le(t,new R(r))}if(n instanceof Ra)return le(t,n.f_);throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+q(n)+".")}function au(t,e){if(!Array.isArray(t)||0===t.length)throw new h(l.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new h(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(t.indexOf(null)>=0)throw new h(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new h(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function uu(t,e,n){if(!n.isEqual(e))throw new h(l.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function cu(t){if(Vn(t)&&0===t.on.length)throw new h(l.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var lu=function(){function t(t,e,n){this.Ff=t,this.firestore=e,this.d_=n}return t.prototype.where=function(e,n,r){k("Query.where",arguments,3),B("Query.where",3,r);var i=M("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,n),o=Ba("Query.where",e),s=function(t,e,n,r,i,o,s){var a;if(i.p()){if("array-contains"===o||"array-contains-any"===o)throw new h(l.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){au(s,o);for(var u=[],c=0,f=s;c<f.length;c++){var p=f[c];u.push(su(r,t,p))}a={arrayValue:{values:u}}}else a=su(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||au(s,o),a=Fa(n,"Query.where",s,"in"===o||"not-in"===o);var d=tr.create(i,o,a);return function(t,e){if(e.hn()){var n=Bn(t);if(null!==n&&!n.isEqual(e.field))throw new h(l.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=qn(t);null!==r&&uu(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new h(l.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new h(l.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,d),d}(this.Ff,0,this.firestore.mf,this.firestore.__,o,i,r);return new t(function(t,e){var n=t.filters.concat([e]);return new jn(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.Ff,s),this.firestore,this.d_)},t.prototype.orderBy=function(e,n){var r;if(D("Query.orderBy",arguments,1,2),x("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new h(l.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Ba("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new h(l.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new h(l.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new pr(e,n);return function(t,e){if(null===qn(t)){var n=Bn(t);null!==n&&uu(0,n,e.field)}}(t,r),r}(this.Ff,i,r);return new t(function(t,e){var n=t.on.concat([e]);return new jn(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.Ff,o),this.firestore,this.d_)},t.prototype.limit=function(e){return k("Query.limit",arguments,1),C("Query.limit","number",1,e),W("Query.limit",1,e),new t(zn(this.Ff,e,"F"),this.firestore,this.d_)},t.prototype.limitToLast=function(e){return k("Query.limitToLast",arguments,1),C("Query.limitToLast","number",1,e),W("Query.limitToLast",1,e),new t(zn(this.Ff,e,"L"),this.firestore,this.d_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];P("Query.startAt",arguments,1);var i=this.xf("Query.startAt",e,n,!0);return new t(Kn(this.Ff,i),this.firestore,this.d_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];P("Query.startAfter",arguments,1);var i=this.xf("Query.startAfter",e,n,!1);return new t(Kn(this.Ff,i),this.firestore,this.d_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];P("Query.endBefore",arguments,1);var i=this.xf("Query.endBefore",e,n,!0);return new t($n(this.Ff,i),this.firestore,this.d_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];P("Query.endAt",arguments,1);var i=this.xf("Query.endAt",e,n,!1);return new t($n(this.Ff,i),this.firestore,this.d_)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","Query",1,e);return this.firestore===e.firestore&&Xn(this.Ff,e.Ff)&&this.d_===e.d_},t.prototype.withConverter=function(e){return new t(this.Ff,this.firestore,e)},t.prototype.xf=function(t,e,n,i){if(B(t,1,e),e instanceof iu)return k(t,r.__spreadArrays([e],n),1),function(t,e,n,r,i){if(!r)throw new h(l.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Hn(t);s<a.length;s++){var u=a[s];if(u.field.p())o.push(le(e,r.key));else{var c=r.field(u.field);if(Jt(c))throw new h(l.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var f=u.field.R();throw new h(l.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(c)}}return new cr(o,i)}(this.Ff,this.firestore.__,t,e.Df,i);var o=[e].concat(n);return function(t,e,n,r,i,o){var s=t.on;if(i.length>s.length)throw new h(l.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.p()){if("string"!=typeof c)throw new h(l.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Gn(t)&&-1!==c.indexOf("/"))throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var f=t.path.child(A.g(c));if(!R.F(f))throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var p=new R(f);a.push(le(e,p))}else{var d=Fa(n,r,c);a.push(d)}}return new cr(a,o)}(this.Ff,this.firestore.__,this.firestore.mf,t,o,i)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];D("Query.onSnapshot",arguments,1,4);var s={},a=0;if("object"!=typeof i[a]||Xa(i[a])||(G("Query.onSnapshot",s=i[a],["includeMetadataChanges"]),j("Query.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++),Xa(i[a])){var u=i[a];i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else C("Query.onSnapshot","function",a,i[a]),x("Query.onSnapshot","function",a+1,i[a+1]),x("Query.onSnapshot","function",a+2,i[a+2]);var c={next:function(t){i[a]&&i[a](new hu(r.firestore,r.Ff,t,r.d_))},error:i[a+1],complete:i[a+2]};return cu(this.Ff),this.firestore.hf().listen(this.Ff,s,c)},t.prototype.get=function(t){var e=this;D("Query.get",arguments,0,1),vu("Query.get",t),cu(this.Ff);var n=this.firestore.hf();return(t&&"cache"===t.source?n.j_(this.Ff):n.K_(this.Ff,t)).then((function(t){return new hu(e.firestore,e.Ff,t,e.d_)}))},t}(),hu=function(){function t(t,e,n,r){this.yf=t,this.$f=e,this.kf=n,this.d_=r,this.Mf=null,this.Of=null,this.metadata=new ru(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.kf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.kf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;D("QuerySnapshot.forEach",arguments,1,2),C("QuerySnapshot.forEach","function",1,t),this.kf.docs.forEach((function(r){t.call(e,n.Lf(r,n.metadata.fromCache,n.kf.Wt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new lu(this.$f,this.yf,this.d_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(G("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),j("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.kf.Kt)throw new h(l.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Mf&&this.Of===e||(this.Mf=function(t,e,n){if(t.Qt.m()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Wt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Qt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Wt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:gu(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.kf,e,this.Lf.bind(this)),this.Of=e),this.Mf},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","QuerySnapshot",1,e);return this.yf===e.yf&&Xn(this.$f,e.$f)&&this.kf.isEqual(e.kf)&&this.d_===e.d_},t.prototype.Lf=function(t,e,n){return new ou(this.yf,t.key,t,e,n,this.d_)},t}(),fu=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Mn(e),n,r)||this).Bf=e,e.length%2!=1)throw new h(l.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.R()+" has "+e.length);return i}return r.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Ff.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Ff.path.h();return t.m()?null:new nu(new R(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Ff.path.R()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){D("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=X.k()),C("CollectionReference.doc","non-empty string",1,t);var e=A.g(t);return nu.Rf(this.Ff.path.child(e),this.firestore,this.d_)},e.prototype.add=function(t){k("CollectionReference.add",arguments,1);var e=this.d_?this.d_.toFirestore(t):t;C("CollectionReference.add","object",1,e);var n=this.doc();return new nu(n.f_,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Bf,this.firestore,t)},e}(lu);function pu(t,e){if(void 0===e)return{merge:!1};if(G(t,e,["merge","mergeFields"]),j(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+q(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+q(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof ya}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new h(l.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function du(t,e){return void 0===e?{}:(G(t,e,["serverTimestamps"]),F(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function vu(t,e){x(t,"object",1,e),e&&(G(t,e,["source"]),F(t,0,"source",e.source,["default","server","cache"]))}function yu(t,e,n){if(e instanceof Ra){if(e.firestore!==n)throw new h(l.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw H(t,"DocumentReference",1,e)}function gu(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return m()}}function mu(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var bu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.serverTimestamp=function(){O("FieldValue.serverTimestamp",arguments);var t=new _a("serverTimestamp");return t.e_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){O("FieldValue.delete",arguments);var t=new ba("deleteField");return t.e_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];P("FieldValue.arrayUnion",arguments,1);var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return P("arrayUnion()",arguments,1),new Ia("arrayUnion",t)}.apply(void 0,t);return r.e_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];P("FieldValue.arrayRemove",arguments,1);var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return P("arrayRemove()",arguments,1),new Ea("arrayRemove",t)}.apply(void 0,t);return r.e_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){C("FieldValue.increment","number",1,t),k("FieldValue.increment",arguments,1);var n=function(t){return new Ta("increment",t)}(t);return n.e_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.l_.isEqual(t.l_)},e}(Sa),wu={Firestore:Za,GeoPoint:Aa,Timestamp:at,Blob:rt,Transaction:tu,WriteBatch:eu,DocumentReference:nu,DocumentSnapshot:iu,Query:lu,QueryDocumentSnapshot:ou,QuerySnapshot:hu,CollectionReference:fu,FieldPath:ya,FieldValue:bu,setLogLevel:Za.setLogLevel,CACHE_SIZE_UNLIMITED:Ya};!function(t){!function(t,e){t.INTERNAL.registerComponent(new u.Component("firestore",(function(t){return function(t,e){var n=new pa,r=new fa(n);return new Za(t,e,r,n)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},wu)))}(t),t.registerVersion("@firebase/firestore","1.18.0")}(c.default)},4594:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(e),n.d(e,{LogLevel:()=>o,Logger:()=>h,setLogLevel:()=>f,setUserLogHandler:()=>p});var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},1313:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(655),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}var d=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,v.prototype.create),i}return r.__extends(e,t),e}(Error),v=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?function(t,e){return t.replace(y,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new d(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}(),y=/\{\$([^}]+)}/g;function g(t){return JSON.parse(t)}var m=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=g(c(o[0])||""),n=g(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},b=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^u&(c^l),s=1518500249):(o=u^c^l,s=1859775393):r<60?(o=u&c|l&(u|c),s=2400959708):(o=u^c^l,s=3395469782),i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),w=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=_),void 0===r.error&&(r.error=_),void 0===r.complete&&(r.complete=_);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function _(){}function I(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(r+" argument ")}var E=144e5;e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=v,e.FirebaseError=d,e.MAX_VALUE_MILLIS=E,e.RANDOM_FACTOR=.5,e.Sha1=b,e.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},e.assert=o,e.assertionError=s,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=a(t);return u.encodeByteArray(e,!0)},e.calculateBackoffMillis=function(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(E,r+i)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new w(t,e);return n.subscribe.bind(n)},e.decode=m,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.errorPrefix=I,e.getUA=f,e.isAdmin=function(t){var e=m(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return f().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!=indexedDB},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=p,e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!p()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return f().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=m(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=m(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=m(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=g,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(I(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(I(t,e,r)+"must be a valid context object.")},e.validateIndexedDBOpenable=function(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(I(t,e,r)+"must be a valid firebase namespace.")}},3705:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ErrorCode:()=>nr,EventType:()=>rr,WebChannel:()=>ir,XhrIo:()=>or,createWebChannelTransport:()=>er,default:()=>sr});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},a=a||{},u=s||self;function c(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function h(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var p="closure_uid_"+(1e9*Math.random()>>>0),d=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:y).apply(null,arguments)}function m(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var b=Date.now;function w(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function _(){this.j=this.j,this.i=this.i}_.prototype.j=!1,_.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,p)&&t[p]||(t[p]=++d)}(this)},_.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var I=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},E=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function A(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function S(t){return/^[\s\xa0]*$/.test(t)}var N,R=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function O(t,e){return-1!=t.indexOf(e)}function k(t,e){return t<e?-1:t>e?1:0}t:{var P=u.navigator;if(P){var D=P.userAgent;if(D){N=D;break t}}N=""}function C(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function x(t){var e={};for(var n in t)e[n]=t[n];return e}var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<L.length;o++)n=L[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function F(t){return F[" "](t),t}F[" "]=c;var M,U,V=O(N,"Opera"),q=O(N,"Trident")||O(N,"MSIE"),B=O(N,"Edge"),G=B||q,H=O(N,"Gecko")&&!(O(N.toLowerCase(),"webkit")&&!O(N,"Edge"))&&!(O(N,"Trident")||O(N,"MSIE"))&&!O(N,"Edge"),W=O(N.toLowerCase(),"webkit")&&!O(N,"Edge");function z(){var t=u.document;return t?t.documentMode:void 0}t:{var K="",$=(U=N,H?/rv:([^\);]+)(\)|;)/.exec(U):B?/Edge\/([\d\.]+)/.exec(U):q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(U):W?/WebKit\/(\S+)/.exec(U):V?/(?:Version)[ \/]?(\S+)/.exec(U):void 0);if($&&(K=$?$[1]:""),q){var X=z();if(null!=X&&X>parseFloat(K)){M=String(X);break t}}M=K}var J,Y={};function Q(t){return function(t,e){var n=Y;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=R(String(M)).split("."),r=R(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=k(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||k(0==s[2].length,0==a[2].length)||k(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}u.document&&q?J=z()||parseInt(M,10)||void 0:J=void 0;var Z=J,tt=!q||9<=Number(Z),et=q&&!Q("9"),nt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",c,e),u.removeEventListener("test",c,e)}catch(t){}return t}();function rt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function it(t,e){if(rt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(H){t:{try{F(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ot[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}rt.prototype.b=function(){this.defaultPrevented=!0},w(it,rt);var ot={2:"touch",3:"pen",4:"mouse"};it.prototype.b=function(){it.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,et)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var st="closure_listenable_"+(1e6*Math.random()|0),at=0;function ut(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++at,this.Y=this.Z=!1}function ct(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function lt(t){this.src=t,this.a={},this.b=0}function ht(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=I(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ct(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ft(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}lt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ft(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ut(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),dt={};function vt(t,e,n,r,i){if(r&&r.once)return gt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vt(t,e[o],n,r,i);return null}return n=At(n),t&&t[st]?t.va(e,n,f(r)?!!r.capture:!!r,i):yt(t,e,n,!1,r,i)}function yt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=f(i)?!!i.capture:!!i;if(s&&!tt)return null;var a=Et(t);if(a||(t[pt]=a=new lt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=It,e=tt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(wt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function gt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)gt(t,e[o],n,r,i);return null}return n=At(n),t&&t[st]?t.wa(e,n,f(r)?!!r.capture:!!r,i):yt(t,e,n,!0,r,i)}function mt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)mt(t,e[o],n,r,i);else r=f(r)?!!r.capture:!!r,n=At(n),t&&t[st]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ft(o=t.a[e],n,r,i))&&(ct(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Et(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ft(e,n,r,i)),(n=-1<t?e[t]:null)&&bt(n))}function bt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[st])ht(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(wt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Et(e))?(ht(n,t),0==n.b&&(n.src=null,e[pt]=null)):ct(t)}}}function wt(t){return t in dt?dt[t]:dt[t]="on"+t}function _t(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&bt(t),n.call(r,e)}function It(t,e){if(t.Y)return!0;if(!tt){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return _t(t,e=new it(e,this))}return _t(t,new it(e,this))}function Et(t){return(t=t[pt])instanceof lt?t:null}var Tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function At(t){return"function"==l(t)?t:(t[Tt]||(t[Tt]=function(e){return t.handleEvent(e)}),t[Tt])}function St(){_.call(this),this.c=new lt(this),this.J=this,this.C=null}function Nt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ht(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}w(St,_),St.prototype[st]=!0,(o=St.prototype).addEventListener=function(t,e,n,r){vt(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){mt(this,t,e,n,r)},o.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new rt(t,n);else if(t instanceof rt)t.target=t.target||n;else{var i=t;j(t=new rt(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Nt(s,r,!0,t)&&i}if(i=Nt(s=t.a=n,r,!0,t)&&i,i=Nt(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Nt(s=t.a=e[o],r,!1,t)&&i;return i},o.G=function(){if(St.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ct(n[r]);delete e.a[t],e.b--}}this.C=null},o.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},o.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Rt=u.JSON.stringify;function Ot(){this.b=this.a=null}var kt,Pt=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Ct}),(function(t){t.reset()}),100);function Dt(){var t=Ft,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ct(){this.next=this.b=this.a=null}function xt(t){u.setTimeout((function(){throw t}),0)}function Lt(t,e){kt||function(){var t=u.Promise.resolve(void 0);kt=function(){t.then(Mt)}}(),jt||(kt(),jt=!0),Ft.add(t,e)}Ot.prototype.add=function(t,e){var n=Pt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ct.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ct.prototype.reset=function(){this.next=this.b=this.a=null};var jt=!1,Ft=new Ot;function Mt(){for(var t;t=Dt();){try{t.a.call(t.b)}catch(t){xt(t)}var e=Pt;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}jt=!1}function Ut(t,e){St.call(this),this.b=t||1,this.a=e||u,this.f=g(this.Ya,this),this.g=b()}function Vt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function qt(t,e,n){if("function"==l(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Bt(t){t.a=qt((function(){t.a=null,t.c&&(t.c=!1,Bt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}w(Ut,St),(o=Ut.prototype).aa=!1,o.M=null,o.Ya=function(){if(this.aa){var t=b()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Vt(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=b())},o.G=function(){Ut.S.G.call(this),Vt(this),delete this.a};var Gt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Bt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(_);function Ht(t){_.call(this),this.b=t,this.a={}}w(Ht,_);var Wt=[];function zt(t,e,n,r){Array.isArray(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var i=0;i<n.length;i++){var o=vt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Kt(t){C(t.a,(function(t,e){this.a.hasOwnProperty(e)&&bt(t)}),t),t.a={}}function $t(){this.a=!0}function Xt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Rt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Ht.prototype.G=function(){Ht.S.G.call(this),Kt(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$t.prototype.info=function(){};var Jt=null;function Yt(){return Jt=Jt||new St}function Qt(t){rt.call(this,"serverreachability",t)}function Zt(t){var e=Yt();e.dispatchEvent(new Qt(e,t))}function te(t){rt.call(this,"statevent",t)}function ee(t){var e=Yt();e.dispatchEvent(new te(e,t))}function ne(t){rt.call(this,"timingevent",t)}function re(t,e){if("function"!=l(t))throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){t()}),e)}w(Qt,rt),w(te,rt),w(ne,rt);var ie={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},oe={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function se(){}function ae(t){var e;return(e=t.a)||(e=t.a={}),e}function ue(){}se.prototype.a=null;var ce,le={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function he(){rt.call(this,"d")}function fe(){rt.call(this,"c")}function pe(){}function de(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Ht(this),this.P=ve,t=G?125:void 0,this.R=new Ut(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}w(he,rt),w(fe,rt),w(pe,se),ce=new pe;var ve=45e3,ye={},ge={};function me(t,e,n){t.H=1,t.i=Ve(xe(e)),t.j=n,t.I=!0,be(t,null)}function be(t,e){t.u=b(),Ie(t),t.l=xe(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Ze(n.b,"t",r),t.D=0,t.a=$n(t.g,t.g.C?e:null),0<t.O&&(t.F=new Gt(g(t.Ca,t,t.a),t.O)),zt(t.J,t.a,"readystatechange",t.Wa),e=t.B?x(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Zt(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function we(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=_e(t,n);if(i==ge){4==e&&(t.h=4,ee(14),r=!1),Xt(t.c,t.f,null,"[Incomplete Response]");break}if(i==ye){t.h=4,ee(15),Xt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Xt(t.c,t.f,i,null),Ne(t,i)}4==e&&0==n.length&&(t.h=1,ee(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vn(e),e.F=!0)):(Xt(t.c,t.f,n,"[Invalid Chunked Response]"),Se(t),Ae(t))}function _e(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ge:(n=Number(e.substring(n,r)),isNaN(n)?ye:(r+=1)+n>e.length?ge:(e=e.substr(r,n),t.D=r+n,e))}function Ie(t){t.U=b()+t.P,Ee(t,t.P)}function Ee(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=re(g(t.Ua,t),e)}function Te(t){t.o&&(u.clearTimeout(t.o),t.o=null)}function Ae(t){0==t.g.v||t.A||Gn(t.g,t)}function Se(t){Te(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Vt(t.R),Kt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ne(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||an(n.b,t)))if(n.I=t.N,!t.C&&an(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Bn(n),Pn(n)}Un(n),ee(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=re(g(n.Ra,n),6e3));if(1>=sn(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Wn(n,11)}else if((t.C||n.a==t)&&Bn(n),!S(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(O(l,"spdy")||O(l,"quic")||O(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(un(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ue(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=b()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Kn(u,u.C?u.ga:null,u.fa),p.C){cn(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Te(d),Ie(d)),u.a=p}else Mn(u);0<n.g.length&&xn(n)}else"stop"!=i[0]&&"close"!=i[0]||Wn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Wn(n,7):kn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Zt(4)}catch(t){}}function Re(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)E(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(h(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Oe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Oe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ke(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(o=de.prototype).setTimeout=function(t){this.P=t},o.Wa=function(t){t=t.target;var e=this.F;e&&3==Sn(t)?e.f():this.Ca(t)},o.Ca=function(t){try{if(t==this.a)t:{var e=Sn(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!G&&!this.a.$())){this.A||4!=e||7==n||Zt(8==n||0>=r?3:2),Te(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ee(12),Se(this),Ae(this);break t}Xt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ne(this,u)}this.I?(we(this,e,o),G&&this.b&&3==e&&(zt(this.J,this.R,"tick",this.Va),this.R.start())):(Xt(this.c,this.f,o,null),Ne(this,o)),4==e&&Se(this),this.b&&!this.A&&(4==e?Gn(this.g,this):(this.b=!1,Ie(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ee(12)):(this.h=0,ee(13)),Se(this),Ae(this)}}}catch(t){}},o.Va=function(){if(this.a){var t=Sn(this.a),e=this.a.$();this.D<e.length&&(Te(this),we(this,t,e),this.b&&4!=t&&Ie(this))}},o.cancel=function(){this.A=!0,Se(this)},o.Ua=function(){this.o=null;var t=b();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Zt(3),ee(17)),Se(this),this.h=2,Ae(this)):Ee(this,this.U-t)},(o=Oe.prototype).K=function(){ke(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},o.L=function(){return ke(this),this.a.concat()},o.get=function(t,e){return Pe(this.b,t)?this.b[t]:e},o.set=function(t,e){Pe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},o.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var De=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ce(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ce){this.a=void 0!==e?e:t.a,Le(this,t.f),this.j=t.j,je(this,t.c),Fe(this,t.h),this.g=t.g,e=t.b;var n=new Xe;n.c=e.c,e.a&&(n.a=new Oe(e.a),n.b=e.b),Me(this,n),this.i=t.i}else t&&(n=String(t).match(De))?(this.a=!!e,Le(this,n[1]||"",!0),this.j=qe(n[2]||""),je(this,n[3]||"",!0),Fe(this,n[4]),this.g=qe(n[5]||"",!0),Me(this,n[6]||"",!0),this.i=qe(n[7]||"")):(this.a=!!e,this.b=new Xe(null,this.a))}function xe(t){return new Ce(t)}function Le(t,e,n){t.f=n?qe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function je(t,e,n){t.c=n?qe(e,!0):e}function Fe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Me(t,e,n){e instanceof Xe?(t.b=e,function(t,e){e&&!t.f&&(Je(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ye(this,e),Ze(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Be(e,Ke)),t.b=new Xe(e,t.a))}function Ue(t,e,n){t.b.set(e,n)}function Ve(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^b()).toString(36)),t}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ge),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ge(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ce.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Be(e,He,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Be(e,He,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?ze:We,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Be(n,$e)),t.join("")};var He=/[#\/\?@]/g,We=/[#\?:]/g,ze=/[#\?]/g,Ke=/[#\?@]/g,$e=/#/g;function Xe(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Je(t){t.a||(t.a=new Oe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ye(t,e){Je(t),e=tn(t,e),Pe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ke(t)))}function Qe(t,e){return Je(t),e=tn(t,e),Pe(t.a.b,e)}function Ze(t,e,n){Ye(t,e),0<n.length&&(t.c=null,t.a.set(tn(t,e),A(n)),t.b+=n.length)}function tn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function en(t,e){this.b=t,this.a=e}function nn(t){this.g=t||rn,t=u.PerformanceNavigationTiming?0<(t=u.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(o=Xe.prototype).add=function(t,e){Je(this),this.c=null,t=tn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},o.forEach=function(t,e){Je(this),this.a.forEach((function(n,r){E(n,(function(n){t.call(e,n,r,this)}),this)}),this)},o.L=function(){Je(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},o.K=function(t){Je(this);var e=[];if("string"==typeof t)Qe(this,t)&&(e=T(e,this.a.get(tn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},o.set=function(t,e){return Je(this),this.c=null,Qe(this,t=tn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},o.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var rn=10;function on(t){return!!t.b||!!t.a&&t.a.size>=t.f}function sn(t){return t.b?1:t.a?t.a.size:0}function an(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function un(t,e){t.a?t.a.add(e):t.b=e}function cn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ln(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var o=i(t.a.values()),s=o.next();!s.done;s=o.next()){var a=s.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return A(t.c)}function hn(){}function fn(){this.a=new hn}function pn(t,e,n){var r=n||"";try{Re(t,(function(t,n){var i=t;f(t)&&(i=Rt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function dn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}nn.prototype.cancel=function(){var t,e;if(this.c=ln(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},hn.prototype.stringify=function(t){return u.JSON.stringify(t,void 0)},hn.prototype.parse=function(t){return u.JSON.parse(t,void 0)};var vn=u.JSON.parse;function yn(t){St.call(this),this.headers=new Oe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=gn,this.D=this.F=!1}w(yn,St);var gn="",mn=/^https?$/i,bn=["POST","PUT"];function wn(t){return"content-type"==t.toLowerCase()}function _n(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,In(t),Tn(t)}function In(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function En(t){if(t.b&&void 0!==a&&(!t.s[1]||4!=Sn(t)||2!=t.X()))if(t.l&&4==Sn(t))qt(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==Sn(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(De)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!mn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var c=2<Sn(t)?t.a.statusText:""}catch(t){c=""}t.f=c+" ["+t.X()+"]",In(t)}}finally{Tn(t)}}}function Tn(t,e){if(t.a){An(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function An(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(u.clearTimeout(t.m),t.m=null)}function Sn(t){return t.a?t.a.readyState:0}function Nn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return C(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ue(t,e,n))}function Rn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function On(t){this.pa=0,this.g=[],this.c=new $t,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Rn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Rn("baseRetryDelayMs",5e3,t),this.Ma=Rn("retryDelaySeedMs",1e4,t),this.Ja=Rn("forwardChannelMaxRetries",2,t),this.ma=Rn("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new nn(t&&t.concurrentRequestLimit),this.ka=new fn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function kn(t){if(Dn(t),3==t.v){var e=t.R++,n=xe(t.B);Ue(n,"SID",t.J),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),jn(t,n),(e=new de(t,t.c,e,void 0)).H=2,e.i=Ve(xe(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(e.i.toString(),"")),!n&&u.Image&&((new Image).src=e.i,n=!0),n||(e.a=$n(e.g,null),e.a.ba(e.i)),e.u=b(),Ie(e)}zn(t)}function Pn(t){t.a&&(Vn(t),t.a.cancel(),t.a=null)}function Dn(t){Pn(t),t.j&&(u.clearTimeout(t.j),t.j=null),Bn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&u.clearTimeout(t.h),t.h=null)}function Cn(t,e){t.g.push(new en(t.La++,e)),3==t.v&&xn(t)}function xn(t){on(t.b)||t.h||(t.h=!0,Lt(t.Ba,t),t.u=0)}function Ln(t,e){var n;n=e?e.f:t.R++;var r=xe(t.B);Ue(r,"SID",t.J),Ue(r,"RID",n),Ue(r,"AID",t.P),jn(t,r),t.i&&t.l&&Nn(r,t.i,t.l),n=new de(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Fn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),un(t.b,n),me(n,r,e)}function jn(t,e){t.f&&Re({},(function(t,n){Ue(e,n,t)}))}function Fn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?g(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{pn(l,s,"req"+c+"_")}catch(t){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Mn(t){t.a||t.j||(t.U=1,Lt(t.Aa,t),t.o=0)}function Un(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=re(g(t.Aa,t),Hn(t,t.o)),t.o++,0))}function Vn(t){null!=t.s&&(u.clearTimeout(t.s),t.s=null)}function qn(t){t.a=new de(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=xe(t.la);Ue(e,"RID","rpc"),Ue(e,"SID",t.J),Ue(e,"CI",t.H?"0":"1"),Ue(e,"AID",t.P),jn(t,e),Ue(e,"TYPE","xmlhttp"),t.i&&t.l&&Nn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ve(xe(e)),n.j=null,n.I=!0,be(n,t)}function Bn(t){null!=t.m&&(u.clearTimeout(t.m),t.m=null)}function Gn(t,e){var n=null;if(t.a==e){Bn(t),Vn(t),t.a=null;var r=2}else{if(!an(t.b,e))return;n=e.s,cn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=b()-e.u;var i=t.u;(r=Yt()).dispatchEvent(new ne(r,n,e,i)),xn(t)}else Mn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(sn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=re(g(t.Ba,t,e),Hn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Un(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Wn(t,5);break;case 4:Wn(t,10);break;case 3:Wn(t,6);break;default:Wn(t,2)}}function Hn(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Wn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=g(t.Xa,t);n||(n=new Ce("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||Le(n,"https"),Ve(n)),function(t,e){var n=new $t;if(u.Image){var r=new Image;r.onload=m(dn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=m(dn,n,r,"TestLoadImage: error",!1,e),r.onabort=m(dn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=m(dn,n,r,"TestLoadImage: timeout",!1,e),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ee(2);t.v=0,t.f&&t.f.ra(e),zn(t),Dn(t)}function zn(t){t.v=0,t.I=-1,t.f&&(0==ln(t.b).length&&0==t.g.length||(t.b.c.length=0,A(t.g),t.g.length=0),t.f.qa())}function Kn(t,e,n){var r=function(t){return t instanceof Ce?xe(t):new Ce(t,void 0)}(n);if(""!=r.c)e&&je(r,e+"."+r.c),Fe(r,r.h);else{var i=u.location;r=function(t,e,n,r){var i=new Ce(null,void 0);return t&&Le(i,t),e&&je(i,e),n&&Fe(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&C(t.W,(function(t,e){Ue(r,e,t)})),e=t.A,n=t.na,e&&n&&Ue(r,e,n),Ue(r,"VER",t.ha),jn(t,r),r}function $n(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yn(t.Ka)).F=t.C,e}function Xn(){}function Jn(){if(q&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function Yn(t,e){St.call(this),this.a=new On(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!S(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!S(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new tr(this)}function Qn(t){he.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Zn(){fe.call(this),this.status=1}function tr(t){this.a=t}(o=yn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ae(this.H):ae(ce),this.a.onreadystatechange=g(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void _n(this,t)}t=n||"";var i=new Oe(this.headers);r&&Re(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=wn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=u.FormData&&t instanceof u.FormData,!(0<=I(bn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{An(this),0<this.o&&((this.D=function(t){return q&&Q(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=g(this.xa,this)):this.m=qt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){_n(this,t)}},o.xa=function(){void 0!==a&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},o.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Tn(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Tn(this,!0)),yn.S.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?En(this):this.Ta())},o.Ta=function(){En(this)},o.X=function(){try{return 2<Sn(this)?this.a.status:-1}catch(t){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},o.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),vn(e)}},o.ua=function(){return this.h},o.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(o=On.prototype).ha=8,o.v=1,o.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new de(this,this.c,t,void 0),r=this.l;if(this.O&&(r?j(r=x(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Fn(this,n,e),Ue(i=xe(this.B),"RID",t),Ue(i,"CVER",22),this.A&&Ue(i,"X-HTTP-Session-Id",this.A),jn(this,i),this.i&&r&&Nn(i,this.i,r),un(this.b,n),this.Ga&&Ue(i,"TYPE","init"),this.da?(Ue(i,"$req",e),Ue(i,"SID","null"),n.V=!0,me(n,i,null)):me(n,i,e),this.v=2}}else 3==this.v&&(t?Ln(this,t):0==this.g.length||on(this.b)||Ln(this))},o.Aa=function(){if(this.j=null,qn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=re(g(this.Sa,this),t)}},o.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Pn(this),qn(this))},o.Ra=function(){null!=this.m&&(this.m=null,Pn(this),Un(this),ee(19))},o.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),ee(2)):(this.c.info("Failed to ping google.com"),ee(1))},(o=Xn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ha=function(){},Jn.prototype.a=function(t,e){return new Yn(t,e)},w(Yn,St),(o=Yn.prototype).addEventListener=function(t,e,n,r){Yn.S.addEventListener.call(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){Yn.S.removeEventListener.call(this,t,e,n,r)},o.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;ee(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Kn(t,null,t.fa),xn(t)},o.close=function(){kn(this.a)},o.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Cn(this.a,e)}else this.g?((e={}).__data__=Rt(t),Cn(this.a,e)):Cn(this.a,t)},o.G=function(){this.a.f=null,delete this.f,kn(this.a),delete this.a,Yn.S.G.call(this)},w(Qn,he),w(Zn,fe),w(tr,Xn),tr.prototype.ta=function(){this.a.dispatchEvent("a")},tr.prototype.sa=function(t){this.a.dispatchEvent(new Qn(t))},tr.prototype.ra=function(t){this.a.dispatchEvent(new Zn(t))},tr.prototype.qa=function(){this.a.dispatchEvent("b")},Jn.prototype.createWebChannel=Jn.prototype.a,Yn.prototype.send=Yn.prototype.Pa,Yn.prototype.open=Yn.prototype.Oa,Yn.prototype.close=Yn.prototype.close,ie.NO_ERROR=0,ie.TIMEOUT=8,ie.HTTP_ERROR=6,oe.COMPLETE="complete",ue.EventType=le,le.OPEN="a",le.CLOSE="b",le.ERROR="c",le.MESSAGE="d",St.prototype.listen=St.prototype.va,yn.prototype.listenOnce=yn.prototype.wa,yn.prototype.getLastError=yn.prototype.Qa,yn.prototype.getLastErrorCode=yn.prototype.ua,yn.prototype.getStatus=yn.prototype.X,yn.prototype.getResponseJson=yn.prototype.Na,yn.prototype.getResponseText=yn.prototype.$,yn.prototype.send=yn.prototype.ba;var er=function(){return new Jn},nr=ie,rr=oe,ir=ue,or=yn;const sr={createWebChannelTransport:er,ErrorCode:ie,EventType:oe,WebChannel:ue,XhrIo:yn}},1923:(t,e,n)=>{"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=r(n(5752));i.default.registerVersion("firebase","7.24.0","app"),t.exports=i.default},3621:(t,e,n)=>{"use strict";n.d(e,{s:()=>i});var r=n(8249);class i{set id(t){this._id=t,this.id&&!this.form&&(this.form=new r.l0({content:{value:"",validators:[r.kI.required,r.kI.minLength(10),r.kI.maxLength(124)]}}))}get id(){return this._id}get anyLoading(){return this.liking||this.deleting||this.addingSubComment||this.loadingSubcomments}constructor(t){this.createDate=new Date,this.likes=[],this.quantityComments=0,this.liking=!1,this.deleting=!1,this.addingSubComment=!1,this.showSubcomments=!1,this.loadingSubcomments=!1,this.subComments=[],Object.assign(this,t)}}},223:(t,e,n)=>{"use strict";n.d(e,{n:()=>l});var r=n(8713);class i{get isExtenal(){var t;return""!==(null!==(t=this.externalUrl)&&void 0!==t?t:"")}constructor(t){this.preContent="",this.content="",this.externalUrl="",this.createDate=new Date,this.updatedDate=null,this.quantityComments=0,this.likes=[],Object.assign(this,t)}}var o=n(3621);class s{constructor(t){this.createDate=new Date,Object.assign(this,t)}}var a=n(4901),u=n(4782),c=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))};let l=class{constructor(t,e){this.firebaseService=t,this.authService=e}get(){return c(this,void 0,void 0,(function*(){return(yield this.firebaseService.app.firestore().collection("articles").orderBy("createDate","desc").get()).docs.map((t=>{const e=t.data();return new i(Object.assign(Object.assign({id:t.id},e),{createDate:e.createDate.toDate()}))}))}))}getById(t){return c(this,void 0,void 0,(function*(){const e=yield this.firebaseService.app.firestore().collection("articles").doc(t).get(),n=e.data();return new i(Object.assign(Object.assign({id:e.id},n),{createDate:n.createDate.toDate()}))}))}getComments(t,e){return c(this,void 0,void 0,(function*(){let n=this.firebaseService.app.firestore().collection("articles-comments").where("articleId","==",t).where("parentId","==",e||null);const r=yield n.orderBy("createDate","asc").get(),i=[];for(let t of r.docs){const e=t.data();i.push(new o.s(Object.assign(Object.assign({},e),{id:t.id,likes:yield this.getCommentLikes(t.id),quantityComments:yield this.getHowManyCommentsHave(t.id),createDate:e.createDate.toDate()})))}return i}))}getCommentLikes(t){return c(this,void 0,void 0,(function*(){return(yield this.firebaseService.app.firestore().collection("comments-likes").where("commentId","==",t).orderBy("createDate","desc").get()).docs.map((t=>{const e=t.data();return Object.assign(Object.assign({id:t.id},e),{createDate:e.createDate.toDate()})}))}))}getHowManyCommentsHave(t){return c(this,void 0,void 0,(function*(){return(yield this.firebaseService.app.firestore().collection("articles-comments").where("parentId","==",t).get()).size}))}addComment(t){return c(this,void 0,void 0,(function*(){const e=Object.assign(Object.assign({},t),{createDate:u.E.fromDate(t.createDate)});return delete e.likes,delete e.quantityComments,delete e.liking,delete e.deleting,delete e.showSubcomments,delete e.loadingSubcomments,delete e.addingSubComment,delete e.subComments,delete e.form,(yield this.firebaseService.app.firestore().collection("articles-comments").add(e)).id}))}removeComment(t){return c(this,void 0,void 0,(function*(){yield this.firebaseService.app.firestore().collection("articles-comments").doc(t).delete();const e=(yield this.firebaseService.app.firestore().collection("comments-likes").where("commentId","==",t).get()).docs;for(const t of e)yield this.unlikeComment(t.id);const n=(yield this.firebaseService.app.firestore().collection("articles-comments").where("parentId","==",t).get()).docs;for(const t of n)yield this.removeComment(t.id)}))}likeComment(t){return c(this,void 0,void 0,(function*(){let e=new s({commentId:t.id,articleId:t.articleId,authorName:this.authService.user.displayName,authorPhotoUrl:this.authService.user.photoURL,authorEmail:this.authService.user.email,type:"1"}),n=Object.assign(Object.assign({},e),{createDate:u.E.fromDate(e.createDate)});const r=yield this.firebaseService.app.firestore().collection("comments-likes").add(n);return e.id=r.id,e}))}unlikeComment(t){return c(this,void 0,void 0,(function*(){yield this.firebaseService.app.firestore().collection("comments-likes").doc(t).delete()}))}};l=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,r.G)({single:!0}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[u.D,a.X])],l)},4901:(t,e,n)=>{"use strict";n.d(e,{X:()=>l});var r=n(8713),i=n(4782);class o{constructor(t){this.isAdmin=!1,Object.assign(this,t)}}var s=n(1923),a=n.n(s),u=(n(8818),function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}),c=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))};let l=class{get auth(){return this.firebaseService.app.auth()}get user(){const t=localStorage.getItem(this.AUTH_KEY_STORAGE);return t?new o(JSON.parse(atob(t))):null}get isLogged(){return null!=localStorage.getItem(this.AUTH_KEY_STORAGE)}get adminIsLogged(){let t=this.user;return!(!t||!t.isAdmin)}constructor(t){this.firebaseService=t,this.AUTH_KEY_STORAGE="user_auth"}doGoogleAuth(){return c(this,void 0,void 0,(function*(){yield this.doAuthByProvider(new(a().auth.GoogleAuthProvider))}))}doFacebookAuth(){return c(this,void 0,void 0,(function*(){yield this.doAuthByProvider(new(a().auth.FacebookAuthProvider))}))}doGithubAuth(){return c(this,void 0,void 0,(function*(){yield this.doAuthByProvider(new(a().auth.GithubAuthProvider))}))}doAuth(t,e){var n,r;return c(this,void 0,void 0,(function*(){yield this.auth.signOut();const i=yield this.auth.signInWithEmailAndPassword(t,e);yield this.setAuthenticatedUser(i.user,null!==(r=null===(n=i.credential)||void 0===n?void 0:n.providerId)&&void 0!==r?r:"email")}))}doAuthByProvider(t){var e,n;return c(this,void 0,void 0,(function*(){yield this.auth.signOut();const r=yield this.auth.signInWithPopup(t);yield this.setAuthenticatedUser(r.user,null!==(n=null===(e=r.credential)||void 0===e?void 0:e.providerId)&&void 0!==n?n:"email")}))}doLogout(){return c(this,void 0,void 0,(function*(){yield this.auth.signOut(),this.removeAuthenticatedUser()}))}setAuthenticatedUser(t,e="email"){var n,r;return c(this,void 0,void 0,(function*(){const i=Object.assign({},t);if("email"===e){const t=yield this.firebaseService.app.firestore().collection("user-data").where("email","==",i.email).limit(1).get();if(t.docs.length>0){const e=t.docs[0].data();i.displayName=e.name,i.photoURL=e.photoURL}}const s=new o({displayName:null!==(n=i.displayName)&&void 0!==n?n:"",email:i.email,photoURL:null!==(r=i.photoURL)&&void 0!==r?r:"",providerId:e,isAdmin:"email"===e});localStorage.setItem(this.AUTH_KEY_STORAGE,btoa(JSON.stringify(s)))}))}removeAuthenticatedUser(){localStorage.removeItem(this.AUTH_KEY_STORAGE)}};l=u([(0,r.G)({single:!0}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[i.D])],l)},4782:(t,e,n)=>{"use strict";n.d(e,{D:()=>u,E:()=>a});var r=n(8713),i=n(1923),o=n.n(i),s=(n(3023),function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s});const a=o().firestore.Timestamp;let u=class{get app(){return this._app}constructor(){this._app=null,this._app=o().initializeApp({apiKey:"AIzaSyDyTRoin6xxsuTHaDyS8uiGejjKK1C6bsM",authDomain:"personal-page-cf5c6.firebaseapp.com",databaseURL:"https://personal-page-cf5c6.firebaseio.com",projectId:"personal-page-cf5c6",storageBucket:"personal-page-cf5c6.appspot.com",messagingSenderId:"529543325792",appId:"1:529543325792:web:bda4cb13df138463417b05",measurementId:"G-MZ8XBP3BJF"})}};u=s([(0,r.G)({single:!0}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],u)},5297:(t,e,n)=>{"use strict";n.d(e,{l:()=>Z,q:()=>Y}),n(7645);var r=n(1431),i=n(6290),o=n(3036),s=n(8414),a=n(9718),u=n(1819),c=n(5342),l=n(507),h=n(4052);let f=class extends c.j{onRender(){}onIterate(){return this.compile(this.value)?[new l.o]:[]}onChange(){}onDestroy(){}};f=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,h.E)({selector:["if"]})],f);var p=n(9754);let d=class extends c.j{constructor(){super(),this.last={iteration:[],data:[]}}onRender(){}onIterate(){let t=this.value.trim();t.startsWith("(")&&t.endsWith(")")&&(t=t.substr(1,t.length-2));const e=t.startsWith("let ")||t.startsWith("var ")||t.startsWith("const "),n=t.split(" ")[e?1:0],r={expressionOrName:t.split(" ").slice(e?3:2).join(""),value:this.compile(t.split(" ").slice(e?3:2).join(""))};if(!(0,p.isArray)(r.value))return this.element.remove(),console.error(`SyntaxError: Invalid expression: ${r.expressionOrName} does not appear to be an array.`),[];let i=!1,o=null;return this.last.data=r.value,this.last.iteration.length!==r.value.length&&(this.last.iteration=r.value.map(((t,e)=>new l.o({beginFn:()=>{i=n in this.scope,o=i?this.scope[n]:null,this.scope[n]=this.last.data[e],this.scope.$index=e},endFn:()=>{delete this.scope.$index,i?this.scope[n]=o:delete this.scope[n]}})))),this.last.iteration}onChange(){}onDestroy(){}};d=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,h.E)({selector:"for"}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],d);var v=n(7009),y=n(2509),g=n(4104);let m=class extends v.X{get baseHref(){return Z.instance.baseHref}get hasBaseHref(){return Z.instance.hasBaseHref}constructor(t){super(),this.listenersCollector=t,this.isListening=!1,this.canClick=!0}onRender(){var t;this.canClick=!1;let e=null!==(t=this.value)&&void 0!==t?t:"",n=e.startsWith("#")||e.startsWith("/#"),i=e.replace(/^(#)/g,"");e.startsWith("http:")||e.startsWith("https:")||(r.F.useHash?n?console.error(`The link "#${i}" with "#" not work in useHash mode setted in NimbleApple.`):i="#/"+i.replace(/^(\/)/g,""):(this.canClick=!0,n?i=`${location.pathname}#${i}`:i.startsWith("/")||(i=`${this.baseHref.replace(/(\/)$/g,"")}/${i}`),this.isListening||(this.isListening=!0,this.listenersCollector.subscribe(this.element,"click",(t=>{if(this.canClick){let e=this.element.attributes[this.selector],n=null==e?void 0:e.value;n&&!n.startsWith(this.baseHref)||(setTimeout((()=>{r.F.redirect(n)})),t.preventDefault())}}),!0)))),this.element.hasAttribute(this.selector)?this.element.attributes[this.selector].value=i:this.element.setAttribute(this.selector,i)}onChange(){this.onRender()}onDestroy(){this.isListening=!1}};m=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,y.C)({selector:"href"}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[g.x])],m);var b=n(3432),w=n(9402);let _=class extends v.X{constructor(t){super(),this.listener=t}onRender(){this.listener.listen(this.element,this.selector.replace(/\(|\)/g,""),(t=>{this.outputs[this.selector](t)}))}onChange(){}onDestroy(){}};_=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,y.C)({selector:["(copy)","(cut)","(past)"]}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[w.a])],_);let I=class extends v.X{constructor(t){super(),this.listener=t}onRender(){this.listener.listen(this.element,this.selector.replace(/\(|\)/g,""),(t=>{this.outputs[this.selector](t)}))}onChange(){}onDestroy(){}};I=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,y.C)({selector:["(drag)","(dragend)","(dragenter)","(dragleave)","(dragover)","(dragstart)","(drop)","(scrol)"]}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[w.a])],I);let E=class extends v.X{constructor(t){super(),this.listener=t}onRender(){this.listener.listen(this.element,this.selector.replace(/\(|\)/g,""),(t=>{this.outputs[this.selector](t)}))}onChange(){}onDestroy(){}};E=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,y.C)({selector:["(blur)","(focus)","(input)","(select)"]}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[w.a])],E);let T=class extends v.X{constructor(t){super(),this.listener=t}onRender(){this.listener.listen(this.element,this.selector.replace(/\(|\)/g,""),(t=>{this.outputs[this.selector](t)}))}onChange(){}onDestroy(){}};T=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,y.C)({selector:["(keydown)","(keypress)","(keyup)"]}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[w.a])],T);let A=class extends v.X{constructor(t){super(),this.listener=t}onRender(){this.listener.listen(this.element,this.selector.replace(/\(|\)/g,""),(t=>{this.outputs[this.selector](t)}))}onChange(){}onDestroy(){}};A=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,y.C)({selector:["(click)","(dblclick)","(mousedown)","(mousemove)","(mouseout)","(mouseover)","(mouseup)","(mousewheel)","(wheel)"]}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[w.a])],A);var S=n(9741),N=n(1745);let R=class{constructor(){this.subscribedEvents=[]}add(t,e,n){this.subscribedEvents.push({scope:t,selector:e,subscription:n})}cancelAll(){let t=this.subscribedEvents.pop();for(;t;)t.subscription.unsubscribe(),t=this.subscribedEvents.pop()}cancelByScope(t){let e=this.subscribedEvents.filter((e=>e.scope===t));if(e.length){for(let t of e)t.subscription.unsubscribe();this.subscribedEvents=this.subscribedEvents.filter((t=>!e.some((e=>e===t))))}}cancelByScopeAndSelector(t,e){let n=this.subscribedEvents.filter((n=>n.selector===e&&n.scope===t));if(n.length){for(let t of n)t.subscription.unsubscribe();this.subscribedEvents=this.subscribedEvents.filter((t=>!n.some((e=>e===t))))}}};R=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,N.GS)({single:!0})],R);var O=n(1499);let k=class extends O.e{constructor(t,e){super(),this.listenerCollector=t,this.internalEventsCollector=e}onRender(){this.checkForm()&&(["form-field","form-field-name"].some((t=>t===this.selector))?this.elementIsValid()&&(this.value instanceof S.W||this.formFieldNameSelectorIsValid())&&(this.formField.setElement(this.element),this.canApplyFormField()&&(this.resolveFormFieldSelector(),this.resolveFormFieldSpecifications())):"(valueChange)"===this.selector&&this.resolveValueChangeSelector())}onChange(){["form-field","form-field-name"].some((t=>t===this.selector))&&this.elementIsValid()&&(this.value instanceof S.W||this.formFieldNameSelectorIsValid())&&this.resolveFormFieldSpecifications()}onDestroy(){}formFieldNameSelectorIsValid(){return"string"!=typeof this.value?(console.error("Some form-field-name directive cannot be appplied, because the it value must be a string."),!1):!!this.form.has(this.value)||(console.error(`The form-field-name directive cannot be appplied, because the "${this.value}" field not exists in the form.`),!1)}resolveFormFieldSpecifications(){var t,e;this.formField&&(this.formField.isEnabled?null===(t=this.element)||void 0===t||t.removeAttribute("disabled"):null===(e=this.element)||void 0===e||e.setAttribute("disabled","true"))}resolveFormFieldSelector(){let t=this.formField,e=this.element;if("radio"===e.type)e.value!==t.value&&(e.value||t.value)||(e.checked=!0),this.listenerCollector.subscribe(this.element,"click",(n=>{this.formField.isEnabled&&(t.elements.forEach((t=>{t!==e&&(t.checked=!1)})),e.checked=!0,t.setValue(e.value))}),!0);else if("checkbox"===e.type){let n=e.hasAttribute("value")?e.value:"";(0,p.isBoolean)(t.value)?e.checked=t.value:e.checked=n===t.value||(0,p.isArray)(t.value)&&t.value.some((t=>t===n)),this.listenerCollector.subscribe(this.element,"click",(r=>{if(this.formField.isEnabled)if(1===t.elements.length)(0,p.isBoolean)(t.value)?t.setValue(e.checked):t.setValue(e.checked?n:"");else if(t.elements.every((t=>t.hasAttribute("value")))){let r=(0,p.isArray)(t.value)?t.value:[t.value];e.checked?r.push(n):r=r.filter((t=>t!==n)),t.setValue(r)}else console.error('The [form-field] input of type "checkbox" must contain the attribute "value"')}),!0)}else e.value=(0,p.isUndefined)(t.value)?null:t.value,this.listenerCollector.subscribe(e,"input",(n=>{if(this.formField.isEnabled){let n=e.value;"number"===e.type&&(n=isNaN(parseInt(n))?null:parseInt(n)),t.setValue(n,{noUpdateElement:!0})}}),!0)}resolveValueChangeSelector(){this.formField?this.internalEventsCollector.add(this.scope,"(valueChanges)",this.formField.valueChanges.subscribe((t=>{this.outputs.valueChanges(t)}))):console.error("The directive (valueChanges) cannot be appplied, because the [form-field] directive must exist before it.")}canApplyFormField(){return!this.others.some((t=>t instanceof O.e))}elementIsValid(){return[HTMLInputElement,HTMLTextAreaElement,HTMLSelectElement].some((t=>this.element instanceof t))}};k=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,y.C)({selector:["[form-field]","form-field-name","(valueChange)"]}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[g.x,R])],k);let P=class extends O.e{get mask(){return this.value}constructor(t){super(),this.listenerCollector=t,this.RULES={CHARS:{NUMBER:"0".toString(),LETTER:"Z".toString()},REGEX:{NUMBER:/[0-9]/,LETTER:/[a-zA-Z]/}}}onRender(){if(this.checkForm()&&this.elementIsValid())try{this.checkValueOnInitialize(),this.listenerCollector.subscribe(this.element,"keypress",this.onKeypress.bind(this),!0),this.listenerCollector.subscribe(this.element,"input",this.onInput.bind(this),!0)}catch(t){console.error(t.message)}}onChange(){this.checkForm()&&this.checkValueOnInitialize()}onDestroy(){}elementIsValid(){return this.element instanceof HTMLInputElement&&("text"===this.element.type||"password"===this.element.type)?""!==this.value&&!(0,p.isNullOrUndefined)(this.value)||(console.warn(`The directive "${this.selector}" cannot works with empty value.`),!1):(console.error(`The directive "${this.selector}" only applies in input with type="text".`),!1)}characterInKeypressIsValid(t,e){return e.toString()===this.RULES.CHARS.NUMBER?this.RULES.REGEX.NUMBER.test(t.toString()):e.toString()!==this.RULES.CHARS.LETTER||this.RULES.REGEX.LETTER.test(t.toString())}characterAfterInputIsValid(t,e){return e.toString()===this.RULES.CHARS.NUMBER?this.RULES.REGEX.NUMBER.test(t.toString()):e.toString()===this.RULES.CHARS.LETTER?this.RULES.REGEX.LETTER.test(t.toString()):t.toString()===e.toString()}checkValueOnInitialize(){let t=this.element,e=this.formField?this.formField.value:t.value;e=this.applyMask((0,p.isNullOrUndefined)(e)?"":e),t.value=e,this.formField&&e!==this.formField.value&&this.formField.setValue(e,{noNotify:!0,noUpdateElement:!0,noValidate:!0})}onKeypress(t){let e=this.element,n=e.value.length,r=this.mask.length,i=t.key,o=this.mask[n];if(1===i.length){if(n>=r)return void t.preventDefault();if(!this.characterInKeypressIsValid(i,o))return void t.preventDefault()}if(!o||i.length>1)return;let s=this.applyMaskInCharacter(i,o,n);s.includes(i)&&t.preventDefault(),e.value+=s}onInput(t){let e=this.element,n=this.applyMask(e.value);e.value=n,this.formField&&n!==this.formField.value&&this.formField.setValue(e.value,{noUpdateElement:!0})}applyMaskInCharacter(t,e,n){return e.toString()===this.RULES.CHARS.NUMBER&&this.RULES.REGEX.NUMBER.test(t.toString())||e.toString()===this.RULES.CHARS.LETTER&&this.RULES.REGEX.LETTER.test(t.toString())?"":this.getNextSequencialMaskChars(n)}getNextSequencialMaskChars(t){let e="";for(let n=t;n<this.mask.length;n++){let t=this.mask[n].toString();if(t===this.RULES.CHARS.NUMBER&&this.RULES.REGEX.NUMBER.test(t)||t===this.RULES.CHARS.LETTER&&this.RULES.REGEX.LETTER.test(t))break;e+=t}return e}applyMask(t){for(var e=0;e<t.length;e++){let n=t[e].toString(),r=this.mask[e];if(!r){t=t.substr(0,e);break}if(r=r.toString(),this.characterAfterInputIsValid(n,r)){let i=this.applyMaskInCharacter(n,r,e);i&&n!==r&&(t+=i)}else{if(this.isSpecialCharacter(r)&&n!==r){let n=t.substr(0,e),i=t.substr(e);t=n+r+i;continue}t=t.substr(0,e)+t.substr(e+1),e--}}return t}isSpecialCharacter(t){return!this.RULES.REGEX.LETTER.test(t.toString())&&!this.RULES.REGEX.NUMBER.test(t.toString())}};P=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,y.C)({selector:["field-mask"]}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[g.x])],P);var D=n(4401);let C=class extends O.e{constructor(t,e){super(),this.helper=t,this.listenerCollector=e,this.format="",this.previousIsBackspace=!1}onRender(){if(this.checkForm()&&this.elementIsValid())try{this.format=this.value,this.prepareRegex(),this.checkValueOnInitialize(),this.listenerCollector.subscribe(this.element,"keypress",this.onKeypress.bind(this),!0),this.listenerCollector.subscribe(this.element,"keydown",this.onKeydown.bind(this),!0),this.listenerCollector.subscribe(this.element,"input",this.onInput.bind(this),!0)}catch(t){console.error(t.message)}}onChange(){this.format=this.value,this.prepareRegex(),this.checkValueOnInitialize()}onDestroy(){}checkValueOnInitialize(){let t=this.element,e=this.formField?this.formField.value:t.value;e="string"==typeof e?e.replace(/[^\d]/g,""):"",e.match(this.regex)?e="":(e=e.replace(/[^\d]/g,""),e=this.applyMask(e)),t.value=e,this.formField&&e!==this.formField.value&&this.formField.setValue(t.value,{noNotify:!0,noUpdateElement:!0,noValidate:!0})}elementIsValid(){return this.element instanceof HTMLInputElement&&"text"===this.element.type?""!==this.value&&!(0,p.isNullOrUndefined)(this.value)||(console.warn(`The directive "${this.selector}" cannot works with empty value.`),!1):(console.error(`The directive "${this.selector}" only applies in input with type="text".`),!1)}prepareRegex(){let t="";this.format&&(this.format.includes("-")||this.format.includes("/")?(this.format.includes("-")||this.format.includes("/"))&&(this.separator=this.format.includes("-")?"-":"/",this.format.split(this.separator).forEach((e=>{let n="";"dd"===e.toLowerCase()?n="([0-2]\\d{1}|3[0-1])":"mm"===e.toLowerCase()?n="(0\\d{1}|1[0-2])":"yyyy"===e.toLowerCase()&&(n="\\d{4}"),n&&(t+=(""!==t?this.separator:"")+n)}))):"dd"===this.format.toLowerCase()?t+="([0-2]\\d{1}|3[0-1])":"mm"===this.format.toLowerCase()?t+="(0\\d{1}|1[0-2])":"yyyy"===this.format.toLowerCase()&&(t+="\\d{4}")),""===t&&(this.separator="/",this.format="dd/MM/yyyy",t="([0-2]\\d{1}|3[0-1])/(0d{1}|1[0-2])/\\d{4}"),this.regex=new RegExp(t,"g")}onKeypress(t){let e=this.element,n=t.key,r=e.value,i=r,o=e.selectionStart,s=e.selectionEnd;if(1===n.length)if((r.length<this.format.length||o!==s)&&/^\d+$/.test(n)){i=this.helper.insertInTextWithInterval(r,n,e.selectionStart,e.selectionEnd);let o=this.checkDateIsValid(i);if(!o.valid)return void t.preventDefault();o.nextValue&&(e.value=i+o.nextValue,t.preventDefault(),e.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0})))}else t.preventDefault()}onKeydown(t){this.previousIsBackspace=this.isBackspace(t)}onInput(t){try{let e=this.element,n=e.value;this.previousIsBackspace||(n.match(this.regex)?t.preventDefault():(n=n.replace(/[^\d]/g,""),n=this.applyMask(n),e.value=n)),this.formField&&n!==this.formField.value&&this.formField.setValue(e.value,{noUpdateElement:!0})}finally{this.previousIsBackspace=!1}}checkDateIsValid(t){let e={valid:!1,formatedValue:"",nextValue:""};if((t=t.substr(0,this.format.length)).length!==this.format.length){let r="";if(this.separator)for(var n=0;n<this.format.length;n++){let i=this.format[n],o=n+1;if(i===this.separator)n===t.length&&(e.nextValue=this.separator),r+=i;else if(o<=t.length){let e=n-(r.split(this.separator).length-1);r+=t.replace(/[^\d]/g,"")[e]}else r+="1"}e.formatedValue=r}else e.formatedValue=t;return e.valid=!(0,p.isNullOrUndefined)(e.formatedValue.match(this.regex)),e}applyMask(t){let e=(t=(t||"").substr(0,this.format.replace(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,.\/]/,"").length)).length;if(t){let r="";for(var n=0;n<e;n++){let e=t[n];this.format[n+(r.split(this.separator).length-1)]===this.separator&&(r+=this.separator),r+=e}return r=r.substr(0,this.format.length),r}return t}isBackspace(t){let e=t.keyCode||t.charCode;return 8==e||46==e}};C=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,y.C)({selector:["field-date-mask"]}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[D.W,g.x])],C);let x=class extends O.e{get prefix(){var t;return null!==(t=this.options.prefix)&&void 0!==t?t:""}get decimalSymbol(){var t;return null!==(t=this.options.decimal)&&void 0!==t?t:","}get thousandsSymbol(){var t;return null!==(t=this.options.thousands)&&void 0!==t?t:"."}get precision(){var t;return null!==(t=this.options.precision)&&void 0!==t?t:2}constructor(t,e){super(),this.helper=t,this.listenerCollector=e,this.options={prefix:"",decimal:",",thousands:".",precision:2}}onRender(){if(this.checkForm()&&this.elementIsValid())try{this.defineOptions(),this.checkValueOnInitialize(),this.listenerCollector.subscribe(this.element,"keypress",this.onKeypress.bind(this),!0),this.listenerCollector.subscribe(this.element,"input",this.onInput.bind(this),!0)}catch(t){console.error(t.message)}}onChange(){this.defineOptions(),this.checkValueOnInitialize()}defineOptions(){(0,p.isObject)(this.value)?Object.assign(this.options,this.value):(0,p.isNullOrUndefined)(this.value)||(this.options.prefix=this.value.toString())}checkValueOnInitialize(){let t=this.element,e=this.formField?this.formField.value:t.value.replace(/[^\d]/g,"");e=this.applyMask(e,!1),t.value=e;let n=this.parseFloat(e);this.formField&&n!==this.formField.value&&this.formField.setValue(n,{noNotify:!0,noUpdateElement:!0,noValidate:!0})}elementIsValid(){return this.element instanceof HTMLInputElement&&"text"===this.element.type||(console.error(`The directive "${this.selector}" only applies in input with type="text".`),!1)}onKeypress(t){let e=this.element,n=t.key;e.value,e.selectionStart,e.selectionEnd,1===n.length&&(/^\d+$/.test(n)||t.preventDefault())}onInput(t){let e=this.element,n=e.value;n=this.applyMask(n),e.value=n;let r=this.parseFloat(n);this.formField&&r!==this.formField.value&&this.formField.setValue(r,{noUpdateElement:!0})}applyMask(t,e=!0){if("string"==typeof(t=t||0))if(e)t=t.replace(/([^0-9]*)/g,"").replace(/^0+/g,"");else{let e=this.prefix?`([${this.prefix}| ]*)`:"([ ]*)";t=t.toString().replace(new RegExp(e,"g"),""),t=this.parseFloat(t)}let n="",r="";return(t=t.toString()).includes(".")?(n=t.split(".")[0],r=this.helper.padRight(t.split(".")[1],this.precision)):e?(n=t.substr(0,t.length-this.precision),r=t.length>this.precision?t.substr(r.length-this.precision):t):n=t,n=n?n.replace(/(\d)(?=(?:[0-9]{3})+\b)/g,(t=>`${t}${this.thousandsSymbol}`)):"0",r=this.helper.padLeft(r,this.precision),t=`${n}${this.decimalSymbol}${r}`,(this.prefix?`${this.prefix} `:"")+t}parseFloat(t){return this.prefix&&(t=t.replace(this.prefix,"").trim()),t=t.replace(new RegExp(`[/${this.thousandsSymbol}]`,"g"),""),"."!==this.decimalSymbol&&(t=t.replace(this.decimalSymbol,".")),""!==t?parseFloat(t):null}onDestroy(){}};x=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,y.C)({selector:["field-currency-mask"]}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[D.W,g.x])],x);var L=n(9336);let j=class extends v.X{constructor(){super()}onRender(){"html"===this.selector?this.resolveHtml():"content"===this.selector&&this.resolveContent()}onChange(){this.onRender()}resolveHtml(){var t;this.element.innerHTML.trim()!==(null!==(t=this.value)&&void 0!==t?t:"").trim()&&(this.element.innerHTML=this.value)}resolveContent(){var t,e;(null===(t=this.element)||void 0===t?void 0:t.textContent.trim())!==(null!==(e=this.value)&&void 0!==e?e:"").trim()&&(this.element.textContent=this.value)}onDestroy(){}};j=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,y.C)({selector:["html","content"]}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],j);const F=[f,d,m,b.Z,j,_,I,E,T,A,L.$,k,P,C,x];n(7966);var M=n(2688),U=n(2938);class V{constructor(){this.providers=new Map}addProvider(t){this.assertInjectableIfClassProvider(t),this.providers.set(t.provide,t)}removeProvider(t){this.providers.has(t)&&this.providers.delete(t)}inject(t,e){let n=this.providers.get(t);return void 0!==n||t instanceof M.Ol||(n={provide:t,useClass:t},this.assertInjectableIfClassProvider(n)),this.injectWithProvider(t,n,e)}injectWithProvider(t,e,n){if(void 0===e)throw new Error(`No provider for type ${this.getTokenName(t)}`);if((0,M.Gq)(e)){let t=this.injectClass(e,n);return n&&n(t),t}if((0,M.f$)(e)){let t=this.injectSingleton(e,n);return n&&n(t),t}return(0,M.cv)(e)?this.injectValue(e):this.injectFactory(e)}assertInjectableIfClassProvider(t){if((0,M.Gq)(t)&&!(0,N.Qh)(t.useClass))throw new Error(`Cannot provide ${this.getTokenName(t.provide)} using class ${this.getTokenName(t.useClass)}, ${this.getTokenName(t.useClass)} isn't injectable`)}injectClass(t,e){const n=t.useClass,r=this.getInjectedParams(n,e);return Reflect.construct(n,r)}injectSingleton(t,e){if(!t.instance){const n=t.useSingleton,r=this.getInjectedParams(n,e);t.instance=Reflect.construct(n,r)}return t.instance}injectValue(t){return t.useValue}injectFactory(t){return t.useFactory()}getInjectedParams(t,e){const n=Reflect.getMetadata("design:paramtypes",t);return void 0===n?[]:n.map(((n,r)=>{if(void 0===n)throw new Error(`Injection error. Recursive dependency detected in constructor for type ${t.name} with parameter at index ${r}`);const i=(0,U.r)(t,r),o=void 0===i?n:i;let s=this.providers.get(o);return this.injectWithProvider(o,s,e)}))}getTokenName(t){return t instanceof M.Ol?t.injectionIdentifier:t.name}}var q=n(8421);let B=class{get app(){return Z.instance}constructor(){}resolveTitleAndMetaTags(t){var e;let n=t.pageInstance,r=this.resolveTitle(n.title);if(n.meta){let t=null!==(e=this.resolveMetaAndContent('name="description"',n.meta.description,r))&&void 0!==e?e:r;if(t=this.resolveMetaAndContent('name="keywords"',n.meta.keywords,t),n.meta.og){let e=n.meta.og,r=Object.keys(n.meta.og).filter((t=>!(0,p.isNullOrUndefined)(e[t])&&""!==e[t])).map((t=>t.replace(/([A-Z])/g,(t=>`_${t.toLowerCase()}`))));if(n.title)for(let t of["title","siteName"].filter((t=>!r.some((e=>e===t)))))r.push(t),e[t]=n.title;!r.some((t=>"description"===t))&&n.meta.description&&(r.push("description"),e.description=n.meta.description);for(let n of r)t=this.resolveMetaAndContent(`property="og:${n}"`,e[n],t)}}}resolveTitle(t){let e=document.head.querySelector("title");return e?e.textContent=null!=t?t:"":(e=document.createElement("title"),e.textContent=null!=t?t:"",document.head.prepend(e)),e}resolveMetaAndContent(t,e,n){if(t&&e){let r=document.head.querySelector(`[${t}]`);if(!r){r=document.createElement("meta");let e=t.split("=")[0],i=t.split("=")[1].replace(/"/g,"");n?n.after(r):document.head.prepend(r),r.setAttribute(e,i)}return r.setAttribute("content",e),r}return n}};B=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,N.GS)({single:!0}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],B);var G=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))};let H=class extends l.c{constructor(t,e){super(e),this.headerRender=t,this.listenersCollector=e}prepareRouteToCompileAndRender(t){var e;return G(this,void 0,void 0,(function*(){let n=[t,...t.getAllParents()];n.reverse();let i=r.F.previous?r.F.getCommonParentOfTwoRoutes(t,r.F.previous):null;for(let t of n){const n=null===(e=null==i?void 0:i.isChild(t,!0))||void 0===e||e;i&&!n||(this.createElementFromStructure(t.structuredTemplate),yield t.pageInstance.onEnter())}}))}compileAndRenderRoute(t){var e,n,i;let o=[t,...t.getAllParents()].reverse(),s=o.shift(),a=r.F.previous?r.F.getCommonParentOfTwoRoutes(t,r.F.previous):null;if(a&&r.F.previous){const t=[r.F.previous,...r.F.previous.getAllParents()];for(let r of t){if(r===a)break;null===(n=null===(e=r.structuredTemplate)||void 0===e?void 0:e.compiledNode)||void 0===n||n.remove()}}(null===(i=null==a?void 0:a.structuredTemplate)||void 0===i?void 0:i.nodeIsRenderedInDOM)&&a.structuredTemplate.removeCompiledNode(),this.headerRender.resolveTitleAndMetaTags(s),this.listenersCollector.unsubscribeAll(),q.C.removeAllChildrenOfElement(this.app.rootElement);let u=this.compileElementFromStructure(s.structuredTemplate),c=u;for(let t of o){let e=this.getRouterElement(c);if(e){let n=this.compileElementFromStructure(t.structuredTemplate);e.appendChild(n),c=n}this.headerRender.resolveTitleAndMetaTags(t)}this.app.rootElement.appendChild(u)}rerenderRoute(t){let e=[t,...t.getAllParents()].reverse(),n=null;for(let t of e){if(!n||t.structuredTemplate.isRendered)this.recompileElementFromStructure(t.structuredTemplate);else{let e=this.getRouterElement(n);if(e){let r=this.compileElementFromStructure(t.structuredTemplate);e.appendChild(r),n=r}}n=t.structuredTemplate.compiledNode}}notifyRoutesAfterRouteChanged(t){return G(this,void 0,void 0,(function*(){let e=r.F.previous,n=t.getHighestParentOrHimself(),i=e?r.F.getCommonParentOfTwoRoutes(t,e):n;return yield this.notifyOldRoutesElementDestroyed(i,e),{isRendered:yield this.notifyNewRoutesElementRendered(i,n,t)}}))}notifyRoutesAfterRerender(t){return G(this,void 0,void 0,(function*(){let e=r.F.previous,n=t.getHighestParentOrHimself(),i=e?r.F.getCommonParentOfTwoRoutes(t,e):n;return{isRendered:yield this.notifyNewRoutesElementRendered(i,n,t,!0)}}))}notifyRoutesAfterInit(t){return G(this,void 0,void 0,(function*(){let e=[t,...t.getAllParents()];for(let t of e.reverse())t.pageInstance.isAfterInitialized||(t.pageInstance.isAfterInitialized=!0,yield t.pageInstance.onAfterInit())}))}notifyOldRoutesElementDestroyed(t,e){return G(this,void 0,void 0,(function*(){if(e){let n=[];for(let r of[e,...e.getAllParents()]){if(r===t)break;n.push(r)}for(let t of n.reverse())t.pageInstance.isDestroyed||(t.pageInstance.isDestroyed=!0,yield t.pageInstance.onDestroy())}}))}notifyNewRoutesElementRendered(t,e,n,r=!1){return G(this,void 0,void 0,(function*(){let i=[],o=[n,...n.getAllParents()];if(r||t===e||e===n)i=o;else for(let e of o){if(e===t)break;i.push(e)}let s=!0,a=0;for(let t of i.reverse())s=t.structuredTemplate.isRendered,!t.pageInstance.isInitialized&&s&&("{id}"===t.path&&(a=performance.now()),t.pageInstance.isInitialized=!0,yield t.pageInstance.onInit());return s}))}getRouterElement(t){return t?t.querySelector("nimble-router"):null}};H=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,N.GS)({single:!0}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[B,g.x])],H);var W=n(8358),z=n(1025),K=n(1912),$=n(8397),X=n(221);const J=[D.W,l.c,H,K.o,z.i,$.S,B,W.e,w.a,g.x,R,X.W];var Y,Q=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))};class Z{get rootElement(){return this._rootElement}get baseHref(){return this._baseHref}get hasBaseHref(){return""!==this.baseHref&&"/"!==this.baseHref}get routes(){return r.F.routes}constructor(t){this.config=t,this.containerInjector=new V,this.afterRenderFn=null,this.state=Y.INITIALIZING,this.firstRender=!0,this.changedRoute=!1,this._rootElement=null,this._baseHref="/",this.iterationElementsApplied={real:[],virtual:[]},this.directives=[]}static config(t){return this.instance||(this.instance=new Z(t),this.instance.afterInstanciate()),this.instance}afterInstanciate(){var t,e;try{this.defineRootElement(),this.registerDirectives(),this.registerProvidersInContainerInjector(),this._baseHref=null!==(e=null===(t=document.head.querySelector("base"))||void 0===t?void 0:t.href)&&void 0!==e?e:"/",this._baseHref=this._baseHref.replace(location.origin,""),r.F.useHash=this.config.useHash,r.F.registerRoutes(this.config.routes),this.routeRender=this.containerInjector.inject(H)}catch(t){console.error(t)}}defineRootElement(){this._rootElement=document.querySelector("nimble-root"),this.rootElement?(this.rootElement.innerHTML="",this.rootElement.style.removeProperty("visibility")):console.error("Nimble not work, because the '<nimble-root></nimble-root>' element not found in body.")}registerDirectives(){let t=[...F];this.config.directives&&this.config.directives.length>0&&(t=t.concat(this.config.directives)),t.forEach((t=>{try{t.prototype.validate(this.directives),this.directives.push(t)}catch(t){console.error(t)}}))}registerProvidersInContainerInjector(){let t=[...J];this.config.providers&&this.config.providers.length>0&&(t=t.concat(this.config.providers)),this.providers=t,this.providers.forEach((t=>{t.prototype.single?this.containerInjector.addProvider({provide:t,useSingleton:t}):this.containerInjector.addProvider({provide:t,useClass:t})}))}start(){return this.state===Y.INITIALIZING&&(this.registerElements(),r.F.addListener(u.u.STARTED_CHANGE,this.onRouteStartChange.bind(this)),r.F.addListener(u.u.FINISHED_CHANGE,this.onRouteFinishedChange.bind(this)),r.F.addListener(u.u.CHANGE_ERROR,this.onRouteChangeError.bind(this)),r.F.addListener(u.u.STARTED_LOADING,this.onRouteStartedLoading.bind(this)),r.F.addListener(u.u.FINISHED_LOADING,this.onRouteFinishedLoading.bind(this)),r.F.addListener(u.u.ERROR_LOADING,this.onRouteErrorLoading.bind(this)),r.F.addListener(u.u.STARTED_RERENDER,this.onRouteStartRerender.bind(this)),r.F.addListener(u.u.FINISHED_RERENDER,this.onRouteFinishedRerender.bind(this)),r.F.addListener(u.u.RENDERING,this.onRouteRendering.bind(this)),r.F.start(),this.state=Y.INITIALIZED),Z.instance}registerElements(){window.customElements.define("nimble-page",i.W),window.customElements.define("nimble-router",o.q),window.customElements.define("nimble-dialog",s.Q),window.customElements.define("nimble-dialog-area",a.x)}onRouteStartChange(t){this.changedRoute=!1}onRouteRendering(t){return Q(this,void 0,void 0,(function*(){t.route&&(yield this.routeRender.prepareRouteToCompileAndRender(t.route),this.routeRender.compileAndRenderRoute(t.route))}))}onRouteFinishedChange(t){var e;return Q(this,void 0,void 0,(function*(){t.route&&(this.state=Y.RERENDERING,performance.now(),yield this.routeRender.notifyRoutesAfterRouteChanged(t.route),this.changedRoute=!0,null===(e=t.route.pageInstance)||void 0===e||e.render())}))}onRouteChangeError(t){}onRouteStartedLoading(t){}onRouteFinishedLoading(t){}onRouteErrorLoading(t){}onRouteStartRerender(t){r.F.state,r.F.previousState,this.state=Y.RERENDERING,this.routeRender.rerenderRoute(t.route)}onRouteFinishedRerender(t){return Q(this,void 0,void 0,(function*(){const{isRendered:e}=yield this.routeRender.notifyRoutesAfterRerender(t.route);this.changedRoute&&e&&(yield this.routeRender.notifyRoutesAfterInit(t.route),yield this.checkHashLinkAfterRouteChanged()),document.dispatchEvent(new Event("render-event")),this.state=Y.INITIALIZED}))}checkHashLinkAfterRouteChanged(){return Q(this,void 0,void 0,(function*(){this.changedRoute=!1,location.hash&&!this.config.useHash?yield new Promise((t=>{setTimeout((()=>{let e=location.hash;location.hash="",location.hash=e,t()}),250)})):(document.body.style.scrollBehavior="initial",document.children.item(0).style.scrollBehavior="initial",yield new Promise((t=>{setTimeout((()=>{document.body.scrollTo({top:0,left:0}),document.children.item(0).scrollTo({top:0,left:0}),document.body.style.scrollBehavior="",document.children.item(0).style.scrollBehavior="",t()}))})))}))}static inject(t,e){return this.instance.containerInjector.inject(t,e)}static registerProvider(t){this.instance.containerInjector.addProvider(t)}static unregisterProvider(t){this.instance.containerInjector.removeProvider(t)}static get listener(){return this.instance.containerInjector.inject(w.a)}}!function(t){t.INITIALIZING="INITIALIZING",t.INITIALIZED="INITIALIZED",t.RERENDERING="RERENDERING"}(Y||(Y={}))},2792:(t,e,n)=>{"use strict";n.d(e,{Q:()=>r});class r{constructor(){this.listeners=[]}notify(t){for(let e of this.listeners)e.success&&e.success(t)}error(t){for(let e of this.listeners)e.error&&e.error(t)}subscribe(t,e){let n=new i(t,e,this);return this.listeners.push(n),n}unsubscribe(t){this.listeners=this.listeners.filter((e=>e!==t))}}class i{constructor(t,e,n){this.success=t,this.error=e,this.observer=n}unsubscribe(){this.observer&&this.observer.unsubscribe(this)}}},4904:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});class r{get element(){return this.getElement()}constructor(t,e,n){this.getElement=e,this.builderClose=n,this.escClose=!0,this.clickoutClose=!0,Object.assign(this,t),this.config&&(this.data=this.config.data),this.onClose=new Promise((t=>{this.promiseCloseResolve=t}))}close(t){setTimeout((()=>this.builderClose(this,this.promiseCloseResolve,t)))}}},6453:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});class r{onOpen(){}onClose(){}render(t){return e=this,n=void 0,i=function*(){return t&&t(),this.onNeedRerender?yield this.onNeedRerender(this):new Promise((t=>t()))},new((r=void 0)||(r=Promise))((function(t,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(s,a)}u((i=i.apply(e,n||[])).next())}));var e,n,r,i}compile(t){try{return new Function(`with(this) { return ${t} }`).call(this)}catch(t){return console.error(t),null}}}},1025:(t,e,n)=>{"use strict";n.d(e,{T:()=>c,i:()=>l});var r=n(1745),i=n(2688),o=n(4904),s=n(5297),a=n(1912),u=n(8397);const c=new i.Ol("DIALOG_REF");let l=class{get app(){return s.l.instance}constructor(t,e){this.dialogRender=t,this.dialogCollector=e}open(t,e){let n,r;const i=new o.z({config:e,type:t,onOpen:new Promise((t=>{r=t}))},(()=>n.rootElement),this.close.bind(this));return s.l.registerProvider({provide:c,useValue:i}),i.instance=s.l.inject(t),i.instance.onNeedRerender=this.rerender.bind(this),n=this.dialogRender.renderDialog(i),this.dialogCollector.addOpenedDialog(n),r(),i.instance.onOpen(),s.l.unregisterProvider(c),i}closeAll(){let t=this.dialogCollector.getLast();for(;t;)t.dialogRef.close(),t=this.dialogCollector.getLast()}close(t,e,n){let r=t instanceof o.z?this.dialogCollector.getDialogRefByDialogInstance(t.instance):t;r&&(r.closeElements((()=>{r.removeFromDOM(),r.dialogRef.instance.onClose(),e(n)})),this.dialogCollector.remove(r))}rerender(t){this.app.state=s.q.RERENDERING;let e=this.dialogCollector.getDialogRefByDialogInstance(t);this.dialogRender.rerenderDialog(e),this.app.state=s.q.INITIALIZED}};l=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,r.GS)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[a.o,u.S])],l)},8397:(t,e,n)=>{"use strict";n.d(e,{S:()=>o});var r=n(1745),i=n(4104);let o=class{constructor(t){this.listenerCollector=t,this.dialogInstances=[]}addOpenedDialog(t){this.dialogInstances.push(t),document.body.style.overflow="hidden"}remove(t){this.removeListenersDialog(t);let e=this.dialogInstances.indexOf(t);delete this.dialogInstances[e],this.dialogInstances=this.dialogInstances.filter(((t,n)=>n!==e)),0===this.dialogInstances.length&&(document.body.style.overflow="")}getDialogRefByDialogInstance(t){return this.dialogInstances.find((e=>e.dialogRef.instance===t))}getLast(){let t=this.dialogInstances.length;return t>0?this.dialogInstances[t-1]:null}removeListenersDialog(t){this.removeStructuredListeners(t.structuredTemplate)}removeStructuredListeners(t){if(t.compiledNode&&this.listenerCollector.unsubscribeAllFromElement(t.compiledNode),t.children&&t.children.length>0)for(let e of t.children)this.removeStructuredListeners(e)}};o=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,r.GS)({single:!0}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[i.x])],o)},1912:(t,e,n)=>{"use strict";n.d(e,{o:()=>l});var r=n(1745),i=n(8421);class o{get dialogElement(){return this.structuredTemplate.compiledNode}get containerElement(){return this.rootElement.querySelector(".nimble-dialog-container")}get panelElement(){return this.rootElement.querySelector(".nimble-dialog-panel")}get areaElement(){return this.rootElement.querySelector(".nimble-dialog-area")}constructor(t){this.listenerCancelFunctions=[],this.dialogRef=t.dialogRef,this.structuredTemplate=t.structuredTemplate,this.rootElement=document.createElement("nimble-dialog"),document.body.append(this.rootElement)}insertDialogArea(t){let e=this.containerElement;i.C.removeAllChildrenOfElement(e),e.appendChild(t),this.applyConfigDimesions(),this.applyAnotherConfig()}closeElements(t){this.rootElement&&this.rootElement.classList.add("out"),this.containerElement&&this.containerElement.classList.add("out"),this.listenerCancelFunctions.forEach((t=>t())),setTimeout((()=>{t()}),300)}removeFromDOM(){this.rootElement&&this.rootElement.parentElement&&this.rootElement.parentElement.removeChild(this.rootElement)}applyAnotherConfig(){var t,e;const n=null===(t=this.dialogRef.config)||void 0===t?void 0:t.panelClass;n&&(null===(e=this.panelElement)||void 0===e||e.classList.add(n))}applyConfigDimesions(){var t,e,n;let r=this.areaElement;r&&((null===(t=this.dialogRef.config)||void 0===t?void 0:t.width)&&(r.style.width=this.dialogRef.config.width),(null===(e=this.dialogRef.config)||void 0===e?void 0:e.maxWidth)&&(r.style.maxWidth=this.dialogRef.config.maxWidth),(null===(n=this.dialogRef.config)||void 0===n?void 0:n.minWidth)&&(r.style.minWidth=this.dialogRef.config.minWidth))}}var s=n(507),a=n(9402),u=n(4104),c=n(8397);let l=class extends s.c{constructor(t,e,n){super(t),this.listenersCollector=t,this.listener=e,this.dialogRefCollector=n}renderDialog(t){let e=new o({dialogRef:t,structuredTemplate:this.createStructure(t)});this.createElementFromStructure(e.structuredTemplate);let n=this.compileElementFromStructure(e.structuredTemplate);return this.rerenderDialog(e),e.insertDialogArea(n),this.applyCloseEvents(e),e}rerenderDialog(t){t&&this.recompileElementFromStructure(t.structuredTemplate)}createStructure(t){let e=t.instance.template,n=t.instance;return i.C.buildStructureFromTemplate(e,n,"nimble-dialog-area")}applyCloseEvents(t){this.applyClickOutEvent(t),this.applyEscapeEvent(t)}applyClickOutEvent(t){let e=t.areaElement,n=t.rootElement.querySelector(".nimble-dialog-backdrop"),r=t.containerElement,i=!1;t.listenerCancelFunctions.push(this.listener.listen(t.rootElement,"mousedown",(o=>{const s=this.dialogRefCollector.getLast();if(!i&&(null==t?void 0:t.dialogRef)===s.dialogRef&&(n===o.target||r===o.target)){let n=e.getBoundingClientRect();(o.pageX<n.left||o.pageX>n.right||o.pageY<n.top||o.pageY>n.bottom)&&t.dialogRef.clickoutClose&&(i=!0)}}))),t.listenerCancelFunctions.push(this.listener.listen(t.rootElement,"mouseup",(e=>{i&&t.dialogRef.close()})))}applyEscapeEvent(t){t.listenerCancelFunctions.push(this.listener.listen(window,"keydown",(e=>{const n=this.dialogRefCollector.getLast();(null==t?void 0:t.dialogRef)===n.dialogRef&&27===e.keyCode&&t.dialogRef.escClose&&t.dialogRef.close()})))}};l=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,r.GS)({single:!0}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[u.x,a.a,c.S])],l)},4290:(t,e,n)=>{"use strict";n.d(e,{Tb:()=>i.T,Vq:()=>r.V,iQ:()=>i.i,zj:()=>o.z,nA:()=>u});var r=n(6453),i=n(1025),o=n(4904);class s{constructor(t){this.template="",this.style="",Object.assign(this,t)}}var a=n(1745);function u(t){return function(e){return t=new s(t),Object.assign(e.prototype,t),Reflect.defineMetadata(a.HY,!0,e),e}}},1499:(t,e,n)=>{"use strict";n.d(e,{e:()=>s});var r=n(7009),i=n(9741),o=n(6345);class s extends r.X{get formField(){let t="form-field"===this.selector||"form-field-name"===this.selector?this:this.others.find((t=>"form-field"===t.selector||"form-field-name"===t.selector)),e=null==t?void 0:t.value;return e?e instanceof i.W?e:this.form&&this.form.get(e):null}constructor(){super()}checkForm(){if(!(this.form&&this.form instanceof o.l)){let t=this.selectors[0];return console.error(`The "${t}" directive not apply beacuse directive [form] not setted in form element, but you can do like it: <form [form]="yourForm" ...>`),!1}return!0}}},7009:(t,e,n)=>{"use strict";n.d(e,{X:()=>s});var r=n(2099),i=n(6453),o=n(9754);class s{constructor(){this.all=()=>[],this.inputs={},this.outputs={}}get selectors(){return this._selectors}get selector(){let t=this.selectorActive;return(null!=t?t:"").replace(/\(|\)/g,"").replace(/\[|\]/g,"")}get selectorIsInput(){return!this.selectorIsOutput}get selectorIsOutput(){let t=this.selectorActive;return/^\(([^)]+)\)$/g.test(t)}get value(){return this.selector?this.selectorIsOutput?this.outputs[this.selector]:this.inputs[this.selector]:null}insertInput(t,e){(this._inputs.indexOf(t)>=0||this._selectors.some((e=>e.replace(/\[|\]/g,"")===t)))&&Object.defineProperty(this.inputs,t,{get:()=>e(),enumerable:!0,configurable:!0})}insertOutput(t,e){(this._outputs.indexOf(t)>=0||this._selectors.some((e=>e===`(${t})`)))&&(this.outputs[t]=t=>{let n=!(0,o.isNullOrUndefined)(t);n&&Object.assign(this.scope,{$event:t}),this.compile(e()),n&&delete this.scope.$event})}render(t=null){return this.scope instanceof r.T||this.scope instanceof i.V?this.scope.render(t):void 0}compile(t){return this.scope instanceof r.T||this.scope instanceof i.V?this.scope.compile(t):void 0}get others(){return this.all().filter((t=>t!==this))}}},5342:(t,e,n)=>{"use strict";n.d(e,{j:()=>i});var r=n(7009);class i extends r.X{constructor(){super()}}},2053:(t,e,n)=>{"use strict";n.d(e,{i:()=>r});class r{constructor(t){this.selector="",this.inputs=[],this.outputs=[],Object.assign(this,t)}}},2509:(t,e,n)=>{"use strict";n.d(e,{C:()=>s}),n(7966);var r=n(9754),i=n(2053),o=n(1745);function s(t){return function(e){var n,s;return t=new i.i(t),e.prototype.type="Directive",e.prototype._selectors=(0,r.isArray)(t.selector)?Array.from(new Set(t.selector)):t.selector?[t.selector]:[],e.prototype._inputs=null!==(n=t.inputs)&&void 0!==n?n:[],e.prototype._outputs=null!==(s=t.outputs)&&void 0!==s?s:[],e.prototype.validate=t=>{let n=e.prototype._selectors,r=e.name;if(n&&n.length){let i=[/^(\[).*(\])$/g,/^(\().*(\))$/g,/^[a-zA-Z].*[a-zA-Z]$/g];for(let o of n){if(!i.some((t=>!t.test(o))))throw Error(`The ${r} has invalid selector: "${o}".`);if(t.some((t=>t===e)))throw Error(`The ${r} is already added.`);{let e=t.find((t=>t.prototype._selectors.some((t=>t===o))));if(e)throw Error(`The ${r} has selector equals another directive already added. The another directive is: ${e.name}`)}}}},Reflect.defineMetadata(o.HY,!0,e),e}}},4052:(t,e,n)=>{"use strict";n.d(e,{E:()=>a});var r=n(2053);class i extends r.i{constructor(t){super(t),Object.assign(this,t)}}var o=n(9754),s=n(1745);function a(t){return function(e){var n,r;return t=new i(t),e.prototype.type="IterationDirective",e.prototype._selectors=((0,o.isArray)(t.selector)?Array.from(new Set(t.selector)):t.selector?[t.selector]:[]).map((t=>t.startsWith("@")?t:`@${t}`)),e.prototype._inputs=null!==(n=t.inputs)&&void 0!==n?n:[],e.prototype._outputs=null!==(r=t.outputs)&&void 0!==r?r:[],e.prototype.validate=t=>{e.prototype.selector,e.name},Reflect.defineMetadata(s.HY,!0,e),e}}n(7966)},9128:(t,e,n)=>{"use strict";n.d(e,{h:()=>i});var r=n(3432);class i{static getAllPureSelectors(){return[...r.Z.selectorsMustHavePureValue].map((t=>t.replace(/\[|\(|\]|\)/g,"")))}static checkSelectorMustHavePureValue(t){return t=t.replace(/\[|\(|\]|\)/g,""),this.getAllPureSelectors().indexOf(t)>=0}static isNativeSelector(t){return t=t.replace(/\[|\(|\]|\)/g,""),this.getNativesSelector().some((e=>e.replace(/\[|\(|\]|\)/g,"")===t))}static getNativesSelector(){return["href",...r.s]}}},9336:(t,e,n)=>{"use strict";n.d(e,{$:()=>a});var r=n(7009),i=n(2509),o=n(4104),s=n(9754);let a=class extends r.X{get form(){return this.value}constructor(t){super(),this.listenersCollector=t,this.subscribes=[]}onRender(){this.isValid()&&(this.resolve(),this.onSubmitOutput(),this.resolveRenderOnInteractSelector())}onChange(){}onDestroy(){for(let t of this.subscribes)t.observation.unsubscribe()}isValid(){return this.element instanceof HTMLFormElement||(console.error(`The directive "${this.selector}" only applies in form elements.`),!1)}resolve(){this.form.scope=this.scope,this.form.formElement=this.element,this.checkSubmitDirective()}onSubmitOutput(){this.outputs.submit&&!this.subscribes.find((t=>"fromDirective"===t.id))&&this.subscribes.push({id:"fromDirective",observation:this.form.onSubmit.subscribe((t=>{this.outputs.submit(t),t.preventDefault()}))})}checkSubmitDirective(){!this.outputs.submit&&this.listenersCollector.getSubscribedsByTargetAndEventName(this.element,"submit").length<=1&&(this.subscribes.find((t=>"internal"===t.id))||this.subscribes.push({id:"internal",observation:this.form.onSubmit.subscribe((t=>{t.preventDefault()}))}))}resolveRenderOnInteractSelector(){let t=this.inputs.renderOnInteract;this.form.renderOnInteract="boolean"==typeof t?t:!(!(0,s.isNullOrUndefined)(t)&&""!==t)}};a=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,i.C)({selector:"[form]",inputs:["render-on-interact"],outputs:["submit"]}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[o.x])],a)},3432:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u,s:()=>a});var r=n(7009),i=n(2509),o=n(4401),s=n(9754);const a=["[disabled]","[class]","[style]","[title]","[alt]","[type]","[target]","[src]","[width]","[height]","[maxlength]","[minlength]"];let u=class extends r.X{constructor(t){super(),this.helper=t,this.previousValue={class:{add:[],remove:[]},style:{add:[],remove:[]}}}static get selectorsMustHavePureValue(){return["class","style"]}onRender(){"class"===this.selector?this.resolveClass():"style"===this.selector?this.resolveStyle():"disabled"===this.selector?this.resolveRequired():this.element.hasAttribute(this.selector)?this.element.attributes[this.selector].value!==this.value&&(this.element.attributes[this.selector].value=this.value):this.element.setAttribute(this.selector,this.value)}onChange(){this.onRender()}onDestroy(){}resolveClass(){var t,e,n;if(this.value){let r=this.value.trim(),i=[],o=[];r.startsWith("{")&&r.endsWith("}")?this.helper.splitStringJSONtoKeyValue(r).forEach((t=>{try{this.scope.compile(t.value)?i.push(t.key):o.push(t.key)}catch(t){console.error(t.message)}})):r.startsWith("[")&&r.endsWith("]")?(r=this.scope.compile(r),(0,s.isArray)(r)&&(i=r),o=this.previousValue.class.add.filter((t=>i.indexOf(t)<0))):(r=(null!==(t=this.scope.compile(r))&&void 0!==t?t:"").toString(),r=r.trim(),i=r?r.includes(" ")?r.split(" "):[r]:[],o=this.previousValue.class.add.filter((t=>i.indexOf(t)<0))),i.sort().join(",")!==(null!==(e=this.previousValue.class.add)&&void 0!==e?e:[]).sort().join("")&&i.forEach((t=>{var e;return null===(e=this.element)||void 0===e?void 0:e.classList.add(t)})),o.sort().join(",")!==(null!==(n=this.previousValue.class.remove)&&void 0!==n?n:[]).sort().join("")&&o.forEach((t=>{var e;return null===(e=this.element)||void 0===e?void 0:e.classList.remove(t)})),this.previousValue.class={add:i,remove:o}}}resolveStyle(){if(this.value){let t=this.value.trim(),e=[];if(t.startsWith("{")&&t.endsWith("}"))this.helper.splitStringJSONtoKeyValue(t).forEach((t=>{try{e.push({prop:t.key,value:this.compile(t.value)})}catch(t){console.error(t.message)}}));else if(t.startsWith("[")&&t.endsWith("]"))t=this.scope.compile(t),(0,s.isArray)(t)&&t.forEach((t=>{if(t.includes(":"))try{e.push({prop:t.split(":")[0].trim(),value:t.split(":")[1].trim()})}catch(t){console.error(t.message)}}));else if(t=this.scope.compile(t),t&&"string"==typeof t)if(t=t.replace(/\;\;\;/g,";").replace(/\;\;/g,";"),t.includes(";"))t.split(";").forEach((t=>{if(t.includes(":"))try{e.push({prop:t.split(":")[0].trim(),value:t.split(":")[1].trim()})}catch(t){console.error(t.message)}}));else if(t.includes(":"))try{e.push({prop:t.split(":")[0].trim(),value:t.split(":")[1].trim()})}catch(t){console.error(t.message)}let n=this.previousValue.style.add.filter((t=>!e.some((e=>e.prop===t))));e.forEach((t=>this.element.style[t.prop]=t.value)),n.forEach((t=>this.element.style.removeProperty(t))),this.previousValue.style={add:e.map((t=>t.prop)),remove:n}}}resolveRequired(){("string"==typeof this.value?"true"===this.value:this.value)?this.element.setAttribute("disabled",""):this.element.removeAttribute("disabled")}static checkSelectorMustHavePureValue(t){return this.selectorsMustHavePureValue.indexOf(t.replace(/\[|\(|\]|\)/g,""))>=0}};u=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,i.C)({selector:a}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[o.W])],u)},9718:(t,e,n)=>{"use strict";n.d(e,{x:()=>r});class r extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add("nimble-dialog-area")}}},8414:(t,e,n)=>{"use strict";n.d(e,{Q:()=>r});class r extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add("nimble-dialog"),this.innerHTML='\n        <div class="nimble-dialog-backdrop"></div>\n        <div class="nimble-dialog-panel">\n            <div class="nimble-dialog-container">\n            </div>\n        </div>'}}},6290:(t,e,n)=>{"use strict";n.d(e,{W:()=>r});class r extends HTMLElement{constructor(){super()}}},3036:(t,e,n)=>{"use strict";n.d(e,{q:()=>r});class r extends HTMLElement{constructor(){super()}}},9741:(t,e,n)=>{"use strict";n.d(e,{W:()=>a});var r=n(5297),i=n(4104),o=n(2792),s=n(9754);class a{get elements(){return this._elements}get value(){return this._value}get valueChanges(){return this._valueChanges}get errors(){return this._errors}get validators(){return this._validators}get isEnabled(){return this._isEnabled}get isDisabled(){return!this._isEnabled}get blurred(){return this._blurred}get touched(){return this._touched}get isValid(){return!this.errors||0===Object.keys(this.errors).filter((t=>!(!1===this.errors[t]))).length}get listenerCollector(){return r.l.inject(i.x)}constructor(t){this._elements=[],this._valueChanges=new o.Q,this._errors=null,this._validators=[],this._isEnabled=!0,this._blurred=!1,this._touched=!1,Object.assign(this,t)}setValue(t,e={}){var n,r;let i=!1;if(this._value=t,!(e&&e.noUpdateElement||1!==this.elements.length)){let e=this.elements[0];"checkbox"!==e.type&&"radio"!==e.type&&(e.value=t,e.value===t&&e.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0})))}if(e&&e.noNotify||(this.valueChanges.notify(t),i=!0),!e||!e.noValidate){if(this.parent)for(let t in this.parent.fields)(null===(n=this.parent.fields[t])||void 0===n?void 0:n.touched)&&(null===(r=this.parent.fields[t])||void 0===r||r.validate());else this.validate();i=!0}!i||this.parent&&this.parent.isReseting||this.renderIfNeed()}validate(){let t={};for(let e of this.validators)if(e){let n=e(this);(0,s.isObject)(n)&&Object.keys(n).some((t=>n[t]))&&Object.keys(n).forEach((e=>{n[e]&&(t[e]=n[e])}))}return this._errors="{}"===JSON.stringify(t)?null:t,this.isValid}hasError(t){return!(!this.errors||!this.errors[t])}hasErrors(){return!!(this.errors&&Object.keys(this.errors).length>0)}setElement(t){t&&(this._elements.indexOf(t)<0&&this._elements.push(t),this.setFieldElementListeners(t))}setErrors(t){this._errors=t}setValidators(t){if(t){this._validators=[];for(let e of t)this._validators.some((t=>t===e))||this._validators.push(e)}}setTouched(){this._touched=!0}setUntouched(){this._touched=!1}setBlurred(){this._blurred=!0}setUnblurred(){this._blurred=!1}disable(){this._isEnabled=!1}enable(){this._isEnabled=!0}removeValidators(t){t&&(this._validators=this._validators.filter((e=>!t.some((t=>e===t)))))}reset(t){this.setUntouched(),this.setUnblurred(),this.setValue(null,t),this._errors=null}setFieldElementListeners(t){this.listenerCollector.subscribe(t,"focus",(()=>{this._touched=!0,this.blurred&&this.validate(),this.renderIfNeed()}),!0),this.listenerCollector.subscribe(t,"blur",(()=>{this._blurred=!0,this.validate(),this.renderIfNeed()}),!0)}renderIfNeed(){return t=this,e=void 0,r=function*(){this.parent&&this.parent.renderOnInteract&&this.parent.scope&&!this.parent.isSubmitting&&this.parent.scope.onNeedRerender&&(yield this.parent.scope.onNeedRerender(this.parent.scope))},new((n=void 0)||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r}}},6345:(t,e,n)=>{"use strict";n.d(e,{l:()=>a});var r=n(9741),i=n(5297),o=n(4104),s=n(2792);class a{get fields(){return this._fields?this._fields:{}}get formElement(){return this._formElement}set formElement(t){this._formElement=t,this.setFormListeners()}get renderOnInteract(){return this._renderOnInteract}set renderOnInteract(t){this._renderOnInteract=t}get scope(){return this._scope}set scope(t){this._scope=t}get submitted(){return this._submitted}get isSubmitting(){return this._isSubmitting}get isEnabled(){return Object.keys(this._fields).every((t=>this._fields[t].isEnabled))}get isDisabled(){return Object.keys(this._fields).every((t=>this._fields[t].isDisabled))}get blurred(){return Object.keys(this._fields).some((t=>this._fields[t].blurred))}get touched(){return Object.keys(this._fields).some((t=>this._fields[t].touched))}get errors(){let t={};for(let e in this._fields){let n=this._fields[e];if(n.errors){let e=Object.keys(n.errors);for(let r of e)r in t||(t[r]=n.errors[r])}}return"{}"===JSON.stringify(t)?null:t}get isValid(){let t=Object.keys(this.fields);return 0===t.length||t.every((t=>this.fields[t].isValid))}get listenerCollector(){return i.l.inject(o.x)}get isReseting(){return this._isReseting}constructor(t){if(this.onSubmit=new s.Q,this._fields={},this._renderOnInteract=!0,this._submitted=!1,this._isSubmitting=!1,t&&Object.keys(t).length>0)for(let e in t){let n=new r.W;n.parent=this,n.setValidators(t[e].validators),n.setValue(t[e].value,{noNotify:!0,noUpdateElement:!0,noValidate:!0}),this._fields[e]=n}}get(t){return t in this.fields?this.fields[t]:(console.error(`The field "${t}" not found.`),new r.W({}))}get value(){let t={};for(let e in this._fields)t[e]=this.get(e).value;return t}has(t){return!(!this.fields||!Object.keys(this.fields).some((e=>e===t)))}hasErrors(){let t=this.errors;return!!(t&&Object.keys(t).length>0)}reset(t){try{this._isReseting=!0;for(let e in this.fields)this.fields[e].reset(t)}finally{return this._isReseting=!1,this.renderIfNeed(),this}}validate(){let t=!0;for(let e in this.fields)this.fields[e].validate()||(t=!1);return t}setTouched(){for(let t in this.fields)this.fields[t].setTouched()}setUntouched(){for(let t in this.fields)this.fields[t].setUntouched()}setBlurred(){for(let t in this.fields)this.fields[t].setBlurred()}setUnblurred(){for(let t in this.fields)this.fields[t].setUnblurred()}disable(){for(let t in this.fields)this.fields[t].disable()}enable(){for(let t in this.fields)this.fields[t].enable()}setFormListeners(){this.listenerCollector.subscribe(this.formElement,"submit",(t=>{this._isSubmitting=!0,this._submitted=!0,this.validate(),this.onSubmit.notify(t),this.renderIfNeed(),this._isSubmitting=!1}),!0)}renderIfNeed(){return t=this,e=void 0,r=function*(){this.renderOnInteract&&this.scope&&this.scope.onNeedRerender&&(yield this.scope.onNeedRerender(this.scope))},new((n=void 0)||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r}}},8249:(t,e,n)=>{"use strict";n.d(e,{l0:()=>r.l,kI:()=>o});var r=n(6345),i=(n(9741),n(9754));class o{static min(t){return e=>!(0,i.isNullOrUndefined)(null==e?void 0:e.value)&&""!==e.value&&e.value<t?{min:t}:{min:!1}}static max(t){return e=>!(0,i.isNullOrUndefined)(null==e?void 0:e.value)&&""!==e.value&&e.value>t?{max:t}:{max:!1}}static minLength(t){return e=>{var n;return{minLength:(null!==(n=null==e?void 0:e.value)&&void 0!==n?n:"").toString().length<t&&t}}}static maxLength(t){return e=>{var n;return{maxLength:(null!==(n=null==e?void 0:e.value)&&void 0!==n?n:"").toString().length>t&&t}}}static minChecked(t){return e=>{var n;return{minChecked:(null!==(n=null==e?void 0:e.value)&&void 0!==n?n:[]).length<t&&t}}}static maxChecked(t){return e=>{var n;return{maxChecked:(null!==(n=null==e?void 0:e.value)&&void 0!==n?n:[]).length>t&&t}}}static pattern(t){let e="string"==typeof t?new RegExp(t):t;return t=>!t.value||(0,i.isNullOrUndefined)(t.value)||e.test(t.value)?{pattern:!1}:{pattern:!0}}}o.required=t=>(0,i.isNullOrUndefined)(null==t?void 0:t.value)||""===(null==t?void 0:t.value)?{required:!0}:{required:!1},o.requiredTrue=t=>t&&!0!==t.value?{required:!0}:{required:!1},o.email=t=>!t.value||(0,i.isNullOrUndefined)(t.value)||/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.value)?{email:!1}:{email:!0}},8713:(t,e,n)=>{"use strict";n.d(e,{G:()=>r.GS,t:()=>i.t});var r=n(1745),i=n(2938)},2938:(t,e,n)=>{"use strict";n.d(e,{r:()=>o,t:()=>i}),n(7966);const r=Symbol("INJECT_KEY");function i(t){return function(e,n,i){return Reflect.defineMetadata(r,t,e,`index-${i}`),e}}function o(t,e){return Reflect.getMetadata(r,t,`index-${e}`)}},1745:(t,e,n)=>{"use strict";n.d(e,{GS:()=>i,HY:()=>r,Qh:()=>o}),n(7966);const r=Symbol("INJECTABLE_KEY");function i(t){return function(e){return t&&Object.assign(e.prototype,t),Reflect.defineMetadata(r,!0,e),e}}function o(t){return!0===Reflect.getMetadata(r,t)}},2688:(t,e,n)=>{"use strict";n.d(e,{Gq:()=>i,Ol:()=>r,cv:()=>s,f$:()=>o});class r{constructor(t){this.injectionIdentifier=t}}function i(t){return void 0!==t.useClass}function o(t){return void 0!==t.useSingleton}function s(t){return void 0!==t.useValue}},2285:(t,e,n)=>{"use strict";n.d(e,{T:()=>r.T,h:()=>u});var r=n(2099);class i{constructor(t){Object.assign(this,t)}}class o{constructor(t){this.description="",this.keywords="",this.og={},Object.assign(this,t),this.og&&(this.og=new i(this.og))}}class s{constructor(t){this.template="",this.style="",this.title="",this.meta={},Object.assign(this,t),this.meta&&(this.meta=new o(this.meta))}}var a=n(1745);function u(t){return function(e){return t=new s(t),Object.assign(e.prototype,t),Reflect.defineMetadata(a.HY,!0,e),e}}n(7966)},2099:(t,e,n)=>{"use strict";n.d(e,{T:()=>r});class r{constructor(){this.isInitialized=!1,this.isAfterInitialized=!1,this.isDestroyed=!1}onInit(){}onAfterInit(){}onDestroy(){}onEnter(){}onExit(){}render(t){return e=this,n=void 0,i=function*(){return t&&t(),this.onNeedRerender?yield this.onNeedRerender(this):new Promise((t=>t(null)))},new((r=void 0)||(r=Promise))((function(t,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(s,a)}u((i=i.apply(e,n||[])).next())}));var e,n,r,i}compile(t){try{return new Function(`with(this) { return ${t} }`).call(this)}catch(t){return console.error(t.message),null}}}},4401:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>Helper});var _inject_injectable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1745),util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9754),util__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_1__),__decorate=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};let Helper=class Helper{uid(){let t=t=>{let e=t.toString(16);for(;e.length<4;)e="0"+e;return e},e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);if("undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.getRandomValues){let e=new Uint16Array(8);return window.crypto.getRandomValues(e),t(e[0])+t(e[1])+"-"+t(e[2])+"-"+t(e[3])+"-"+t(e[4])+"-"+t(e[5])+t(e[6])+t(e[7])}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}splitStringJSONtoKeyValue(jsonString){let list=[],matchGroup=jsonString.replace(/\"/g,"'").match(/(?:\"|\')([^("|'|)]*)(?:\"|\')(?=:)(?:\:\s*)(?:\")?(true|false|[0-9a-zA-Z\(\)\@\:\/\!\+\-\.\$\&\%\=\ \\\']*|[-0-9]+[\.]*[\d]*(?=,))(?:\")?/gm);for(let i=0;i<matchGroup.length;i++){const keyValueSplitted=matchGroup[i].split(":");let key=keyValueSplitted[0].trim(),value=keyValueSplitted[1].trim().replace(/\,$/g,"").trim();/^('|").*('|")$/g.test(key)&&(key=eval(key)),list.push({key,value})}return list}insertInText(t,e,n){if("string"==typeof t&&"string"==typeof e&&""!==e&&n>=0){let r=t.substr(0,n),i=t.substr(n);t=r+e+i}return t}insertInTextWithInterval(t,e,n,r){if("string"==typeof t&&"string"==typeof e&&""!==e&&n>=0&&r>=0&&n<=r){let i=t.substr(0,n),o=t.substr(r);t=i+e+o}return t}cloneObject(t){return Object.assign(Object.create(Object.getPrototypeOf(t)),t)}padLeft(t,e=2,n=0){if(!(0,util__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(t))for(;t.length<e;)t=n+t;return t}padRight(t,e=2,n=0){if(!(0,util__WEBPACK_IMPORTED_MODULE_1__.isNullOrUndefined)(t))for(;t.length<e;)t+=n;return t}};Helper=__decorate([(0,_inject_injectable__WEBPACK_IMPORTED_MODULE_0__.GS)({single:!0})],Helper)},8358:(t,e,n)=>{"use strict";n.d(e,{e:()=>u});var r=n(1745);class i{constructor(){this.responseType="json",this.withCredentials=!1}}class o{constructor(t){Object.assign(this,t)}}var s=n(9754);class a{constructor(t){Object.assign(this,t)}}let u=class{get(t,e){return new Promise(((n,r)=>{this.prepreAndGetXHR("GET",t,null,e).then((t=>{n(t)}),(t=>{r(t)}))}))}post(t,e,n){return new Promise(((r,i)=>{this.prepreAndGetXHR("POST",t,e,n).then((t=>{r(t)}),(t=>{i(t)}))}))}put(t,e,n){return new Promise(((r,i)=>{this.prepreAndGetXHR("PUT",t,e,n).then((t=>{r(t)}),(t=>{i(t)}))}))}patch(t,e,n){return new Promise(((r,i)=>{this.prepreAndGetXHR("PATCH",t,e,n).then((t=>{r(t)}),(t=>{i(t)}))}))}del(t,e){return new Promise(((n,r)=>{this.prepreAndGetXHR("DELETE",t,null,e).then((t=>{n(t)}),(t=>{r(t)}))}))}prepreAndGetXHR(t,e,n,r){return new Promise(((u,c)=>{let l=new XMLHttpRequest,h=r?this.getUrlWithParams(e,r.params):e;r||(r=new i),l.withCredentials=r.withCredentials,l.responseType=r.responseType?r.responseType:"json",l.open(t,h,!0),this.setHeaders(l,r.headers).isJson&&(0,s.isObject)(n)&&(n=JSON.stringify(n)),l.onreadystatechange=function(){if(4==l.readyState){let t={xhr:l,status:l.status};if(200==l.status){t.data=l.response;let e=new o(t);u(e)}else{t.error=l.response;let e=new o(t);c(e)}}},l.onerror=function(){c(new a({xhr:l,status:l.status,error:l.response}))},l.send(n)}))}setHeaders(t,e){let n={isJson:!1};if(e)if((0,s.isArray)(e))for(let n of e)t.setRequestHeader(n,"");else for(let r in e){let i=e[r];"content-type"===r.toLowerCase()&&i.includes("application/json")&&(n.isJson=!0),t.setRequestHeader(r,i)}return e&&(0,s.isArray)(e)&&Object.keys(e).some((t=>"content-type"===t.toLowerCase()))||(t.setRequestHeader("Content-Type","application/json"),n.isJson=!0),n}getUrlWithParams(t,e){if(e&&t)for(let n in e){let r=e[n];t.includes("?")?t+=`&${n}=${r}`:t+=`?${n}=${r}`}return t}};u=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,r.GS)()],u)},4104:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(1745);let i=class{constructor(){this.listenersSubscribed=[]}subscribe(t,e,n,r=!1,i){if(t){let s=new o({internal:r,target:t,eventName:e,realCallback:n,options:i,applied:!0});return s.callback=t=>{s.beforeListen&&s.beforeListen.forEach((t=>t())),n(t),s.afterListen&&s.afterListen.forEach((t=>t()))},this.listenersSubscribed.push(s),s.target.addEventListener(s.eventName,s.callback,s.options),()=>this.unsubscribe(s)}return()=>{}}getSubscribersByTarget(t){return this.listenersSubscribed.filter((e=>e.target===t))}getSubscribedsByTargetAndEventName(t,e){return this.listenersSubscribed.filter((n=>n.target===t&&n.eventName===e))}unsubscribe(t){t&&t.applied&&t.target.removeEventListener(t.eventName,t.callback),this.listenersSubscribed=this.listenersSubscribed.filter((e=>e!==t))}unsubscribeAll(){let t=this.listenersSubscribed.pop();for(;t;)t.target&&t.applied&&t.target.removeEventListener(t.eventName,t.callback),t=this.listenersSubscribed.pop()}unsubscribeAllFromElement(t){if(t){let e=this.listenersSubscribed.filter((e=>e.target===t));if(e.length){for(let t of e)t.target&&t.applied&&t.target.removeEventListener(t.eventName,t.callback);this.listenersSubscribed=this.listenersSubscribed.filter((t=>!e.some((e=>t===e))))}}}addActionsInElementsListeners(t,e,n){if(e||n)for(let r of this.getSubscribersByTarget(t))r.beforeListen.some((t=>t===e))||r.beforeListen.push(e),r.afterListen.some((t=>t===n))||r.afterListen.push(n)}};i=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,r.GS)({single:!0})],i);class o{constructor(t){this.applied=!1,this.beforeListen=[],this.afterListen=[],Object.assign(this,t)}}},221:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(1745);let i=class{constructor(){this.data={},this.params={}}};i=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,r.GS)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],i)},4302:(t,e,n)=>{"use strict";n.d(e,{T:()=>l,x:()=>c});var r=n(9754),i=n(8421),o=n(1499),s=n(9336),a=n(9128),u=n(5297);class c{get hasParent(){return!(0,r.isNullOrUndefined)(this.parent)}get hasChildren(){return this.children.length>0}get hasAttritubes(){return this.attrs.length>0}get isText(){return!this.tagName}get hasNormalDirectivesToApply(){return this.attrDirectives.default.length>0}get hasIterationDirectivesToApply(){return!!this.attrDirectives.iterate.directive}get nodeIsRenderedInDOM(){return this.compiledNode&&!(0,r.isNullOrUndefined)(this.compiledNode.parentNode)}constructor(t){this.parent=null,this.tagName="",this.content="",this.children=[],this.directivesInstance=[],this.rawNode=null,this.compiledNode=null,this.compiledBeginFn=null,this.compiledEndFn=null,this.attrs=[],this.attrDirectives={default:[],iterate:{directive:null,props:{in:[],out:[]}}},this.isVoid=!1,this.isPureElement=!1,this.isRendered=!1,this.hasInterpolationInText=!1,this.scope=t}removeCompiledNode(t){if(this.hasChildren)for(const e of this.children)e.removeCompiledNode(t);this.nodeIsRenderedInDOM&&(this.compiledNode.parentNode.removeChild(this.compiledNode),this.isRendered=!1),this.destroyAllDirectives(),t&&t(this)}destroyAllDirectives(){for(const t of this.attrDirectives.default)t.directive.destroyDirective();this.attrDirectives.iterate.directive&&this.attrDirectives.iterate.directive.destroyDirective()}getIterationDirective(){const t=this.attrDirectives.iterate.directive,e=this.attrDirectives.iterate.props;if(t){let n=this.directivesInstance.find((e=>e.selector===t.name));n?n.element=this.compiledNode:(n=u.l.inject(t.directiveType),n.scope=this.scope,n.element=this.compiledNode,n.selectorActive=t.name,n.insertInput(n.selector,(()=>t.value)),e.in.forEach((t=>{n.insertInput(t.name,(()=>l.getCompiledValue(t.name,t.value,this.scope)))})),e.out.forEach((t=>{n.insertOutput(t.name.replace(/\(|\)/g,""),(()=>t.value))})),t.directiveInstance=n,this.directivesInstance.push(n)),n.all=()=>this.directivesInstance}return t}resolveAttrs(){for(const t of this.attrs.filter((t=>t.hasInterpolationInText||!t.isResolved)))i.C.resolveDefaultAttribute(this.compiledNode,t.name,t.value,this.scope),t.isResolved=!0}resolveAttrDirectivesIfNeeded(){for(const t of this.attrDirectives.default)t.directive.resolveDirectiveIfNeeded()}getIterationStructuresFromSelf(){return this.parent.children.filter((t=>t.from===this))}instantiateAttrDirectives(){const t=this.attrDirectives.default.filter((t=>!t.directive.isResolved));for(const e of t){const t=e.directive,n=e.props;let r=this.directivesInstance.find((e=>e.selector===t.name.replace(/\[|\]/g,"")));if(!r){r=u.l.inject(t.directiveType),r.element=this.compiledNode,r.scope=this.scope,r.selectorActive=t.name;const e=n.in.map((e=>({name:e.name,value:()=>l.getCompiledValue(t.name,t.value,this.scope)}))),i=n.out.map((t=>({name:t.name.replace(/\(|\)/g,""),value:()=>t.value})));r.selectorIsInput?e.push({name:r.selector,value:()=>l.getCompiledValue(t.name,t.value,this.scope)}):i.push({name:r.selector,value:()=>t.value}),e.forEach((t=>r.insertInput(t.name,t.value))),i.forEach((t=>r.insertOutput(t.name,t.value))),t.directiveInstance&&(t.directiveInstance.all=()=>this.directivesInstance),t.directiveInstance=r,this.directivesInstance.push(r)}}}renderNodeIfNot(){if(this.checkRenderedCorrectly(),!this.isRendered&&this.parent&&this.parent.compiledNode){const t=this.parent.children.findIndex((t=>t===this)),e=()=>{for(let e=t+1;e<this.parent.children.length;e++){const t=this.parent.children[e];if(t.compiledNode&&t.compiledNode.parentNode===this.parent.compiledNode&&t.nodeIsRenderedInDOM)return t.compiledNode}return null},n=(()=>{for(let e=t-1;e>=0;e--){const t=this.parent.children[e];if(t.compiledNode&&t.compiledNode.parentNode===this.parent.compiledNode&&t.nodeIsRenderedInDOM)return t.compiledNode.nextSibling}return null})();if(n)this.parent.compiledNode.insertBefore(this.compiledNode,n),this.isRendered=!0;else{const t=e();t?(this.parent.compiledNode.insertBefore(this.compiledNode,t),this.isRendered=!0):(this.parent.compiledNode.appendChild(this.compiledNode),this.isRendered=!0)}}}checkRenderedCorrectly(){this.nodeIsRenderedInDOM&&this.parent&&this.compiledNode.parentNode!==this.parent.compiledNode&&this.compiledNode.parentNode.removeChild(this.compiledNode)}}class l{get allDirectives(){return u.l.instance.directives}get isIterationDirective(){return null!=this.directiveType&&"IterationDirective"===this.directiveType.prototype.type}get isDefaultDirective(){return null!=this.directiveType&&"IterationDirective"!==this.directiveType.prototype.type}get isNotDirective(){return!this.directiveType}constructor(t,e,n,r=null,i=!1){this.isResolved=!1,this.hasInterpolationInText=!1,this.structure=null,this.name="",this.value="",this.directiveType=null,this.directiveInstance=null,this.name=t,this.value=e,this.structure=n,this.directiveType=null!=r?r:i?null:this.getDirective()}resolveDirectiveIfNeeded(){this.isResolved?(this.checkDirectiveBeforeResolve(),this.directiveInstance.onChange()):(this.isResolved=!0,this.checkDirectiveBeforeResolve(),this.directiveInstance.onRender())}destroyDirective(){this.directiveInstance&&this.directiveInstance.onDestroy(),this.isResolved=!1}checkDirectiveBeforeResolve(){if(this.directiveInstance instanceof o.e){let t=this.structure.parent,e=null;for(;!e&&t;)e=t.directivesInstance.find((t=>t instanceof s.$)),t=t.parent;this.directiveInstance.form=e&&e.form}}getDirective(){let t=null;const e=this.name.toLowerCase();for(let n of this.allDirectives)if(n.prototype.selectors.find((t=>!!t&&(t=t.toLowerCase(),/^\[([^)]+)\]$/g.test(e)&&/^(?!\(\/).*(?!\))$/g.test(t)?e===`[${t.replace(/\[|\]/g,"")}]`:e===t)))){t=n;break}return/^\(([^)]+)\)$/g.test(e)||/^\[([^)]+)\]$/g.test(e)||!a.h.checkSelectorMustHavePureValue(e)?t:null}static getCompiledValue(t,e,n){return/^\(([^)]+)\)$/g.test(t)||(/^\[([^)]+)\]$/g.test(t)?a.h.checkSelectorMustHavePureValue(t)||(e=n.compile(e)):e=i.C.resolveInterpolationIfHave(e,n)),e}}},2440:(t,e,n)=>{"use strict";n.d(e,{o:()=>i});var r=n(4302);class i extends r.x{constructor(t){super(t)}}},9402:(t,e,n)=>{"use strict";n.d(e,{a:()=>o});var r=n(1745),i=n(4104);let o=class{constructor(t){this.listenersCollector=t}listen(t,e,n,r){return this.listenersCollector.subscribe(t,e,n,!1,r)}};o=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,r.GS)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[i.x])],o)},507:(t,e,n)=>{"use strict";n.d(e,{o:()=>h,c:()=>l});var r=n(5297),i=n(1745),o=n(4302),s=n(2440);class a extends o.x{constructor(t){super(t.scope),this.from=null,this.from=t,this.parent=t.parent,this.tagName=t.tagName,this.content=t.content,this.directivesInstance=[],this.rawNode=t.rawNode.cloneNode(t.isPureElement),this.isVoid=t.isVoid,this.isPureElement=t.isPureElement,this.isRendered=!1,this.compiledNode=null,this.attrs=t.attrs.map((t=>new o.T(t.name,t.value,this,t.directiveType,!0))),this.attrDirectives={default:t.attrDirectives.default.map((t=>({directive:new o.T(t.directive.name,t.directive.value,this,t.directive.directiveType,!0),props:{in:t.props.in.map((t=>new o.T(t.name,t.value,this,t.directiveType,!0))),out:t.props.out.map((t=>new o.T(t.name,t.value,this,t.directiveType,!0)))}}))),iterate:{directive:null,props:{in:[],out:[]}}},this.compiledBeginFn=null,this.compiledEndFn=null,this.children=this.cloneChildrensRecursive(this.from.children,this)}cloneChildrensRecursive(t,e){return t.filter((t=>!(t instanceof a))).map((t=>{let n=new s.o(this.scope);return n.parent=e,n.tagName=t.tagName,n.content=t.content,n.directivesInstance=[],n.rawNode=t.rawNode.cloneNode(t.isPureElement),n.isVoid=t.isVoid,n.isPureElement=t.isPureElement,n.hasInterpolationInText=t.hasInterpolationInText,n.attrs=t.attrs.map((t=>new o.T(t.name,t.value,n,t.directiveType,!0))),n.attrDirectives={default:t.attrDirectives.default.map((t=>({directive:new o.T(t.directive.name,t.directive.value,n,t.directive.directiveType,!0),props:{in:t.props.in.map((t=>new o.T(t.name,t.value,n,t.directiveType,!0))),out:t.props.out.map((t=>new o.T(t.name,t.value,n,t.directiveType,!0)))}}))),iterate:{directive:t.attrDirectives.iterate.directive?new o.T(t.attrDirectives.iterate.directive.name,t.attrDirectives.iterate.directive.value,n,t.attrDirectives.iterate.directive.directiveType,!0):null,props:{in:t.attrDirectives.iterate.props.in.map((t=>new o.T(t.name,t.value,n,t.directiveType,!0))),out:t.attrDirectives.iterate.props.out.map((t=>new o.T(t.name,t.value,n,t.directiveType,!0)))}}},n.children=t.children.length>0?this.cloneChildrensRecursive(t.children,n):[],n}))}}var u=n(4104),c=n(8421);let l=class{get app(){return r.l.instance}constructor(t){this.listenersCollector=t}createElementFromStructure(t){if(t.isText){if(!t.rawNode){const e=document.createTextNode(t.content);t.rawNode=e}}else{t.rawNode||(t.rawNode=document.createElement(t.tagName));for(const e of t.children)this.createElementFromStructure(e)}}compileElementFromStructure(t){if(t.isText){if(t.compiledNode||(t.compiledNode=t.rawNode.cloneNode(!0)),t.hasInterpolationInText){const e=c.C.resolveInterpolationIfHave(t.compiledNode.textContent,t.scope);t.compiledNode.textContent=e}}else{t.compiledNode||(t.compiledNode=t.rawNode.cloneNode(t.isPureElement)),t.attrDirectives.default.forEach((t=>{t.directive.isResolved=!1,t.props.in.forEach((t=>t.isResolved=!1)),t.props.out.forEach((t=>t.isResolved=!1))}));let e=[];if(t.hasIterationDirectivesToApply){if(t.attrDirectives.iterate.directive.isResolved=!1,t.attrDirectives.iterate.props.in.forEach((t=>t.isResolved=!1)),t.attrDirectives.iterate.props.out.forEach((t=>t.isResolved=!1)),e=t.getIterationDirective().directiveInstance.onIterate(),e.length<=0)return t.removeCompiledNode(),null;t.compiledBeginFn=e[0].beginFn,t.compiledEndFn=e[0].endFn,e=e.slice(1)}t.compiledBeginFn&&t.compiledBeginFn(),t.resolveAttrs(),t.instantiateAttrDirectives(),t.children=t.children.filter((t=>!(t instanceof a&&(t.removeCompiledNode(),1))));for(const e of t.children){const n=this.compileElementFromStructure(e);n&&!t.isRendered&&(t.compiledNode.appendChild(n),e.isRendered=!0)}if(t.resolveAttrDirectivesIfNeeded(),this.checkStructureNodeActions(t),t.compiledEndFn&&t.compiledEndFn(),e.length>0){const n=t.parent.children.findIndex((e=>e===t));for(let r=1;r<=e.length;r++){const i=e[r-1],o=n+r;t.parent.children.splice(o,0,this.cloneStructureDueIteration(t,i.beginFn,i.endFn))}}}return t.hasParent||(t.isRendered=!0),t.compiledNode}recompileElementFromStructure(t){if(performance.now(),t.isText){if(t.compiledNode||(t.compiledNode=t.rawNode.cloneNode(!0)),t.hasInterpolationInText&&t.rawNode.textContent){const e=c.C.resolveInterpolationIfHave(t.rawNode.textContent,t.scope);e!==t.compiledNode.textContent&&(t.compiledNode.textContent=e)}t.renderNodeIfNot()}else{t.compiledNode||(t.compiledNode=t.rawNode.cloneNode(t.isPureElement));let e=[];if(t.hasIterationDirectivesToApply){const n=t.getIterationDirective().directiveInstance;if(e=n.onIterate(),e.length<=0){t.removeCompiledNode((t=>{this.listenersCollector.unsubscribeAllFromElement(t.compiledNode)}));const e=t.getIterationStructuresFromSelf();if(e){for(const t of e)t.removeCompiledNode((t=>{this.listenersCollector.unsubscribeAllFromElement(t.compiledNode)}));t.parent.children=t.parent.children.filter((t=>!e.some((e=>e===t))))}return}{n.onRender();let r=t.getIterationStructuresFromSelf();if(t.compiledBeginFn=e[0].beginFn,t.compiledEndFn=e[0].endFn,e=e.slice(1),r.length>e.length){const n=r.slice(e.length);r=r.slice(0,e.length);for(const t of n)this.listenersCollector.unsubscribeAllFromElement(t.compiledNode),t.removeCompiledNode((t=>{this.listenersCollector.unsubscribeAllFromElement(t.compiledNode)}));t.parent.children=t.parent.children.filter((t=>n.indexOf(t)<0))}else if(r.length<e.length){const n=e.length-r.length,i=r.length>0?t.parent.children.findIndex((t=>t===r[r.length-1])):t.parent.children.findIndex((e=>e===t));for(let o=1;o<=n;o++){const n=e[r.length+o-1],s=i+o;t.parent.children.splice(s,0,this.cloneStructureDueIteration(t,n.beginFn,n.endFn))}}for(let t=0;t<r.length;t++){let n=e[t],i=r[t];i.compiledBeginFn=n.beginFn,i.compiledEndFn=n.endFn}}}t.compiledBeginFn&&t.compiledBeginFn(),t.resolveAttrs(),t.instantiateAttrDirectives(),t.renderNodeIfNot();for(let e=0;e<t.children.length;e++){let n=t.children[e];this.recompileElementFromStructure(n)}t.resolveAttrDirectivesIfNeeded(),this.checkStructureNodeActions(t),t.compiledEndFn&&t.compiledEndFn()}}checkStructureNodeActions(t){const e=t.compiledNode;t.compiledBeginFn&&this.listenersCollector.addActionsInElementsListeners(e,t.compiledBeginFn,t.compiledEndFn);let n=t.parent;for(;n;)n&&n.compiledBeginFn&&n.compiledEndFn&&this.listenersCollector.addActionsInElementsListeners(e,n.compiledBeginFn,n.compiledEndFn),n=n.parent}cloneStructureDueIteration(t,e,n){const r=new a(t);return r.compiledBeginFn=e,r.compiledEndFn=n,r}};l=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,i.GS)({single:!0}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[u.x])],l);class h{constructor(t=null){t&&Object.assign(this,t)}}},8421:(t,e,n)=>{"use strict";n.d(e,{C:()=>s});var r=n(2440),i=n(4302),o=n(9128);class s{static isPureElement(t){return t instanceof HTMLElement&&(t=t.tagName),"string"==typeof t&&-1!=["svg"].indexOf(t.toLowerCase())}static removeAllChildrenOfElement(t){if(t&&t.children.length)for(var e=0;e<t.children.length;e++)t.removeChild(t.children[e])}static resolveInterpolationIfHave(t,e){if(t){t=t.toString();let n=/{{(.|\n)*?}}/g;return n.test(t)&&(t=t.replace(n,(t=>""!==(t=t.replace(/(^{{)|(}}$)/g,"").replace(/[]/g,"").trim())?e.compile(t):""))),t}return""}static resolveDefaultAttribute(t,e,n,r){if(e&&n){if(n){let i=/^\[([^)]+)\]$/g.test(e);if(i?(e=e.substr(1,e.length-2),n=r.compile(n)):n=this.resolveInterpolationIfHave(n,r),e&&n)return void(t.hasAttribute(e)&&t.getAttribute(e)===n||("class"===e?n.trim().split(" ").forEach((e=>{t.classList.contains(e)||t.classList.add(e)})):t.setAttribute(e,n)));if(i)return}t.hasAttribute(e)&&t.removeAttribute(e)}}static buildStructureFromTemplate(t,e,n){var a;if(t=null!==(a=null==t?void 0:t.default.replace(/<!--(.|\s)*?-->/g,"").trim())&&void 0!==a?a:""){let a=new XMLSerializer,u=(new DOMParser).parseFromString(`<${n}>${t}</${n}>`,"text/html").body.childNodes[0],c=t=>{let n=new r.o(e);if(t.nodeType!==Node.TEXT_NODE){n.tagName=t.tagName.toLowerCase();let{attrs:e,directives:r}=h(t.attributes,n);if(n.attrs=e,n.attrDirectives.default=r.default,n.attrDirectives.iterate=r.iterate,s.isPureElement(n.tagName)){let e=t.attributes;if(e.length>0)do{t.removeAttributeNode(e[0])}while(t.attributes.length>0);n.rawNode=t,n.isPureElement=!0}else n.isVoid=(t.outerHTML||a.serializeToString(t)).indexOf("></")<0,""!==t.innerHTML.trim()&&(n.children=l(t.childNodes,n))}else n.isVoid=!0,n.hasInterpolationInText=/{{(.|\n)*?}}/g.test(t.textContent),n.content=t.textContent;return n},l=(t,e)=>{let n=[];if(t.length>0)for(let r=0;r<t.length;r++){let i=c(t[r]);i.parent=e,n.push(i)}return n},h=(t,e)=>{let n,r=[],s={default:[],iterate:{directive:null,props:{in:[],out:[]}}};if(t.length>0)for(let n=0;n<t.length;n++){let o=new i.T(t[n].name,t[n].value,e);r.push(o)}let a=[];const u=(t,e,n)=>{var r;return!(!e.isNotDirective||!(null!==(r=t.directiveType.prototype[`_${n}`])&&void 0!==r?r:[]).some((t=>("outputs"===n?`(${t})`:t)===e.name)))&&(a.indexOf(e)<0&&a.push(e),!0)};return r.forEach((t=>{t.isDefaultDirective?s.default.push({directive:t,props:{in:r.filter((e=>u(t,e,"inputs"))),out:r.filter((e=>u(t,e,"outputs")))}}):t.isIterationDirective&&!s.iterate.directive&&(s.iterate.directive=t,s.iterate.props={in:r.filter((e=>u(t,e,"inputs"))),out:r.filter((e=>u(t,e,"outputs")))})})),s.default=s.default.sort(((t,e)=>o.h.isNativeSelector(t.directive.name)?-1:o.h.isNativeSelector(e.directive.name)?1:0)),n=r.filter((t=>!!(t.isNotDirective&&a.indexOf(t)<0)&&(t.hasInterpolationInText=/{{(.|\n)*?}}/g.test(t.value),!0))),{attrs:n,directives:s}},f=c(u);return u.remove(),f}return new r.o(e)}}},2922:(t,e,n)=>{"use strict";n.d(e,{F0:()=>r.F}),n(1819),n(5789);var r=n(1431)},5789:(t,e,n)=>{"use strict";n.d(e,{A:()=>p});var r=n(1431);class i{constructor(t){this.path="",this.data=null,t&&Object.assign(this,t)}}var o=n(9754),s=n(2099),a=n(1745);let u=class extends s.T{constructor(t){super(),this.template=t}};u=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,a.GS)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[String])],u);var c=n(5297),l=n(221),h=n(8421),f=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))};class p extends i{get isNotFoundPath(){return"**"===this.path}get pathWithParams(){return/{(.|\n)*?}/g.test(this.path)}get hasParent(){return!(0,o.isNullOrUndefined)(this.parent)}get isAbstract(){return this.children&&this.children.length>0}get childIndex(){return this.parent?this.parent.children.indexOf(this):0}get tallestParent(){return this.hasParent?this.getAllParents().pop():this}get pageTemplate(){return this._pageTemplate}constructor(t){super(t),this.structuredTemplate=null,this.routeParams=new l.W,this._pageTemplate="",this.trimRoutePath(),this.checkChildren(),this.checkRoutesParent()}isChild(t,e=!1){return null!=this.children&&this.children.some((n=>n===t||e&&n.isChild(t,!0)))}loadPage(t,e,n,r=!0){return f(this,void 0,void 0,(function*(){if("string"==typeof this.page)try{!r&&this.pageInstance||(this.pageType=u,this.pageInstance=new u(this.page),this.structureTemplate()),yield t(this),yield n()}catch(t){throw yield e(t),t}else if("page"===this.page.name)try{this.page().then((n=>f(this,void 0,void 0,(function*(){try{!r&&this.pageInstance||this.instancePage(n),yield t(this)}catch(t){throw yield e(t),t}})))).catch(e).finally(n)}catch(t){throw e(t),t}else try{!r&&this.pageInstance||this.instancePage(this.page),yield t(this),yield n()}catch(t){throw yield e(t),t}}))}trimRoutePath(){var t;this.path=(null!==(t=this.path)&&void 0!==t?t:"").trim().replace(/(^\/)|(\/$)/g,"")}instancePage(t){if(this.pageType=t,this.prevPageInstance=this.pageInstance,this.routeParams=new l.W,this.pageInstance=c.l.inject(this.pageType,(t=>{t instanceof l.W&&(t.data=this.data,t.params=this.getParams(),t.parent=this.parent&&this.parent.routeParams,this.routeParams=t)})),this.pageInstance.template&&(this._pageTemplate=this.pageInstance.template,delete this.pageInstance.template),!this.pageInstance)throw new Error(`Cannot be load page of path: '${this.completePath()}'`);this.structureTemplate()}structureTemplate(){this.structuredTemplate=h.C.buildStructureFromTemplate(this.pageTemplate,this.pageInstance,"nimble-page")}getParams(){let t={};if(/{(.|\n)*?}/g.test(this.path)){let e=this.getPieceRelativeOfTheCurrentPath().split("/");this.path.split("/").forEach(((n,r)=>{if(/(^{)|(}$)/g.test(n)&&r<e.length){let i=n.replace(/(^{)|(}$)/g,""),o=e[r];t[i]=o}}))}return t}getPieceRelativeOfTheCurrentPath(){let t=this.parent&&this.parent.completePath().includes("/")?this.parent.completePath().split("/").length:0,e=t+this.path.split("/").length,n=r.F.currentPath.split("/");return n=n.slice(t,e),n.join("/")}checkChildren(){this.isAbstract&&(this.children=this.children.map((t=>new p(t))))}checkRoutesParent(){this.isAbstract&&this.children.forEach((t=>t.parent=this))}checkIfMatchCurrentLocation(){return this.isAbstract&&this.currentPathStartsRoutePath()?!!this.children.some((t=>t.checkIfMatchCurrentLocation())):this.currentPathIsMatch()}getMatchedPageWithLocation(){if(this.isAbstract&&this.currentPathStartsRoutePath()){for(let t of this.children)if(t.checkIfMatchCurrentLocation())return t.getMatchedPageWithLocation()}else if(this.currentPathIsMatch())return this;return null}currentPathIsMatch(){let t=this.completePath();if(/{(.|\n)*?}/g.test(t)){let e=t.replace(/{(.|\n)*?}/g,(t=>"(.|\n)*"));return RegExp(e,"g").test(r.F.currentPath)}return r.F.currentPath===this.completePath()}currentPathStartsRoutePath(){let t=this.completePath();if(/{(.|\n)*?}/g.test(t)){let e=t.replace(/{(.|\n)*?}/g,(t=>"(.*)"));return RegExp(e,"g").test(r.F.currentPath)}return r.F.currentPath.startsWith(this.completePath())}completePath(){let t=(this.parent&&this.parent.path?this.parent.completePath().concat("/"):"")+this.path;return t.endsWith("/")?t.substr(0,t.length-1):t}getAllParents(){let t=[],e=this;for(;!(0,o.isNullOrUndefined)(e.parent);)e.parent.page&&t.push(e.parent),e=e.parent;return t}getHighestParentOrHimself(){return this.hasParent?this.getAllParents().pop():this}}},1819:(t,e,n)=>{"use strict";var r;n.d(e,{u:()=>r}),function(t){t.NONE="NONE",t.STARTED_CHANGE="STARTED_CHANGE",t.FINISHED_CHANGE="FINISHED_CHANGE",t.CHANGE_ERROR="CHANGE_ERROR",t.STARTED_LOADING="STARTED_LOADING",t.FINISHED_LOADING="FINISHED_LOADING",t.ERROR_LOADING="ERROR_LOADING",t.STARTED_RERENDER="STARTED_RERENDER",t.FINISHED_RERENDER="FINISHED_RERENDER",t.CHANGE_REJECTED="CHANGE_REJECTED",t.RENDERING="RENDERING"}(r||(r={}))},1431:(t,e,n)=>{"use strict";n.d(e,{F:()=>l});var r,i=n(5789),o=n(9754),s=n(5297),a=n(1819);!function(t){t.START="START",t.END="END",t.NONE="NONE"}(r||(r={}));class u{constructor(t){Object.assign(this,t)}}var c=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))};class l{static get app(){return s.l.instance}static get state(){return this._state}static get previousState(){return this._previousState}static get realCurrentPath(){let t=(this.useHash?location.hash:location.pathname+location.hash).replace(/^(\/#\/|#\/|\/#|\/|#)|(\/)$/g,"");return t=this.removeBaseHrefPath(t).replace(/^(\/)/g,""),t}static get currentPath(){if((0,o.isNullOrUndefined)(this.nextPath)){var t=(this.useHash?location.hash:location.pathname).replace(/^(\/#\/|#\/|\/#|\/|#)|(\/)$/g,"");return(t=this.removeBaseHrefPath(t).replace(/^(\/)/g,"")).split("#")[0]}return this.nextPath}static get nextPath(){if(this._nextPath){var t=this._nextPath.replace(/^(\/#\/|#\/|\/#|\/|#)|(\/)$/g,"");return(t=this.removeBaseHrefPath(t).replace(/^(\/)/g,"")).split("#")[0]}return this._nextPath}static get routes(){return this._routes}static get abstractRoutes(){return this._routes.filter((t=>t.isAbstract))}static get singleRoutes(){return this._routes.filter((t=>!t.isAbstract))}static get current(){return this._current}static get next(){return this._next}static get previous(){return this._previous}static get onRoute(){return!(0,o.isNullOrUndefined)(this._current)}static registerRoutes(t){if(this.app.state===s.q.INITIALIZING){let e=t.find((t=>!(0,o.isNullOrUndefined)(t.redirect)&&!(0,o.isNullOrUndefined)(t.page)));if(e)throw new Error(`Occured an error with the route with path "${e.path}". Routes cannot have "page" and "redirect" properties together. Choose one of them.`);this._routes=t.map((t=>new i.A(t)))}}static removeBaseHrefPath(t){if(this.app.hasBaseHref){t=t.startsWith("/")?t:`/${t}`;let e=this.app.baseHref.replace(/^(\/)|(\/)$/g,"");t=t.replace(new RegExp(`^(/${e})`,"g"),"")}return t}static pathHasInsideBaseHref(t){return this.app.hasBaseHref&&t.startsWith(this.app.baseHref),!1}static setState(t,e){return c(this,void 0,void 0,(function*(){this._previousState=this._state,this._state=t,e=null!=e?e:new u({}),yield this.notifyListeners(t,Object.assign({state:t},e))}))}static start(){this.app.state===s.q.INITIALIZING&&(this.onRedirect(),this.useHash?window.onhashchange=()=>{this.currentPath,this.onRedirect()}:window.onpopstate=()=>{this.currentPath,this.onRedirect()})}static addListener(t,e){let n=Array.isArray(t)?t:[t],r=n.filter((t=>Object.values(a.u).map((t=>t.toString())).includes(t))),i=[];if(n.some((t=>r.indexOf(t)<0))){let t=n.filter((t=>!r.includes(t))).map((t=>`'${t}'`));console.warn(`The following states are invalids: ${t.join(", ")}.`)}for(let t of r){let n={order:this.listeners.filter((e=>e.state===t)).length,state:t,callback:e,internal:this.app.state===s.q.INITIALIZING};i.push(n),this.listeners.push(n)}return()=>{this.listeners=this.listeners.filter((t=>!i.some((e=>t===e))))}}static onStartChange(t){return this.addListener("STARTED_CHANGE",(e=>c(this,void 0,void 0,(function*(){yield t(e)}))))}static onEndChange(t){return this.addListener(["FINISHED_CHANGE","CHANGE_REJECTED","CHANGE_ERROR"],(e=>c(this,void 0,void 0,(function*(){yield t(e)}))))}static notifyListeners(t,e){return c(this,void 0,void 0,(function*(){let n=this.listeners.filter((e=>e.state===t));if(n.length){let i=!1,o=0;n.sort(((t,e)=>(0===o&&(i=t===n[0],o++),0))),n=this.getEventType()===r.START?n.sort(((t,e)=>t.internal&&!e.internal?-1:!t.internal&&e.internal?1:t.order>e.order?-1:t.order<e.order?1:0)):n.sort(((e,n)=>e.internal&&!n.internal||n.internal&&t===a.u.FINISHED_CHANGE?i?-1:1:!e.internal&&n.internal?i?1:-1:e.order>n.order?i?-1:1:e.order<n.order?i?1:-1:0));for(let t of n)yield t.callback(e)}}))}static onRedirect(){if(this.currentPath!==this.lastLocationPath){null==this.nextPath&&(this.lastLocationPath=this.currentPath);let t=!1;if(this.checkPageCanBeCurrent()){let{changed:e,isSamePath:n}=this.defineNextPage();if(n)return this._next=null,this.updateURLPath(this.current.completePath(),{pathRedirect:!0}),void(this.lastLocationPath=this.currentPath);if(t=e,e&&null!=this.next.redirect){let t=`${this.app.baseHref}${this.next.redirect}`.replace(/\/\//g,"/");return this._next=null,this.updateURLPath(t,{pathRedirect:!0}),this._nextPath=t,void this.onRedirect()}if(!e&&this.current&&this.current.completePath()!==this.realCurrentPath){let t=this.current.completePath();return this._next=null,this.updateURLPath(t,{pathRedirect:!0}),void(this.lastLocationPath=t)}}this.onRouterChange(t)}}static checkPageCanBeCurrent(){let t=this.routes.some((t=>t.checkIfMatchCurrentLocation()));return t||(t=this.routes.some((t=>"**"===t.path))),t}static defineNextPage(){var t;let e=null;for(let t=0;t<this.routes.length&&(e=this.routes[t].getMatchedPageWithLocation(),!e);t++);if(!e)for(let t=0;t<this.routes.length;t++){let n=this.routes[t];if(n.isNotFoundPath){e=n;break}}let n=!1,r=!1;return(0,o.isNullOrUndefined)(e)||(e!==this.current?(n=!0,this._next=e,r=`/${null===(t=this.current)||void 0===t?void 0:t.completePath()}`===(e.redirect?e.redirect:`/${e.completePath()}`)):r=!0),{changed:n,isSamePath:r}}static onRouterChange(t){t&&this.next?this.next.pathWithParams||this.next.isNotFoundPath||this.next.completePath()===this.currentPath?this.loadCurrentRoutePage():(this.redirect(this.next.completePath()),this._next=null):this.next||(console.error(`No pages matched with this path: "/${this.currentPath}". If it path is abstract (has children), define a new route path with redirect in "routes.ts", example: { path: '', redirect: '/some-path' }.`),this._next=null,this.stopListening=!0)}static loadCurrentRoutePage(){return c(this,void 0,void 0,(function*(){yield this.setState(a.u.STARTED_CHANGE,new u({route:this.next})),this.next.hasParent?this.loadRoutesPageFromAllParents():this.loadRoutePage(this.next).then((()=>c(this,void 0,void 0,(function*(){yield this.defineCurrentAfterFinished();const t=new u({route:this.current});yield this.setState(a.u.FINISHED_LOADING,t),yield this.setState(a.u.RENDERING,t),yield this.setState(a.u.FINISHED_CHANGE,t)}))),(()=>c(this,void 0,void 0,(function*(){yield this.abortChangeRoute(),yield this.setState(a.u.CHANGE_ERROR,new u({route:this.current}))}))))}))}static loadRoutesPageFromAllParents(){let t=this.current?l.getCommonParentOfTwoRoutes(this.next,this.current):null,e=this.next.getAllParents().map((t=>({route:t,makeNewInstance:!0})));if(t)for(let n of e.reverse())if(n.makeNewInstance=!1,n.route===t){e.reverse();break}let n=()=>{if(e.length>0){let t=e.pop();this.loadRoutePage(t.route,t.makeNewInstance).then((()=>{n()}),(t=>c(this,void 0,void 0,(function*(){yield this.abortChangeRoute(),yield this.setState(a.u.ERROR_LOADING,t)}))))}else this.loadRoutePage(this.next).then((()=>c(this,void 0,void 0,(function*(){yield this.defineCurrentAfterFinished();const t=new u({route:this.current});yield this.setState(a.u.FINISHED_LOADING,t),yield this.setState(a.u.RENDERING,t),yield this.setState(a.u.FINISHED_CHANGE,t)}))),(()=>c(this,void 0,void 0,(function*(){yield this.abortChangeRoute(),yield this.setState(a.u.CHANGE_ERROR,new u({route:this.current}))}))))};n()}static defineCurrentAfterFinished(){return c(this,void 0,void 0,(function*(){this._current&&(this._previous=this._current),this.next&&(this._current=this.next,this._next=null),(0,o.isNullOrUndefined)(this._nextPath)||(yield this.updateURLPath(this._nextPath),this._nextPath=null),this.lastLocationPath=this.currentPath,yield this.notifyOldRoutesElementExit()}))}static abortChangeRoute(){return c(this,void 0,void 0,(function*(){if((0,o.isNullOrUndefined)(this.nextPath)||this.nextRejectedAndRedirectAfter||!this.current)(0,o.isNullOrUndefined)(this.nextPath)&&!this.nextRejectedAndRedirectAfter&&(console.error(`Page of path "/${this.currentPath}" was rejected. In this case, there is no previous route for us can to return to, we suggest that you do some "Router.redirect('/you-secured-path')" in your ActivatedRoute class for these cases.`),this._next=null,this.stopListening=!0);else{let t=this.nextPath;this._next=null,this._nextPath=null,yield this.updateURLPath(t),this.lastLocationPath=this.currentPath}}))}static updateURLPath(t,e={}){return c(this,void 0,void 0,(function*(){let n=()=>t.includes("#")&&this.realCurrentPath.includes("#"),r=()=>t.includes("#")&&t.split("#")[0].replace(/^(\/#\/|#\/|\/#|\/|#)|(\/)$/g,"")===this.realCurrentPath.replace(/^(\/)/g,""),i=()=>this.realCurrentPath.includes("#")&&this.realCurrentPath.split("#")[0].replace(/\/$/g,"")===t.replace(/^(\/)/g,""),o=(!this.useHash&&t.includes("#")?t.split("#")[0]:t).replace(/^(\/)/g,""),s=(!this.useHash&&this.realCurrentPath.includes("#")?this.realCurrentPath.split("#")[0]:t).replace(/^(\/)/g,"");if(s.includes("#")&&(s=s.split("#")[0]),(t.includes("#")||this.realCurrentPath.includes("#"))&&o===s){if(n()||r())return void(location.hash=t.split("#")[1]);if(i())return void(location.hash="")}t=(t.startsWith("/")?"":"/")+t,this.useHash?location.hash=t:(null==e?void 0:e.pathRedirect)?history.replaceState(null,null,t):history.pushState(null,null,t)}))}static loadRoutePage(t,e=!0){return new Promise(((n,r)=>c(this,void 0,void 0,(function*(){yield this.setState(a.u.STARTED_LOADING,new u({route:t})),yield t.loadPage((t=>c(this,void 0,void 0,(function*(){this.routeCanActivate(t)?(t.pageInstance.onNeedRerender=this.whenRerenderIsRequested.bind(this),t.pageInstance.pageParent=t.parent?t.parent.pageInstance:null,yield this.setState(a.u.FINISHED_LOADING,new u({route:t})),yield n(t)):(yield this.setState(a.u.CHANGE_REJECTED,new u({route:t})),yield r(null))}))),(t=>c(this,void 0,void 0,(function*(){console.error(t),yield this.setState(a.u.ERROR_LOADING,t),yield r(t)}))),(()=>c(this,void 0,void 0,(function*(){}))),e)}))))}static routeCanActivate(t){let e=(this.realCurrentPath.startsWith("/")?"":"/")+this.realCurrentPath,n=this.nextPath?(this.nextPath.startsWith("/")?"":"/")+this.nextPath:e;if(t.guard&&t.guard.length>0)for(let r of t.guard){let i=s.l.inject(r);if(i&&!i.doActivate(e,n,t))return!1}return!0}static redirect(t){var e;return c(this,void 0,void 0,(function*(){if(this.pathHasInsideBaseHref(t),this.nextRejectedAndRedirectAfter=!(0,o.isNullOrUndefined)(this.nextPath)||!this.current,this.nextRejectedAndRedirectAfter&&(0,o.isNullOrUndefined)(this.current)&&(this._next=null,this.updateURLPath(t,{pathRedirect:!0}),this._nextPath=t),this.pathIsHashLink(t)&&this.pathIsHashLink(t,{checkIsCurrent:!0}))this.updateURLPath(t);else{let n=this.removeBaseHrefPath(t.includes("#")?t.split("#")[0]:t).replace(/^\//g,"");if(this.currentPathIsHashLink()&&this.currentPath!==n)this._nextPath=t;else{let r=(null===(e=this.current)||void 0===e?void 0:e.completePath())===n;if(this.updateURLPath(t,{pathRedirect:r}),r)return}}this.onRedirect()}))}static pathIsHashLink(t,e={}){return t=t.replace(/^\//g,""),e.checkIsCurrent?!(!t.includes("#")||!t.startsWith(this.currentPath))&&t.replace(this.currentPath,"").startsWith("/#"):t.includes("#")}static currentPathIsHashLink(){return this.realCurrentPath.includes("#")}static notifyOldRoutesElementExit(){return c(this,void 0,void 0,(function*(){let t=this.current.getHighestParentOrHimself(),e=this.previous?l.getCommonParentOfTwoRoutes(this.current,this.previous):t;if(this.previous){let t=[];for(let n of[this.previous,...this.previous.getAllParents()]){if(n===e)break;t.push(n)}for(let e of t.reverse())yield e.pageInstance.onExit()}}))}static whenRerenderIsRequested(t){return c(this,void 0,void 0,(function*(){if(this.state!==a.u.RENDERING){let t=this.state===a.u.STARTED_CHANGE,e=t&&this.previous?this.previous:this.current;yield this.setState(a.u.STARTED_RERENDER,new u({route:e})),yield this.setState(a.u.FINISHED_RERENDER,new u({route:this.current})),t&&(this._state=a.u.STARTED_CHANGE)}else console.warn("The render() was requested and did not work because the page was being constructing.")}))}static getCommonParentOfTwoRoutes(t,e){if(t&&e){let n=[t,...t.getAllParents()],r=[e,...e.getAllParents()],i=n.find((t=>r.some((e=>t===e))));return i}return null}static getEventType(t){switch(t=t||this.state){case a.u.STARTED_CHANGE:case a.u.STARTED_LOADING:case a.u.STARTED_RERENDER:return r.START;case a.u.FINISHED_CHANGE:case a.u.FINISHED_LOADING:case a.u.ERROR_LOADING:case a.u.FINISHED_RERENDER:case a.u.CHANGE_ERROR:return r.END;case a.u.RENDERING:default:return r.NONE}}}l._routes=[],l.stopListening=!1,l.listeners=[],l.useHash=!1,l._nextPath=null,l.nextRejectedAndRedirectAfter=!1},655:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__assign:()=>o,__asyncDelegator:()=>w,__asyncGenerator:()=>b,__asyncValues:()=>_,__await:()=>m,__awaiter:()=>l,__classPrivateFieldGet:()=>A,__classPrivateFieldSet:()=>S,__createBinding:()=>f,__decorate:()=>a,__exportStar:()=>p,__extends:()=>i,__generator:()=>h,__importDefault:()=>T,__importStar:()=>E,__makeTemplateObject:()=>I,__metadata:()=>c,__param:()=>u,__read:()=>v,__rest:()=>s,__spread:()=>y,__spreadArrays:()=>g,__values:()=>d});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function p(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function g(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=d(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function I(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function A(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},962:(t,e,n)=>{"use strict";var r=n(1937),i=n(9212),o=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"==typeof n&&o(t,".prototype.")>-1?i(n):n}},9212:(t,e,n)=>{"use strict";var r=n(9906),i=n(1937),o=i("%Function.prototype.apply%"),s=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||r.call(s,o),u=i("%Object.getOwnPropertyDescriptor%",!0),c=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var e=a(r,s,arguments);return u&&c&&u(e,"length").configurable&&c(e,"length",{value:1+l(0,t.length-(arguments.length-1))}),e};var h=function(){return a(r,o,arguments)};c?c(t.exports,"apply",{value:h}):t.exports.apply=h},6200:(t,e,n)=>{"use strict";var r=n(8059),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){if(!r(e))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=n),"[object Array]"===i.call(t)?function(t,e,n){for(var r=0,i=t.length;r<i;r++)o.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}(t,e,s):"string"==typeof t?function(t,e,n){for(var r=0,i=t.length;r<i;r++)null==n?e(t.charAt(r),r,t):e.call(n,t.charAt(r),r,t)}(t,e,s):function(t,e,n){for(var r in t)o.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}(t,e,s)}},1938:t=>{"use strict";var e=Array.prototype.slice,n=Object.prototype.toString;t.exports=function(t){var r=this;if("function"!=typeof r||"[object Function]"!==n.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var i,o=e.call(arguments,1),s=Math.max(0,r.length-o.length),a=[],u=0;u<s;u++)a.push("$"+u);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var n=r.apply(this,o.concat(e.call(arguments)));return Object(n)===n?n:this}return r.apply(t,o.concat(e.call(arguments)))})),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i}},9906:(t,e,n)=>{"use strict";var r=n(1938);t.exports=Function.prototype.bind||r},1937:(t,e,n)=>{"use strict";var r,i=SyntaxError,o=Function,s=TypeError,a=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(t){u=null}var c=function(){throw new s},l=u?function(){try{return c}catch(t){try{return u(arguments,"callee").get}catch(t){return c}}}():c,h=n(9209)(),f=Object.getPrototypeOf||function(t){return t.__proto__},p={},d="undefined"==typeof Uint8Array?r:f(Uint8Array),v={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":l,"%TypedArray%":d,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};try{null.error}catch(t){var y=f(f(t));v["%Error.prototype%"]=y}var g=function t(e){var n;if("%AsyncFunction%"===e)n=a("async function () {}");else if("%GeneratorFunction%"===e)n=a("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=a("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&(n=f(i.prototype))}return v[e]=n,n},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n(9906),w=n(5327),_=b.call(Function.call,Array.prototype.concat),I=b.call(Function.apply,Array.prototype.splice),E=b.call(Function.call,String.prototype.replace),T=b.call(Function.call,String.prototype.slice),A=b.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,N=/\\(\\)?/g,R=function(t,e){var n,r=t;if(w(m,r)&&(r="%"+(n=m[r])[0]+"%"),w(v,r)){var o=v[r];if(o===p&&(o=g(r)),void 0===o&&!e)throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new s('"allowMissing" argument must be a boolean');if(null===A(/^%?[^%]*%?$/,t))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=T(t,0,1),n=T(t,-1);if("%"===e&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return E(t,S,(function(t,e,n,i){r[r.length]=n?E(i,N,"$1"):e||t})),r}(t),r=n.length>0?n[0]:"",o=R("%"+r+"%",e),a=o.name,c=o.value,l=!1,h=o.alias;h&&(r=h[0],I(n,_([0,1],h)));for(var f=1,p=!0;f<n.length;f+=1){var d=n[f],y=T(d,0,1),g=T(d,-1);if(('"'===y||"'"===y||"`"===y||'"'===g||"'"===g||"`"===g)&&y!==g)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&p||(l=!0),w(v,a="%"+(r+="."+d)+"%"))c=v[a];else if(null!=c){if(!(d in c)){if(!e)throw new s("base intrinsic for "+t+" exists, but the property is not available.");return}if(u&&f+1>=n.length){var m=u(c,d);c=(p=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:c[d]}else p=w(c,d),c=c[d];p&&!l&&(v[a]=c)}}return c}},785:(t,e,n)=>{"use strict";var r=n(1937)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(t){r=null}t.exports=r},9209:(t,e,n)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(4306);t.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&i()}},4306:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},2628:(t,e,n)=>{"use strict";var r=n(4306);t.exports=function(){return r()&&!!Symbol.toStringTag}},5327:(t,e,n)=>{"use strict";var r=n(9906);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},3655:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},8410:(t,e,n)=>{"use strict";var r=n(2628)(),i=n(962)("Object.prototype.toString"),o=function(t){return!(r&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},s=function(t){return!!o(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"[object Function]"===i(t.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,t.exports=a?o:s},8059:t=>{"use strict";var e,n,r=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw n}}),n={},i((function(){throw 42}),null,e)}catch(t){t!==n&&(i=null)}else i=null;var o=/^\s*class\b/,s=function(t){try{var e=r.call(t);return o.test(e)}catch(t){return!1}},a=function(t){try{return!s(t)&&(r.call(t),!0)}catch(t){return!1}},u=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,l=!(0 in[,]),h=function(){return!1};if("object"==typeof document){var f=document.all;u.call(f)===u.call(document.all)&&(h=function(t){if((l||!t)&&(void 0===t||"object"==typeof t))try{var e=u.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}t.exports=i?function(t){if(h(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{i(t,null,e)}catch(t){if(t!==n)return!1}return!s(t)&&a(t)}:function(t){if(h(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(c)return a(t);if(s(t))return!1;var e=u.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&a(t)}},521:(t,e,n)=>{"use strict";var r,i=Object.prototype.toString,o=Function.prototype.toString,s=/^\s*(?:function)?\*/,a=n(2628)(),u=Object.getPrototypeOf;t.exports=function(t){if("function"!=typeof t)return!1;if(s.test(o.call(t)))return!0;if(!a)return"[object GeneratorFunction]"===i.call(t);if(!u)return!1;if(void 0===r){var e=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(t){}}();r=!!e&&u(e)}return u(t)===r}},9657:(t,e,n)=>{"use strict";var r=n(6200),i=n(3943),o=n(962),s=o("Object.prototype.toString"),a=n(2628)(),u=n(785),c="undefined"==typeof globalThis?n.g:globalThis,l=i(),h=o("Array.prototype.indexOf",!0)||function(t,e){for(var n=0;n<t.length;n+=1)if(t[n]===e)return n;return-1},f=o("String.prototype.slice"),p={},d=Object.getPrototypeOf;a&&u&&d&&r(l,(function(t){var e=new c[t];if(Symbol.toStringTag in e){var n=d(e),r=u(n,Symbol.toStringTag);if(!r){var i=d(n);r=u(i,Symbol.toStringTag)}p[t]=r.get}})),t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!a||!(Symbol.toStringTag in t)){var e=f(s(t),8,-1);return h(l,e)>-1}return!!u&&function(t){var e=!1;return r(p,(function(n,r){if(!e)try{e=n.call(t)===r}catch(t){}})),e}(t)}},8035:t=>{t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},4576:(t,e,n)=>{"use strict";var r=n(8410),i=n(521),o=n(3160),s=n(9657);function a(t){return t.call.bind(t)}var u="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,l=a(Object.prototype.toString),h=a(Number.prototype.valueOf),f=a(String.prototype.valueOf),p=a(Boolean.prototype.valueOf);if(u)var d=a(BigInt.prototype.valueOf);if(c)var v=a(Symbol.prototype.valueOf);function y(t,e){if("object"!=typeof t)return!1;try{return e(t),!0}catch(t){return!1}}function g(t){return"[object Map]"===l(t)}function m(t){return"[object Set]"===l(t)}function b(t){return"[object WeakMap]"===l(t)}function w(t){return"[object WeakSet]"===l(t)}function _(t){return"[object ArrayBuffer]"===l(t)}function I(t){return"undefined"!=typeof ArrayBuffer&&(_.working?_(t):t instanceof ArrayBuffer)}function E(t){return"[object DataView]"===l(t)}function T(t){return"undefined"!=typeof DataView&&(E.working?E(t):t instanceof DataView)}e.isArgumentsObject=r,e.isGeneratorFunction=i,e.isTypedArray=s,e.isPromise=function(t){return"undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},e.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):s(t)||T(t)},e.isUint8Array=function(t){return"Uint8Array"===o(t)},e.isUint8ClampedArray=function(t){return"Uint8ClampedArray"===o(t)},e.isUint16Array=function(t){return"Uint16Array"===o(t)},e.isUint32Array=function(t){return"Uint32Array"===o(t)},e.isInt8Array=function(t){return"Int8Array"===o(t)},e.isInt16Array=function(t){return"Int16Array"===o(t)},e.isInt32Array=function(t){return"Int32Array"===o(t)},e.isFloat32Array=function(t){return"Float32Array"===o(t)},e.isFloat64Array=function(t){return"Float64Array"===o(t)},e.isBigInt64Array=function(t){return"BigInt64Array"===o(t)},e.isBigUint64Array=function(t){return"BigUint64Array"===o(t)},g.working="undefined"!=typeof Map&&g(new Map),e.isMap=function(t){return"undefined"!=typeof Map&&(g.working?g(t):t instanceof Map)},m.working="undefined"!=typeof Set&&m(new Set),e.isSet=function(t){return"undefined"!=typeof Set&&(m.working?m(t):t instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),e.isWeakMap=function(t){return"undefined"!=typeof WeakMap&&(b.working?b(t):t instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),e.isWeakSet=function(t){return w(t)},_.working="undefined"!=typeof ArrayBuffer&&_(new ArrayBuffer),e.isArrayBuffer=I,E.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&E(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=T;var A="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function S(t){return"[object SharedArrayBuffer]"===l(t)}function N(t){return void 0!==A&&(void 0===S.working&&(S.working=S(new A)),S.working?S(t):t instanceof A)}function R(t){return y(t,h)}function O(t){return y(t,f)}function k(t){return y(t,p)}function P(t){return u&&y(t,d)}function D(t){return c&&y(t,v)}e.isSharedArrayBuffer=N,e.isAsyncFunction=function(t){return"[object AsyncFunction]"===l(t)},e.isMapIterator=function(t){return"[object Map Iterator]"===l(t)},e.isSetIterator=function(t){return"[object Set Iterator]"===l(t)},e.isGeneratorObject=function(t){return"[object Generator]"===l(t)},e.isWebAssemblyCompiledModule=function(t){return"[object WebAssembly.Module]"===l(t)},e.isNumberObject=R,e.isStringObject=O,e.isBooleanObject=k,e.isBigIntObject=P,e.isSymbolObject=D,e.isBoxedPrimitive=function(t){return R(t)||O(t)||k(t)||P(t)||D(t)},e.isAnyArrayBuffer=function(t){return"undefined"!=typeof Uint8Array&&(I(t)||N(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))},9754:(t,e,n)=>{var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},i=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(u(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),a=r[n];n<o;a=r[++n])y(a)||!_(a)?s+=" "+a:s+=" "+u(a);return s},e.deprecate=function(t,n){if("undefined"!=typeof process&&!0===process.noDeprecation)return t;if("undefined"==typeof process)return function(){return e.deprecate(t,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),r=!0}return t.apply(this,arguments)}};var o={},s=/^$/;if({production:!0,baseUrl:"https://your-prod-url.com.br",default:{production:!0,baseUrl:"https://your-prod-url.com.br"}}.NODE_DEBUG){var a={production:!0,baseUrl:"https://your-prod-url.com.br",default:{production:!0,baseUrl:"https://your-prod-url.com.br"}}.NODE_DEBUG;a=a.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+a+"$","i")}function u(t,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&e._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),h(r,t,r.depth)}function c(t,e){var n=u.styles[e];return n?"["+u.colors[n][0]+"m"+t+"["+u.colors[n][1]+"m":t}function l(t,e){return t}function h(t,n,r){if(t.customInspect&&n&&T(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return m(i)||(i=h(t,i,r)),i}var o=function(t,e){if(b(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(T(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(I(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return f(n)}var c,l="",_=!1,A=["{","}"];return d(n)&&(_=!0,A=["[","]"]),T(n)&&(l=" [Function"+(n.name?": "+n.name:"")+"]"),w(n)&&(l=" "+RegExp.prototype.toString.call(n)),I(n)&&(l=" "+Date.prototype.toUTCString.call(n)),E(n)&&(l=" "+f(n)),0!==s.length||_&&0!=n.length?r<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=_?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)R(e,String(s))?o.push(p(t,e,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(p(t,e,n,r,i,!0))})),o}(t,n,r,a,s):s.map((function(e){return p(t,n,r,a,e,_)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(c,l,A)):A[0]+l+A[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),R(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=y(n)?h(t,u.value,null):h(t,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").slice(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function y(t){return null===t}function g(t){return"number"==typeof t}function m(t){return"string"==typeof t}function b(t){return void 0===t}function w(t){return _(t)&&"[object RegExp]"===A(t)}function _(t){return"object"==typeof t&&null!==t}function I(t){return _(t)&&"[object Date]"===A(t)}function E(t){return _(t)&&("[object Error]"===A(t)||t instanceof Error)}function T(t){return"function"==typeof t}function A(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!o[t])if(s.test(t)){var n=process.pid;o[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else o[t]=function(){};return o[t]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=n(4576),e.isArray=d,e.isBoolean=v,e.isNull=y,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=b,e.isRegExp=w,e.types.isRegExp=w,e.isObject=_,e.isDate=I,e.types.isDate=I,e.isError=E,e.types.isNativeError=E,e.isFunction=T,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(8035);var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;console.log("%s - %s",(n=[S((t=new Date).getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":"),[t.getDate(),N[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=n(3655),e._extend=function(t,e){if(!e||!_(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var O="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function k(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(O&&t[O]){var e;if("function"!=typeof(e=t[O]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,O,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,i)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),O&&Object.defineProperty(e,O,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=O,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n]);var r=e.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return r.apply(i,arguments)};t.apply(this,e).then((function(t){process.nextTick(o.bind(null,null,t))}),(function(t){process.nextTick(k.bind(null,t,o))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,r(t)),e}},3160:(t,e,n)=>{"use strict";var r=n(6200),i=n(3943),o=n(962),s=n(785),a=o("Object.prototype.toString"),u=n(2628)(),c="undefined"==typeof globalThis?n.g:globalThis,l=i(),h=o("String.prototype.slice"),f={},p=Object.getPrototypeOf;u&&s&&p&&r(l,(function(t){if("function"==typeof c[t]){var e=new c[t];if(Symbol.toStringTag in e){var n=p(e),r=s(n,Symbol.toStringTag);if(!r){var i=p(n);r=s(i,Symbol.toStringTag)}f[t]=r.get}}}));var d=n(9657);t.exports=function(t){return!!d(t)&&(u&&Symbol.toStringTag in t?function(t){var e=!1;return r(f,(function(n,r){if(!e)try{var i=n.call(t);i===r&&(e=i)}catch(t){}})),e}(t):h(a(t),8,-1))}},7645:()=>{!function(){"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const t=HTMLElement;window.HTMLElement={HTMLElement:function(){return Reflect.construct(t,[],this.constructor)}}.HTMLElement,HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}()}()},7966:(t,e,n)=>{var r;!function(t){!function(e){var r="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=o(t);function o(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===r.Reflect?r.Reflect=t:i=o(r.Reflect,i),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,u={create:o?function(){return L(Object.create(null))}:s?function(){return L({__proto__:null})}:function(){return L({})},has:a?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:a?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),l="object"==typeof process&&{production:!0,baseUrl:"https://your-prod-url.com.br",default:{production:!0,baseUrl:"https://your-prod-url.com.br"}}&&"true"==={production:!0,baseUrl:"https://your-prod-url.com.br",default:{production:!0,baseUrl:"https://your-prod-url.com.br"}}.REFLECT_METADATA_USE_MAP_POLYFILL,h=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function s(t,e){return[t,e]}}():Map,f=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new h}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}():Set,p=new(l||"function"!=typeof WeakMap?function(){var t=16,n=u.create(),r=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+a()}while(u.has(n,t));return n[t]=!0,t}function o(t,n){if(!e.call(t,r)){if(!n)return;Object.defineProperty(t,r,{value:u.create()})}return t[r]}function s(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var e,n=(e=t,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):s(new Uint8Array(e),e):s(new Array(e),e));n[6]=79&n[6]|64,n[8]=191&n[8]|128;for(var r="",i=0;i<t;++i){var o=n[i];4!==i&&6!==i&&8!==i||(r+="-"),o<16&&(r+="0"),r+=o.toString(16).toLowerCase()}return r}}():WeakMap);function d(t,e,n){var r=p.get(t);if(E(r)){if(!n)return;r=new h,p.set(t,r)}var i=r.get(e);if(E(i)){if(!n)return;i=new h,r.set(e,i)}return i}function v(t,e,n){if(y(t,e,n))return!0;var r=x(e);return!T(r)&&v(t,r,n)}function y(t,e,n){var r=d(e,n,!1);return!E(r)&&!!r.has(t)}function g(t,e,n){if(y(t,e,n))return m(t,e,n);var r=x(e);return T(r)?void 0:g(t,r,n)}function m(t,e,n){var r=d(e,n,!1);if(!E(r))return r.get(t)}function b(t,e,n,r){d(n,r,!0).set(t,e)}function w(t,e){var n=_(t,e),r=x(t);if(null===r)return n;var i=w(r,e);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new f,s=[],a=0,u=n;a<u.length;a++){var c=u[a];o.has(c)||(o.add(c),s.push(c))}for(var l=0,h=i;l<h.length;l++)c=h[l],o.has(c)||(o.add(c),s.push(c));return s}function _(t,e){var n=[],r=d(t,e,!1);if(E(r))return n;for(var o=function(t){var e=P(t,i);if(!O(e))throw new TypeError;var n=e.call(t);if(!A(n))throw new TypeError;return n}(r.keys()),s=0;;){var a=D(o);if(!a)return n.length=s,n;var u=a.value;try{n[s]=u}catch(t){try{C(o)}finally{throw t}}s++}}function I(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function E(t){return void 0===t}function T(t){return null===t}function A(t){return"object"==typeof t?null!==t:"function"==typeof t}function S(t,e){switch(I(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",i=P(t,r);if(void 0!==i){var o=i.call(t,n);if(A(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(O(n)&&!A(i=n.call(t)))return i;if(O(r=t.valueOf)&&!A(i=r.call(t)))return i}else{var r;if(O(r=t.valueOf)&&!A(i=r.call(t)))return i;var i,o=t.toString;if(O(o)&&!A(i=o.call(t)))return i}throw new TypeError}(t,"default"===n?"number":n)}function N(t){var e=S(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function R(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function O(t){return"function"==typeof t}function k(t){return"function"==typeof t}function P(t,e){var n=t[e];if(null!=n){if(!O(n))throw new TypeError;return n}}function D(t){var e=t.next();return!e.done&&e}function C(t){var e=t.return;e&&e.call(t)}function x(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i||i===t?e:i}function L(t){return t.__=void 0,delete t.__,t}t("decorate",(function(t,e,n,r){if(E(n)){if(!R(t))throw new TypeError;if(!k(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!E(r)&&!T(r)){if(!k(r))throw new TypeError;e=r}}return e}(t,e)}if(!R(t))throw new TypeError;if(!A(e))throw new TypeError;if(!A(r)&&!E(r)&&!T(r))throw new TypeError;return T(r)&&(r=void 0),function(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=(0,t[i])(e,n,r);if(!E(o)&&!T(o)){if(!A(o))throw new TypeError;r=o}}return r}(t,e,n=N(n),r)})),t("metadata",(function(t,e){return function(n,r){if(!A(n))throw new TypeError;if(!E(r)&&!function(t){switch(I(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;b(t,e,n,r)}})),t("defineMetadata",(function(t,e,n,r){if(!A(n))throw new TypeError;return E(r)||(r=N(r)),b(t,e,n,r)})),t("hasMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return E(n)||(n=N(n)),v(t,e,n)})),t("hasOwnMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return E(n)||(n=N(n)),y(t,e,n)})),t("getMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return E(n)||(n=N(n)),g(t,e,n)})),t("getOwnMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return E(n)||(n=N(n)),m(t,e,n)})),t("getMetadataKeys",(function(t,e){if(!A(t))throw new TypeError;return E(e)||(e=N(e)),w(t,e)})),t("getOwnMetadataKeys",(function(t,e){if(!A(t))throw new TypeError;return E(e)||(e=N(e)),_(t,e)})),t("deleteMetadata",(function(t,e,n){if(!A(e))throw new TypeError;E(n)||(n=N(n));var r=d(e,n,!1);if(E(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=p.get(e);return i.delete(n),i.size>0||p.delete(e),!0}))}(i)}()}(r||(r={}))},3943:(t,e,n)=>{"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"==typeof globalThis?n.g:globalThis;t.exports=function(){for(var t=[],e=0;e<r.length;e++)"function"==typeof i[r[e]]&&(t[t.length]=r[e]);return t}}},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.f={},__webpack_require__.e=t=>Promise.all(Object.keys(__webpack_require__.f).reduce(((e,n)=>(__webpack_require__.f[n](t,e),e)),[])),__webpack_require__.u=t=>t+".bundle."+{293:"4aa74c4973d3c81a18d7",307:"26722be5adc0bcf9f534",413:"f1519d3cfb85fca9e347",493:"ab3065e8ccb5b66c313f",505:"3307d01eed6b33e5700b",581:"2b74a0916d8615d1125a",624:"85f11302a11b56b40c78",662:"f46c356d329f85811c58",687:"9bf05b0e2c76403d873f",997:"c4cad06d92e27ed59f6b"}[t]+".js",__webpack_require__.miniCssF=t=>t+".bundle."+__webpack_require__.h()+".css",__webpack_require__.h=()=>"55bebf9781486db2509a",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),inProgress={},dataWebpackPrefix="personal-page:",__webpack_require__.l=(t,e,n,r)=>{if(inProgress[t])inProgress[t].push(e);else{var i,o;if(void 0!==n)for(var s=document.getElementsByTagName("script"),a=0;a<s.length;a++){var u=s[a];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==dataWebpackPrefix+n){i=u;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",dataWebpackPrefix+n),i.src=t),inProgress[t]=[e];var c=(e,n)=>{i.onerror=i.onload=null,clearTimeout(l);var r=inProgress[t];if(delete inProgress[t],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((t=>t(n))),e)return e(n)},l=setTimeout(c.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=c.bind(null,i.onerror),i.onload=c.bind(null,i.onload),o&&document.head.appendChild(i)}},__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.p="",(()=>{if("undefined"!=typeof document){var t={179:0};__webpack_require__.f.miniCss=(e,n)=>{t[e]?n.push(t[e]):0!==t[e]&&{293:1,307:1,493:1,505:1,581:1,624:1,662:1,687:1,997:1}[e]&&n.push(t[e]=(t=>new Promise(((e,n)=>{var r=__webpack_require__.miniCssF(t),i=__webpack_require__.p+r;if(((t,e)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=(s=n[r]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(i===t||i===e))return s}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){var s;if((i=(s=o[r]).getAttribute("data-href"))===t||i===e)return s}})(r,i))return e();((t,e,n,r,i)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=n=>{if(o.onerror=o.onload=null,"load"===n.type)r();else{var s=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.href||e,u=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=s,u.request=a,o.parentNode&&o.parentNode.removeChild(o),i(u)}},o.href=e,document.head.appendChild(o)})(t,i,0,e,n)})))(e).then((()=>{t[e]=0}),(n=>{throw delete t[e],n})))}}})(),(()=>{var t={179:0};__webpack_require__.f.j=(e,n)=>{var r=__webpack_require__.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else if(293!=e){var i=new Promise(((n,i)=>r=t[e]=[n,i]));n.push(r[2]=i);var o=__webpack_require__.p+__webpack_require__.u(e),s=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}}),"chunk-"+e,e)}else t[e]=0};var e=(e,n)=>{var r,i,[o,s,a]=n,u=0;if(o.some((e=>0!==t[e]))){for(r in s)__webpack_require__.o(s,r)&&(__webpack_require__.m[r]=s[r]);a&&a(__webpack_require__)}for(e&&e(n);u<o.length;u++)i=o[u],__webpack_require__.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=self.webpackChunkpersonal_page=self.webpackChunkpersonal_page||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var __webpack_exports__={};(()=>{"use strict";const t=Object.assign({},{production:!0,baseUrl:"https://your-prod-url.com.br",default:{production:!0,baseUrl:"https://your-prod-url.com.br"}});var e=__webpack_require__(5297),n=(__webpack_require__(2285),__webpack_require__(7009),__webpack_require__(5342),__webpack_require__(1499),__webpack_require__(2509),__webpack_require__(4052),__webpack_require__(4290),__webpack_require__(2922)),r=(__webpack_require__(8249),__webpack_require__(9402),__webpack_require__(8713));__webpack_require__(8358),__webpack_require__(221),__webpack_require__(6290),__webpack_require__(3036),__webpack_require__(8414),__webpack_require__(9718),e.l.prototype.pluginGoogleAnalytics=function(t){if(!t.disabled&&!("pre-rendering"in window))if(this.state===e.q.INITIALIZING){window.dataLayer=window.dataLayer||[];const e=function(){(window.dataLayer||[]).push(arguments)};let r=!1,i=!1;const o=`https://www.googletagmanager.com/gtag/js?id=${t.id}`,s=document.head.querySelector(`[src="${o}"]`),a=()=>{i=!0,r&&e("config",t.id,{page_path:`/${n.F0.currentPath}`})};if(s)s.onload=a.bind(this);else{const t=document.createElement("script");t.async=!0,t.onload=a.bind(this),t.src=o,document.head.append(t)}e("js",new Date),e("config",t.id),n.F0.addListener("FINISHED_CHANGE",(n=>{r=!0,i&&e("config",t.id,{page_path:`/${n.route.completePath()}`})}))}else console.warn("The GoolgeAnalytics plugin only works before start() method of NimbleApp.");return this};const i=[{path:"",page:()=>__webpack_require__.e(624).then(__webpack_require__.bind(__webpack_require__,9624)).then((t=>t.RootPage)),children:[{path:"",page:()=>__webpack_require__.e(581).then(__webpack_require__.bind(__webpack_require__,7581)).then((t=>t.PublicPage)),children:[{path:"",redirect:"blog"},{path:"blog",children:[{path:"",page:()=>__webpack_require__.e(662).then(__webpack_require__.bind(__webpack_require__,662)).then((t=>t.BlogPage))},{path:"article",children:[{path:"",redirect:"blog"},{path:"new",page:()=>Promise.all([__webpack_require__.e(413),__webpack_require__.e(293)]).then(__webpack_require__.bind(__webpack_require__,4413)).then((t=>t.AddArticlePage))},{path:"{id}",page:()=>__webpack_require__.e(505).then(__webpack_require__.bind(__webpack_require__,5505)).then((t=>t.ArticlePage))}]}]},{path:"about-me",page:()=>__webpack_require__.e(307).then(__webpack_require__.bind(__webpack_require__,3307)).then((t=>t.AboutMePage))},{path:"open-sources",page:()=>__webpack_require__.e(997).then(__webpack_require__.bind(__webpack_require__,7997)).then((t=>t.OpenSourcesPage))},{path:"skills",page:()=>__webpack_require__.e(493).then(__webpack_require__.bind(__webpack_require__,6493)).then((t=>t.SkillsPage))},{path:"contact",page:()=>__webpack_require__.e(687).then(__webpack_require__.bind(__webpack_require__,7687)).then((t=>t.ContactPage))}]}]}];var o=__webpack_require__(223),s=__webpack_require__(4782),a=__webpack_require__(4901);let u=class{};u=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([(0,r.G)({single:!0})],u),e.l.config({routes:i,directives:[],providers:[u,s.D,a.X,o.n]}).pluginGoogleAnalytics({id:"G-MZ8XBP3BJF",disabled:!t.production}).start()})()})();